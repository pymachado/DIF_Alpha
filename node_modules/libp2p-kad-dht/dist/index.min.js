(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2pKadDht = factory()}(typeof self !== 'undefined' ? self : this, function () {
var Libp2pKadDht=(()=>{var hh=Object.defineProperty;var r6=t=>hh(t,"__esModule",{value:!0});var Te=(t,e)=>()=>(t&&(e=t(t=0)),e);var T=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),It=(t,e)=>{r6(t);for(var r in e)hh(t,r,{get:e[r],enumerable:!0})};var Ds=T((hB,e0)=>{"use strict";var Pi=typeof Reflect=="object"?Reflect:null,lh=Pi&&typeof Pi.apply=="function"?Pi.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Ns;Pi&&typeof Pi.ownKeys=="function"?Ns=Pi.ownKeys:Object.getOwnPropertySymbols?Ns=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ns=function(e){return Object.getOwnPropertyNames(e)};function n6(t){console&&console.warn&&console.warn(t)}var dh=Number.isNaN||function(e){return e!==e};function qe(){qe.init.call(this)}e0.exports=qe;e0.exports.once=o6;qe.EventEmitter=qe;qe.prototype._events=void 0;qe.prototype._eventsCount=0;qe.prototype._maxListeners=void 0;var ph=10;function Ls(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(qe,"defaultMaxListeners",{enumerable:!0,get:function(){return ph},set:function(t){if(typeof t!="number"||t<0||dh(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");ph=t}});qe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};qe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||dh(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function yh(t){return t._maxListeners===void 0?qe.defaultMaxListeners:t._maxListeners}qe.prototype.getMaxListeners=function(){return yh(this)};qe.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var f=a[e];if(f===void 0)return!1;if(typeof f=="function")lh(f,this,r);else for(var u=f.length,c=xh(f,u),n=0;n<u;++n)lh(c[n],this,r);return!0};function bh(t,e,r,n){var i,a,s;if(Ls(r),a=t._events,a===void 0?(a=t._events=Object.create(null),t._eventsCount=0):(a.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),s=a[e]),s===void 0)s=a[e]=r,++t._eventsCount;else if(typeof s=="function"?s=a[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),i=yh(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=s.length,n6(o)}return t}qe.prototype.addListener=function(e,r){return bh(this,e,r,!1)};qe.prototype.on=qe.prototype.addListener;qe.prototype.prependListener=function(e,r){return bh(this,e,r,!0)};function i6(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function vh(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=i6.bind(n);return i.listener=r,n.wrapFn=i,i}qe.prototype.once=function(e,r){return Ls(r),this.on(e,vh(this,e,r)),this};qe.prototype.prependOnceListener=function(e,r){return Ls(r),this.prependListener(e,vh(this,e,r)),this};qe.prototype.removeListener=function(e,r){var n,i,a,s,o;if(Ls(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount==0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(a=-1,s=n.length-1;s>=0;s--)if(n[s]===r||n[s].listener===r){o=n[s].listener,a=s;break}if(a<0)return this;a===0?n.shift():a6(n,a),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,o||r)}return this};qe.prototype.off=qe.prototype.removeListener;qe.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var a=Object.keys(n),s;for(i=0;i<a.length;++i)s=a[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function gh(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?s6(i):xh(i,i.length)}qe.prototype.listeners=function(e){return gh(this,e,!0)};qe.prototype.rawListeners=function(e){return gh(this,e,!1)};qe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):mh.call(t,e)};qe.prototype.listenerCount=mh;function mh(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}qe.prototype.eventNames=function(){return this._eventsCount>0?Ns(this._events):[]};function xh(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function a6(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function s6(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function o6(t,e){return new Promise(function(r,n){function i(s){t.removeListener(e,a),n(s)}function a(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}wh(t,e,a,{once:!0}),e!=="error"&&f6(t,i,{once:!0})})}function f6(t,e,r){typeof t.on=="function"&&wh(t,"error",e,r)}function wh(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(a){n.once&&t.removeEventListener(e,i),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var ke=T((lB,Sh)=>{"use strict";function Eh(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function u6(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Eh(t,r)}catch(n){r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),Eh(new i,r)}}Sh.exports=u6});var Ah=T((dB,_h)=>{"use strict";_h.exports=c6;function c6(t,e){for(var r=new Array(arguments.length-1),n=0,i=2,a=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(o,f){r[n]=function(c){if(a)if(a=!1,c)f(c);else{for(var l=new Array(arguments.length-1),y=0;y<l.length;)l[y++]=arguments[y];o.apply(null,l)}};try{t.apply(e||null,r)}catch(u){a&&(a=!1,f(u))}})}});var Th=T(Ch=>{"use strict";var Os=Ch;Os.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Mi=new Array(64),Bh=new Array(123);for(_r=0;_r<64;)Bh[Mi[_r]=_r<26?_r+65:_r<52?_r+71:_r<62?_r-4:_r-59|43]=_r++;var _r;Os.encode=function(e,r,n){for(var i=null,a=[],s=0,o=0,f;r<n;){var u=e[r++];switch(o){case 0:a[s++]=Mi[u>>2],f=(u&3)<<4,o=1;break;case 1:a[s++]=Mi[f|u>>4],f=(u&15)<<2,o=2;break;case 2:a[s++]=Mi[f|u>>6],a[s++]=Mi[u&63],o=0;break}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return o&&(a[s++]=Mi[f],a[s++]=61,o===1&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var Ih="invalid encoding";Os.decode=function(e,r,n){for(var i=n,a=0,s,o=0;o<e.length;){var f=e.charCodeAt(o++);if(f===61&&a>1)break;if((f=Bh[f])===void 0)throw Error(Ih);switch(a){case 0:s=f,a=1;break;case 1:r[n++]=s<<2|(f&48)>>4,s=f,a=2;break;case 2:r[n++]=(s&15)<<4|(f&60)>>2,s=f,a=3;break;case 3:r[n++]=(s&3)<<6|f,a=0;break}}if(a===1)throw Error(Ih);return n-i};Os.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var Mh=T((yB,Ph)=>{"use strict";Ph.exports=Ks;function Ks(){this._listeners={}}Ks.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};Ks.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};Ks.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var Oh=T((bB,Dh)=>{"use strict";Dh.exports=Rh(Rh);function Rh(t){return typeof Float32Array!="undefined"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function i(f,u,c){e[0]=f,u[c]=r[0],u[c+1]=r[1],u[c+2]=r[2],u[c+3]=r[3]}function a(f,u,c){e[0]=f,u[c]=r[3],u[c+1]=r[2],u[c+2]=r[1],u[c+3]=r[0]}t.writeFloatLE=n?i:a,t.writeFloatBE=n?a:i;function s(f,u){return r[0]=f[u],r[1]=f[u+1],r[2]=f[u+2],r[3]=f[u+3],e[0]}function o(f,u){return r[3]=f[u],r[2]=f[u+1],r[1]=f[u+2],r[0]=f[u+3],e[0]}t.readFloatLE=n?s:o,t.readFloatBE=n?o:s}():function(){function e(n,i,a,s){var o=i<0?1:0;if(o&&(i=-i),i===0)n(1/i>0?0:2147483648,a,s);else if(isNaN(i))n(2143289344,a,s);else if(i>34028234663852886e22)n((o<<31|2139095040)>>>0,a,s);else if(i<11754943508222875e-54)n((o<<31|Math.round(i/1401298464324817e-60))>>>0,a,s);else{var f=Math.floor(Math.log(i)/Math.LN2),u=Math.round(i*Math.pow(2,-f)*8388608)&8388607;n((o<<31|f+127<<23|u)>>>0,a,s)}}t.writeFloatLE=e.bind(null,qh),t.writeFloatBE=e.bind(null,kh);function r(n,i,a){var s=n(i,a),o=(s>>31)*2+1,f=s>>>23&255,u=s&8388607;return f===255?u?NaN:o*(1/0):f===0?o*1401298464324817e-60*u:o*Math.pow(2,f-150)*(u+8388608)}t.readFloatLE=r.bind(null,Nh),t.readFloatBE=r.bind(null,Lh)}(),typeof Float64Array!="undefined"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function i(f,u,c){e[0]=f,u[c]=r[0],u[c+1]=r[1],u[c+2]=r[2],u[c+3]=r[3],u[c+4]=r[4],u[c+5]=r[5],u[c+6]=r[6],u[c+7]=r[7]}function a(f,u,c){e[0]=f,u[c]=r[7],u[c+1]=r[6],u[c+2]=r[5],u[c+3]=r[4],u[c+4]=r[3],u[c+5]=r[2],u[c+6]=r[1],u[c+7]=r[0]}t.writeDoubleLE=n?i:a,t.writeDoubleBE=n?a:i;function s(f,u){return r[0]=f[u],r[1]=f[u+1],r[2]=f[u+2],r[3]=f[u+3],r[4]=f[u+4],r[5]=f[u+5],r[6]=f[u+6],r[7]=f[u+7],e[0]}function o(f,u){return r[7]=f[u],r[6]=f[u+1],r[5]=f[u+2],r[4]=f[u+3],r[3]=f[u+4],r[2]=f[u+5],r[1]=f[u+6],r[0]=f[u+7],e[0]}t.readDoubleLE=n?s:o,t.readDoubleBE=n?o:s}():function(){function e(n,i,a,s,o,f){var u=s<0?1:0;if(u&&(s=-s),s===0)n(0,o,f+i),n(1/s>0?0:2147483648,o,f+a);else if(isNaN(s))n(0,o,f+i),n(2146959360,o,f+a);else if(s>17976931348623157e292)n(0,o,f+i),n((u<<31|2146435072)>>>0,o,f+a);else{var c;if(s<22250738585072014e-324)c=s/5e-324,n(c>>>0,o,f+i),n((u<<31|c/4294967296)>>>0,o,f+a);else{var l=Math.floor(Math.log(s)/Math.LN2);l===1024&&(l=1023),c=s*Math.pow(2,-l),n(c*4503599627370496>>>0,o,f+i),n((u<<31|l+1023<<20|c*1048576&1048575)>>>0,o,f+a)}}}t.writeDoubleLE=e.bind(null,qh,0,4),t.writeDoubleBE=e.bind(null,kh,4,0);function r(n,i,a,s,o){var f=n(s,o+i),u=n(s,o+a),c=(u>>31)*2+1,l=u>>>20&2047,y=4294967296*(u&1048575)+f;return l===2047?y?NaN:c*(1/0):l===0?c*5e-324*y:c*Math.pow(2,l-1075)*(y+4503599627370496)}t.readDoubleLE=r.bind(null,Nh,0,4),t.readDoubleBE=r.bind(null,Lh,4,0)}(),t}function qh(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function kh(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function Nh(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function Lh(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var Kh=T((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var Uh=T(Fh=>{"use strict";var t0=Fh;t0.length=function(e){for(var r=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)==55296&&(e.charCodeAt(i+1)&64512)==56320?(++i,r+=4):r+=3;return r};t0.read=function(e,r,n){var i=n-r;if(i<1)return"";for(var a=null,s=[],o=0,f;r<n;)f=e[r++],f<128?s[o++]=f:f>191&&f<224?s[o++]=(f&31)<<6|e[r++]&63:f>239&&f<365?(f=((f&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,s[o++]=55296+(f>>10),s[o++]=56320+(f&1023)):s[o++]=(f&15)<<12|(e[r++]&63)<<6|e[r++]&63,o>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,s)),o=0);return a?(o&&a.push(String.fromCharCode.apply(String,s.slice(0,o))),a.join("")):String.fromCharCode.apply(String,s.slice(0,o))};t0.write=function(e,r,n){for(var i=n,a,s,o=0;o<e.length;++o)a=e.charCodeAt(o),a<128?r[n++]=a:a<2048?(r[n++]=a>>6|192,r[n++]=a&63|128):(a&64512)==55296&&((s=e.charCodeAt(o+1))&64512)==56320?(a=65536+((a&1023)<<10)+(s&1023),++o,r[n++]=a>>18|240,r[n++]=a>>12&63|128,r[n++]=a>>6&63|128,r[n++]=a&63|128):(r[n++]=a>>12|224,r[n++]=a>>6&63|128,r[n++]=a&63|128);return n-i}});var Vh=T((gB,zh)=>{"use strict";zh.exports=h6;function h6(t,e,r){var n=r||8192,i=n>>>1,a=null,s=n;return function(f){if(f<1||f>i)return t(f);s+f>n&&(a=t(n),s=0);var u=e.call(a,s,s+=f);return s&7&&(s=(s|7)+1),u}}});var jh=T((mB,Hh)=>{"use strict";Hh.exports=Ct;var Na=Pn();function Ct(t,e){this.lo=t>>>0,this.hi=e>>>0}var ni=Ct.zero=new Ct(0,0);ni.toNumber=function(){return 0};ni.zzEncode=ni.zzDecode=function(){return this};ni.length=function(){return 1};var l6=Ct.zeroHash="\0\0\0\0\0\0\0\0";Ct.fromNumber=function(e){if(e===0)return ni;var r=e<0;r&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new Ct(n,i)};Ct.from=function(e){if(typeof e=="number")return Ct.fromNumber(e);if(Na.isString(e))if(Na.Long)e=Na.Long.fromString(e);else return Ct.fromNumber(parseInt(e,10));return e.low||e.high?new Ct(e.low>>>0,e.high>>>0):ni};Ct.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};Ct.prototype.toLong=function(e){return Na.Long?new Na.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var Tn=String.prototype.charCodeAt;Ct.fromHash=function(e){return e===l6?ni:new Ct((Tn.call(e,0)|Tn.call(e,1)<<8|Tn.call(e,2)<<16|Tn.call(e,3)<<24)>>>0,(Tn.call(e,4)|Tn.call(e,5)<<8|Tn.call(e,6)<<16|Tn.call(e,7)<<24)>>>0)};Ct.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Ct.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};Ct.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};Ct.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var Pn=T(r0=>{"use strict";var re=r0;re.asPromise=Ah();re.base64=Th();re.EventEmitter=Mh();re.float=Oh();re.inquire=Kh();re.utf8=Uh();re.pool=Vh();re.LongBits=jh();re.isNode=Boolean(typeof globalThis!="undefined"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);re.global=re.isNode&&globalThis||typeof window!="undefined"&&window||typeof self!="undefined"&&self||r0;re.emptyArray=Object.freeze?Object.freeze([]):[];re.emptyObject=Object.freeze?Object.freeze({}):{};re.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};re.isString=function(e){return typeof e=="string"||e instanceof String};re.isObject=function(e){return e&&typeof e=="object"};re.isset=re.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};re.Buffer=function(){try{var t=re.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}();re._Buffer_from=null;re._Buffer_allocUnsafe=null;re.newBuffer=function(e){return typeof e=="number"?re.Buffer?re._Buffer_allocUnsafe(e):new re.Array(e):re.Buffer?re._Buffer_from(e):typeof Uint8Array=="undefined"?e:new Uint8Array(e)};re.Array=typeof Uint8Array!="undefined"?Uint8Array:Array;re.Long=re.global.dcodeIO&&re.global.dcodeIO.Long||re.global.Long||re.inquire("long");re.key2Re=/^true|false|0|1$/;re.key32Re=/^-?(?:0|[1-9][0-9]*)$/;re.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;re.longToHash=function(e){return e?re.LongBits.from(e).toHash():re.LongBits.zeroHash};re.longFromHash=function(e,r){var n=re.LongBits.fromHash(e);return re.Long?re.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))};function Gh(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)(t[n[i]]===void 0||!r)&&(t[n[i]]=e[n[i]]);return t}re.merge=Gh;re.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function $h(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&Gh(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}re.newError=$h;re.ProtocolError=$h("ProtocolError");re.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var i=Object.keys(this),a=i.length-1;a>-1;--a)if(r[i[a]]===1&&this[i[a]]!==void 0&&this[i[a]]!==null)return i[a]}};re.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}};re.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};re._configure=function(){var t=re.Buffer;if(!t){re._Buffer_from=re._Buffer_allocUnsafe=null;return}re._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},re._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var u0=T((wB,Jh)=>{"use strict";Jh.exports=_e;var sr=Pn(),n0,Fs=sr.LongBits,Yh=sr.base64,Wh=sr.utf8;function La(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function i0(){}function d6(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function _e(){this.len=0,this.head=new La(i0,0,0),this.tail=this.head,this.states=null}var Qh=function(){return sr.Buffer?function(){return(_e.create=function(){return new n0})()}:function(){return new _e}};_e.create=Qh();_e.alloc=function(e){return new sr.Array(e)};sr.Array!==Array&&(_e.alloc=sr.pool(_e.alloc,sr.Array.prototype.subarray));_e.prototype._push=function(e,r,n){return this.tail=this.tail.next=new La(e,r,n),this.len+=r,this};function a0(t,e,r){e[r]=t&255}function p6(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function s0(t,e){this.len=t,this.next=void 0,this.val=e}s0.prototype=Object.create(La.prototype);s0.prototype.fn=p6;_e.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new s0((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};_e.prototype.int32=function(e){return e<0?this._push(o0,10,Fs.fromNumber(e)):this.uint32(e)};_e.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function o0(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}_e.prototype.uint64=function(e){var r=Fs.from(e);return this._push(o0,r.length(),r)};_e.prototype.int64=_e.prototype.uint64;_e.prototype.sint64=function(e){var r=Fs.from(e).zzEncode();return this._push(o0,r.length(),r)};_e.prototype.bool=function(e){return this._push(a0,1,e?1:0)};function f0(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}_e.prototype.fixed32=function(e){return this._push(f0,4,e>>>0)};_e.prototype.sfixed32=_e.prototype.fixed32;_e.prototype.fixed64=function(e){var r=Fs.from(e);return this._push(f0,4,r.lo)._push(f0,4,r.hi)};_e.prototype.sfixed64=_e.prototype.fixed64;_e.prototype.float=function(e){return this._push(sr.float.writeFloatLE,4,e)};_e.prototype.double=function(e){return this._push(sr.float.writeDoubleLE,8,e)};var y6=sr.Array.prototype.set?function(e,r,n){r.set(e,n)}:function(e,r,n){for(var i=0;i<e.length;++i)r[n+i]=e[i]};_e.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(a0,1,0);if(sr.isString(e)){var n=_e.alloc(r=Yh.length(e));Yh.decode(e,n,0),e=n}return this.uint32(r)._push(y6,r,e)};_e.prototype.string=function(e){var r=Wh.length(e);return r?this.uint32(r)._push(Wh.write,r,e):this._push(a0,1,0)};_e.prototype.fork=function(){return this.states=new d6(this),this.head=this.tail=new La(i0,0,0),this.len=0,this};_e.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new La(i0,0,0),this.len=0),this};_e.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};_e.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};_e._configure=function(t){n0=t,_e.create=Qh(),n0._configure()}});var el=T((EB,Xh)=>{"use strict";Xh.exports=Dr;var Zh=u0();(Dr.prototype=Object.create(Zh.prototype)).constructor=Dr;var Mn=Pn();function Dr(){Zh.call(this)}Dr._configure=function(){Dr.alloc=Mn._Buffer_allocUnsafe,Dr.writeBytesBuffer=Mn.Buffer&&Mn.Buffer.prototype instanceof Uint8Array&&Mn.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var i=0;i<e.length;)r[n++]=e[i++]}};Dr.prototype.bytes=function(e){Mn.isString(e)&&(e=Mn._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(Dr.writeBytesBuffer,r,e),this};function b6(t,e,r){t.length<40?Mn.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}Dr.prototype.string=function(e){var r=Mn.Buffer.byteLength(e);return this.uint32(r),r&&this._push(b6,r,e),this};Dr._configure()});var l0=T((SB,al)=>{"use strict";al.exports=Ze;var Or=Pn(),c0,tl=Or.LongBits,v6=Or.utf8;function Ar(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Ze(t){this.buf=t,this.pos=0,this.len=t.length}var rl=typeof Uint8Array!="undefined"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Ze(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Ze(e);throw Error("illegal buffer")},nl=function(){return Or.Buffer?function(r){return(Ze.create=function(i){return Or.Buffer.isBuffer(i)?new c0(i):rl(i)})(r)}:rl};Ze.create=nl();Ze.prototype._slice=Or.Array.prototype.subarray||Or.Array.prototype.slice;Ze.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Ar(this,10);return e}}();Ze.prototype.int32=function(){return this.uint32()|0};Ze.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function h0(){var t=new tl(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw Ar(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw Ar(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Ze.prototype.bool=function(){return this.uint32()!==0};function Us(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Ze.prototype.fixed32=function(){if(this.pos+4>this.len)throw Ar(this,4);return Us(this.buf,this.pos+=4)};Ze.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Ar(this,4);return Us(this.buf,this.pos+=4)|0};function il(){if(this.pos+8>this.len)throw Ar(this,8);return new tl(Us(this.buf,this.pos+=4),Us(this.buf,this.pos+=4))}Ze.prototype.float=function(){if(this.pos+4>this.len)throw Ar(this,4);var e=Or.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Ze.prototype.double=function(){if(this.pos+8>this.len)throw Ar(this,4);var e=Or.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Ze.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw Ar(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};Ze.prototype.string=function(){var e=this.bytes();return v6.read(e,0,e.length)};Ze.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Ar(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Ar(this);while(this.buf[this.pos++]&128);return this};Ze.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!=4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Ze._configure=function(t){c0=t,Ze.create=nl(),c0._configure();var e=Or.Long?"toLong":"toNumber";Or.merge(Ze.prototype,{int64:function(){return h0.call(this)[e](!1)},uint64:function(){return h0.call(this)[e](!0)},sint64:function(){return h0.call(this).zzDecode()[e](!1)},fixed64:function(){return il.call(this)[e](!0)},sfixed64:function(){return il.call(this)[e](!1)}})}});var ul=T((_B,fl)=>{"use strict";fl.exports=ii;var sl=l0();(ii.prototype=Object.create(sl.prototype)).constructor=ii;var ol=Pn();function ii(t){sl.call(this,t)}ii._configure=function(){ol.Buffer&&(ii.prototype._slice=ol.Buffer.prototype.slice)};ii.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};ii._configure()});var hl=T((AB,cl)=>{"use strict";cl.exports=Da;var d0=Pn();(Da.prototype=Object.create(d0.EventEmitter.prototype)).constructor=Da;function Da(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");d0.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}Da.prototype.rpcCall=function t(e,r,n,i,a){if(!i)throw TypeError("request must be specified");var s=this;if(!a)return d0.asPromise(t,s,e,r,n,i);if(!s.rpcImpl){setTimeout(function(){a(Error("already ended"))},0);return}try{return s.rpcImpl(e,r[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(f,u){if(f)return s.emit("error",f,e),a(f);if(u===null){s.end(!0);return}if(!(u instanceof n))try{u=n[s.responseDelimited?"decodeDelimited":"decode"](u)}catch(c){return s.emit("error",c,e),a(c)}return s.emit("data",u,e),a(null,u)})}catch(o){s.emit("error",o,e),setTimeout(function(){a(o)},0);return}};Da.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var dl=T(ll=>{"use strict";var g6=ll;g6.Service=hl()});var yl=T((IB,pl)=>{"use strict";pl.exports={}});var gl=T(vl=>{"use strict";var Qt=vl;Qt.build="minimal";Qt.Writer=u0();Qt.BufferWriter=el();Qt.Reader=l0();Qt.BufferReader=ul();Qt.util=Pn();Qt.rpc=dl();Qt.roots=yl();Qt.configure=bl;function bl(){Qt.util._configure(),Qt.Writer._configure(Qt.BufferWriter),Qt.Reader._configure(Qt.BufferReader)}bl()});var Oa=T((TB,ml)=>{"use strict";ml.exports=gl()});var El=T((PB,wl)=>{"use strict";var Ri=Oa(),xl=Ri.Reader,m6=Ri.Writer,or=Ri.util,Ka=Ri.roots["libp2p-record"]||(Ri.roots["libp2p-record"]={});Ka.Record=function(){function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.key=or.newBuffer([]),t.prototype.value=or.newBuffer([]),t.prototype.timeReceived="",t.encode=function(r,n){return n||(n=m6.create()),r.key!=null&&Object.hasOwnProperty.call(r,"key")&&n.uint32(10).bytes(r.key),r.value!=null&&Object.hasOwnProperty.call(r,"value")&&n.uint32(18).bytes(r.value),r.timeReceived!=null&&Object.hasOwnProperty.call(r,"timeReceived")&&n.uint32(42).string(r.timeReceived),n},t.decode=function(r,n){r instanceof xl||(r=xl.create(r));for(var i=n===void 0?r.len:r.pos+n,a=new Ka.Record;r.pos<i;){var s=r.uint32();switch(s>>>3){case 1:a.key=r.bytes();break;case 2:a.value=r.bytes();break;case 5:a.timeReceived=r.string();break;default:r.skipType(s&7);break}}return a},t.fromObject=function(r){if(r instanceof Ka.Record)return r;var n=new Ka.Record;return r.key!=null&&(typeof r.key=="string"?or.base64.decode(r.key,n.key=or.newBuffer(or.base64.length(r.key)),0):r.key.length&&(n.key=r.key)),r.value!=null&&(typeof r.value=="string"?or.base64.decode(r.value,n.value=or.newBuffer(or.base64.length(r.value)),0):r.value.length&&(n.value=r.value)),r.timeReceived!=null&&(n.timeReceived=String(r.timeReceived)),n},t.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.key="":(i.key=[],n.bytes!==Array&&(i.key=or.newBuffer(i.key))),n.bytes===String?i.value="":(i.value=[],n.bytes!==Array&&(i.value=or.newBuffer(i.value))),i.timeReceived=""),r.key!=null&&r.hasOwnProperty("key")&&(i.key=n.bytes===String?or.base64.encode(r.key,0,r.key.length):n.bytes===Array?Array.prototype.slice.call(r.key):r.key),r.value!=null&&r.hasOwnProperty("value")&&(i.value=n.bytes===String?or.base64.encode(r.value,0,r.value.length):n.bytes===Array?Array.prototype.slice.call(r.value):r.value),r.timeReceived!=null&&r.hasOwnProperty("timeReceived")&&(i.timeReceived=r.timeReceived),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ri.util.toJSONOptions)},t}();wl.exports=Ka});var Sl=T((MB,p0)=>{"use strict";p0.exports.toRFC3339=t=>{let e=t.getUTCFullYear(),r=String(t.getUTCMonth()+1).padStart(2,"0"),n=String(t.getUTCDate()).padStart(2,"0"),i=String(t.getUTCHours()).padStart(2,"0"),a=String(t.getUTCMinutes()).padStart(2,"0"),s=String(t.getUTCSeconds()).padStart(2,"0"),f=t.getUTCMilliseconds()*1e3*1e3;return`${e}-${r}-${n}T${i}:${a}:${s}.${f}Z`};p0.exports.parseRFC3339=t=>{let e=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(t).trim().match(e);if(!r)throw new Error("Invalid format");let n=parseInt(r[1],10),i=parseInt(r[2],10)-1,a=parseInt(r[3],10),s=parseInt(r[4],10),o=parseInt(r[5],10),f=parseInt(r[6],10),u=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,i,a,s,o,f,u))}});var Bl=T((RB,Al)=>{"use strict";var{Record:y0}=El(),_l=Sl(),Fa=class{constructor(e,r,n){if(!(e instanceof Uint8Array))throw new Error("key must be a Uint8Array");if(!(r instanceof Uint8Array))throw new Error("value must be a Uint8Array");this.key=e,this.value=r,this.timeReceived=n}serialize(){return y0.encode(this.prepareSerialize()).finish()}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:this.timeReceived&&_l.toRFC3339(this.timeReceived)}}static deserialize(e){let r=y0.decode(e);return Fa.fromDeserialized(y0.toObject(r,{defaults:!1,arrays:!0,longs:Number,objects:!1}))}static fromDeserialized(e){let r;return e.timeReceived&&(r=_l.parseRFC3339(e.timeReceived)),new Fa(e.key,e.value,r)}};Al.exports=Fa});function x6(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var a=t.charAt(i),s=a.charCodeAt(0);if(r[s]!==255)throw new TypeError(a+" is ambiguous");r[s]=i}var o=t.length,f=t.charAt(0),u=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function l(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var b=0,_=0,A=0,M=v.length;A!==M&&v[A]===0;)A++,b++;for(var q=(M-A)*c+1>>>0,z=new Uint8Array(q);A!==M;){for(var O=v[A],U=0,$=q-1;(O!==0||U<_)&&$!==-1;$--,U++)O+=256*z[$]>>>0,z[$]=O%o>>>0,O=O/o>>>0;if(O!==0)throw new Error("Non-zero carry");_=U,A++}for(var H=q-_;H!==q&&z[H]===0;)H++;for(var X=f.repeat(b);H<q;++H)X+=t.charAt(z[H]);return X}function y(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var b=0;if(v[b]!==" "){for(var _=0,A=0;v[b]===f;)_++,b++;for(var M=(v.length-b)*u+1>>>0,q=new Uint8Array(M);v[b];){var z=r[v.charCodeAt(b)];if(z===255)return;for(var O=0,U=M-1;(z!==0||O<A)&&U!==-1;U--,O++)z+=o*q[U]>>>0,q[U]=z%256>>>0,z=z/256>>>0;if(z!==0)throw new Error("Non-zero carry");A=O,b++}if(v[b]!==" "){for(var $=M-A;$!==M&&q[$]===0;)$++;for(var H=new Uint8Array(_+(M-$)),X=_;$!==M;)H[X++]=q[$++];return H}}}function x(v){var b=y(v);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:y,decode:x}}var w6,E6,Il,Cl=Te(()=>{w6=x6,E6=w6,Il=E6});var kB,Tl,pn,Pl,Ml,Rn=Te(()=>{kB=new Uint8Array(0),Tl=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},pn=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Pl=t=>new TextEncoder().encode(t),Ml=t=>new TextDecoder().decode(t)});var ql,kl,zs,Nl,Vs,qn,S6,_6,Ye,Kr=Te(()=>{Cl();Rn();ql=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},kl=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseDecode=n}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){let r={[this.prefix]:this,...e.decoders||{[e.prefix]:e}};return new zs(r)}},zs=class{constructor(e){this.decoders=e}or(e){let r=e.decoders||{[e.prefix]:e};return new zs({...this.decoders,...r})}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Nl=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new ql(e,r,n),this.decoder=new kl(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Vs=({name:t,prefix:e,encode:r,decode:n})=>new Nl(t,e,r,n),qn=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=Il(r,e);return Vs({prefix:t,name:e,encode:n,decode:a=>pn(i(a))})},S6=(t,e,r,n)=>{let i={};for(let c=0;c<e.length;++c)i[e[c]]=c;let a=t.length;for(;t[a-1]==="=";)--a;let s=new Uint8Array(a*r/8|0),o=0,f=0,u=0;for(let c=0;c<a;++c){let l=i[t[c]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);f=f<<r|l,o+=r,o>=8&&(o-=8,s[u++]=255&f>>o)}if(o>=r||255&f<<8-o)throw new SyntaxError("Unexpected end of data");return s},_6=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,a="",s=0,o=0;for(let f=0;f<t.length;++f)for(o=o<<8|t[f],s+=8;s>r;)s-=r,a+=e[i&o>>s];if(s&&(a+=e[i&o<<r-s]),n)for(;a.length*r&7;)a+="=";return a},Ye=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Vs({prefix:e,name:t,encode(i){return _6(i,n,r)},decode(i){return S6(i,n,r,t)}})});var b0={};It(b0,{identity:()=>A6});var A6,Ll=Te(()=>{Kr();Rn();A6=Vs({prefix:"\0",name:"identity",encode:t=>Ml(t),decode:t=>Pl(t)})});var v0={};It(v0,{base2:()=>B6});var B6,Dl=Te(()=>{Kr();B6=Ye({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var g0={};It(g0,{base8:()=>I6});var I6,Ol=Te(()=>{Kr();I6=Ye({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var m0={};It(m0,{base10:()=>C6});var C6,Kl=Te(()=>{Kr();C6=qn({prefix:"9",name:"base10",alphabet:"0123456789"})});var Hs={};It(Hs,{base16:()=>T6,base16upper:()=>P6});var T6,P6,x0=Te(()=>{Kr();T6=Ye({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),P6=Ye({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var ki={};It(ki,{base32:()=>qi,base32hex:()=>k6,base32hexpad:()=>L6,base32hexpadupper:()=>D6,base32hexupper:()=>N6,base32pad:()=>R6,base32padupper:()=>q6,base32upper:()=>M6,base32z:()=>O6});var qi,M6,R6,q6,k6,N6,L6,D6,O6,Ni=Te(()=>{Kr();qi=Ye({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),M6=Ye({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),R6=Ye({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),q6=Ye({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),k6=Ye({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),N6=Ye({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),L6=Ye({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),D6=Ye({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),O6=Ye({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var js={};It(js,{base36:()=>K6,base36upper:()=>F6});var K6,F6,w0=Te(()=>{Kr();K6=qn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),F6=qn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var Ur={};It(Ur,{base58btc:()=>Fr,base58flickr:()=>U6});var Fr,U6,zr=Te(()=>{Kr();Fr=qn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),U6=qn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var Li={};It(Li,{base64:()=>z6,base64pad:()=>V6,base64url:()=>H6,base64urlpad:()=>j6});var z6,V6,H6,j6,Ua=Te(()=>{Kr();z6=Ye({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),V6=Ye({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),H6=Ye({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),j6=Ye({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});function Ul(t,e,r){e=e||[],r=r||0;for(var n=r;t>=W6;)e[r++]=t&255|Fl,t/=128;for(;t&Y6;)e[r++]=t&255|Fl,t>>>=7;return e[r]=t|0,Ul.bytes=r-n+1,e}function E0(t,e){var r=0,e=e||0,n=0,i=e,a,s=t.length;do{if(i>=s)throw E0.bytes=0,new RangeError("Could not decode varint");a=t[i++],r+=n<28?(a&zl)<<n:(a&zl)*Math.pow(2,n),n+=7}while(a>=J6);return E0.bytes=i-e,r}var G6,Fl,$6,Y6,W6,Q6,J6,zl,Z6,X6,e8,t8,r8,n8,i8,a8,s8,o8,f8,u8,za,Vl=Te(()=>{G6=Ul,Fl=128,$6=127,Y6=~$6,W6=Math.pow(2,31);Q6=E0,J6=128,zl=127;Z6=Math.pow(2,7),X6=Math.pow(2,14),e8=Math.pow(2,21),t8=Math.pow(2,28),r8=Math.pow(2,35),n8=Math.pow(2,42),i8=Math.pow(2,49),a8=Math.pow(2,56),s8=Math.pow(2,63),o8=function(t){return t<Z6?1:t<X6?2:t<e8?3:t<t8?4:t<r8?5:t<n8?6:t<i8?7:t<a8?8:t<s8?9:10},f8={encode:G6,decode:Q6,encodingLength:o8},u8=f8,za=u8});var Va,Di,Oi,Gs=Te(()=>{Vl();Va=t=>[za.decode(t),za.decode.bytes],Di=(t,e,r=0)=>(za.encode(t,e,r),e),Oi=t=>za.encodingLength(t)});var ja={};It(ja,{Digest:()=>Ki,create:()=>Ha,decode:()=>S0,equals:()=>_0});var Ha,S0,_0,Ki,Fi=Te(()=>{Rn();Gs();Ha=(t,e)=>{let r=e.byteLength,n=Oi(t),i=n+Oi(r),a=new Uint8Array(i+r);return Di(t,a,0),Di(r,a,n),a.set(e,i),new Ki(t,r,e,a)},S0=t=>{let e=pn(t),[r,n]=Va(e),[i,a]=Va(e.subarray(n)),s=e.subarray(n+a);if(s.byteLength!==i)throw new Error("Incorrect length");return new Ki(r,i,s,e)},_0=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&Tl(t.bytes,e.bytes),Ki=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}});var Ga,jl,$s=Te(()=>{Fi();Ga=({name:t,code:e,encode:r})=>new jl(t,e,r),jl=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}async digest(e){if(e instanceof Uint8Array){let r=await this.encode(e);return Ha(this.code,r)}else throw Error("Unknown type, must be binary type")}}});var Vr={};It(Vr,{sha256:()=>c8,sha512:()=>h8});var $l,c8,h8,yn=Te(()=>{$s();$l=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),c8=Ga({name:"sha2-256",code:18,encode:$l("SHA-256")}),h8=Ga({name:"sha2-512",code:19,encode:$l("SHA-512")})});var $a={};It($a,{identity:()=>l8});var l8,Ys=Te(()=>{$s();Rn();l8=Ga({name:"identity",code:0,encode:t=>pn(t)})});var Yl=Te(()=>{Rn()});var Wl=Te(()=>{});var Ui={};It(Ui,{CID:()=>At});var At,y8,b8,v8,Ya,g8,Ql,Jl,Ws,Qs,m8,x8,w8,ai=Te(()=>{Gs();Fi();zr();Ni();Rn();At=class{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Qs,byteLength:Qs,code:Ws,version:Ws,multihash:Ws,bytes:Ws,_baseCache:Qs,asCID:Qs})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==Ya)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==g8)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return At.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Ha(e,r);return At.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&_0(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:i}=this;switch(n){case 0:return b8(r,i,e||Fr.encoder);default:return v8(r,i,e||qi.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return x8(/^0\.0/,w8),!!(e&&(e[Jl]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof At)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:i,bytes:a}=e;return new At(r,n,i,a||Ql(r,n,i.bytes))}else if(e!=null&&e[Jl]===!0){let{version:r,multihash:n,code:i}=e,a=S0(n);return At.create(r,i,a)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==Ya)throw new Error(`Version 0 CID must use dag-pb (code: ${Ya}) block encoding`);return new At(e,r,n,n.bytes)}case 1:{let i=Ql(e,r,n.bytes);return new At(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return At.create(0,Ya,e)}static createV1(e,r){return At.create(1,e,r)}static decode(e){let[r,n]=At.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=At.inspectBytes(e),n=r.size-r.multihashSize,i=pn(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let a=i.subarray(r.multihashSize-r.digestSize),s=new Ki(r.multihashCode,r.digestSize,a,i);return[r.version===0?At.createV0(s):At.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[l,y]=Va(e.subarray(r));return r+=y,l},i=n(),a=Ya;if(i===18?(i=0,r=0):i===1&&(a=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,o=n(),f=n(),u=r+f,c=u-s;return{version:i,codec:a,multihashCode:o,digestSize:f,multihashSize:c,size:u}}static parse(e,r){let[n,i]=y8(e,r),a=At.decode(i);return a._baseCache.set(n,e),a}},y8=(t,e)=>{switch(t[0]){case"Q":{let r=e||Fr;return[Fr.prefix,r.decode(`${Fr.prefix}${t}`)]}case Fr.prefix:{let r=e||Fr;return[Fr.prefix,r.decode(t)]}case qi.prefix:{let r=e||qi;return[qi.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},b8=(t,e,r)=>{let{prefix:n}=r;if(n!==Fr.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let a=r.encode(t).slice(1);return e.set(n,a),a}else return i},v8=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let a=r.encode(t);return e.set(n,a),a}else return i},Ya=112,g8=18,Ql=(t,e,r)=>{let n=Oi(t),i=n+Oi(e),a=new Uint8Array(i+r.byteLength);return Di(t,a,0),Di(e,a,n),a.set(r,i),a},Jl=Symbol.for("@ipld/js-cid/CID"),Ws={writable:!1,configurable:!1,enumerable:!0},Qs={writable:!1,enumerable:!1,configurable:!1},m8="0.0.0-dev",x8=(t,e)=>{if(t.test(m8))console.warn(e);else throw new Error(e)},w8=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var Zl=Te(()=>{ai();Gs();Rn();$s();Fi()});var A0,hI,Xl=Te(()=>{Ll();Dl();Ol();Kl();x0();Ni();w0();zr();Ua();yn();Ys();Yl();Wl();Zl();A0={...b0,...v0,...g0,...m0,...Hs,...ki,...js,...Ur,...Li},hI={...Vr,...$a}});function ed(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var td,B0,E8,Js,I0=Te(()=>{Xl();td=ed("utf8","u",t=>{let e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),B0=ed("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),E8={utf8:td,"utf-8":td,hex:A0.base16,latin1:B0,ascii:B0,binary:B0,...A0},Js=E8});var Xe={};It(Xe,{toString:()=>S8});function S8(t,e="utf8"){let r=Js[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var et=Te(()=>{I0()});var fr={};It(fr,{equals:()=>_8});function _8(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var ur=Te(()=>{});var nd=T((bI,rd)=>{"use strict";var{sha256:A8}=(yn(),Vr),Zs=ke(),{toString:B8}=(et(),Xe),{equals:I8}=(ur(),fr),C8=async(t,e)=>{if(!(t instanceof Uint8Array))throw Zs(new Error('"key" must be a Uint8Array'),"ERR_INVALID_RECORD_KEY_NOT_BUFFER");if(t.byteLength<5)throw Zs(new Error("invalid public key record"),"ERR_INVALID_RECORD_KEY_TOO_SHORT");if(B8(t.subarray(0,4))!=="/pk/")throw Zs(new Error("key was not prefixed with /pk/"),"ERR_INVALID_RECORD_KEY_BAD_PREFIX");let n=t.slice(4),i=await A8.digest(e);if(!I8(n,i.bytes))throw Zs(new Error("public key does not match passed in key"),"ERR_INVALID_RECORD_HASH_MISMATCH")};rd.exports={func:C8,sign:!1}});var ad=T((vI,id)=>{"use strict";id.exports={pk:nd()}});var od=T((gI,sd)=>{"use strict";var T8=ke(),{toString:P8}=(et(),Xe),M8=(t,e)=>{let r=e.key,i=P8(r).split("/");if(i.length<3)return;let a=t[i[1].toString()];if(!a){let s="Invalid record keytype";throw T8(new Error(s),"ERR_INVALID_RECORD_KEY_TYPE")}return a.func(r,e.value)};sd.exports={verifyRecord:M8,validators:ad()}});var ud=T((mI,fd)=>{"use strict";var R8=(t,e)=>0;fd.exports=R8});var hd=T((xI,cd)=>{"use strict";cd.exports={pk:ud()}});var dd=T((wI,ld)=>{"use strict";var C0=ke(),{toString:q8}=(et(),Xe),k8=(t,e,r)=>{if(r.length===0){let s="No records given";throw C0(new Error(s),"ERR_NO_RECORDS_RECEIVED")}let i=q8(e).split("/");if(i.length<3){let s="Record key does not have a selector function";throw C0(new Error(s),"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")}let a=t[i[1].toString()];if(!a){let s=`Unrecognized key prefix: ${i[1]}`;throw C0(new Error(s),"ERR_UNRECOGNIZED_KEY_PREFIX")}return a(e,r)};ld.exports={bestRecord:k8,selectors:hd()}});var zi=T((EI,pd)=>{"use strict";pd.exports={Record:Bl(),validator:od(),selection:dd()}});var yd,bd=Te(()=>{yd="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"});var T0={};It(T0,{customAlphabet:()=>N8,customRandom:()=>gd,nanoid:()=>L8,random:()=>vd,urlAlphabet:()=>yd});var vd,gd,N8,L8,P0=Te(()=>{bd();vd=t=>crypto.getRandomValues(new Uint8Array(t)),gd=(t,e,r)=>{let n=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*n*e/t.length);return()=>{let a="";for(;;){let s=r(i),o=i;for(;o--;)if(a+=t[s[o]&n]||"",a.length===e)return a}}},N8=(t,e)=>gd(t,e,vd),L8=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let n=r[t]&63;n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n<63?e+="_":e+="-"}return e}});var cr={};It(cr,{fromString:()=>D8});function D8(t,e="utf8"){let r=Js[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}var hr=Te(()=>{I0()});var M0=T((BI,xd)=>{"use strict";var{nanoid:O8}=(P0(),T0),{toString:K8}=(et(),Xe),{fromString:F8}=(hr(),cr),bn="/",md=new TextEncoder().encode(bn),Xs=md[0],lr=class{constructor(e,r){if(typeof e=="string")this._buf=F8(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(r==null&&(r=!0),r&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Xs)throw new Error("Invalid key")}toString(e="utf8"){return K8(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new lr(e.join(bn))}static random(){return new lr(O8().replace(/-/g,""))}clean(){if((!this._buf||this._buf.byteLength===0)&&(this._buf=md),this._buf[0]!==Xs){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Xs,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Xs;)this._buf=this._buf.subarray(0,-1)}less(e){let r=this.list(),n=e.list();for(let i=0;i<r.length;i++){if(n.length<i+1)return!1;let a=r[i],s=n[i];if(a<s)return!0;if(a>s)return!1}return r.length<n.length}reverse(){return lr.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(bn).slice(1)}type(){return U8(this.baseNamespace())}name(){return z8(this.baseNamespace())}instance(e){return new lr(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(bn)||(e+=bn),e+=this.type(),new lr(e)}parent(){let e=this.list();return e.length===1?new lr(bn):new lr(e.slice(0,-1).join(bn))}child(e){return this.toString()===bn?e:e.toString()===bn?this:new lr(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return lr.withNamespaces([...this.namespaces(),...V8(e.map(r=>r.namespaces()))])}};function U8(t){let e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function z8(t){let e=t.split(":");return e[e.length-1]}function V8(t){return[].concat(...t)}xd.exports=lr});var Ed=T((II,wd)=>{"use strict";var{nanoid:H8}=(P0(),T0),j8=(t=e=>e)=>t(H8());wd.exports=j8});var _d=T((CI,Sd)=>{"use strict";var G8=async t=>{let e=[];for await(let r of t)e.push(r);return e};Sd.exports=G8});var R0=T((TI,Ad)=>{"use strict";var $8=Ed(),Y8=_d(),W8=(t,e)=>async function*(){yield*(await Y8(t)).sort(e)}(),Q8=(t,e)=>{let r=new RegExp("^"+e);return t.replace(r,"")};Ad.exports={sortAll:W8,tmpdir:$8,replaceStartWith:Q8}});var Id=T((PI,Bd)=>{"use strict";var J8=async t=>{for await(let e of t);};Bd.exports=J8});var Td=T((MI,Cd)=>{"use strict";var Z8=async function*(t,e){for await(let r of t)await e(r)&&(yield r)};Cd.exports=Z8});var Md=T((RI,Pd)=>{"use strict";var X8=async function*(t,e){let r=0;if(!(e<1)){for await(let n of t)if(yield n,r++,r===e)return}};Pd.exports=X8});var q0=T((qI,Ld)=>{"use strict";var{sortAll:Rd}=R0(),qd=Id(),Vi=Td(),kd=Md(),Nd=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,r,n){return Promise.reject(new Error(".put is not implemented"))}get(e,r){return Promise.reject(new Error(".get is not implemented"))}has(e,r){return Promise.reject(new Error(".has is not implemented"))}delete(e,r){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,r={}){for await(let{key:n,value:i}of e)await this.put(n,i,r),yield{key:n,value:i}}async*getMany(e,r={}){for await(let n of e)yield this.get(n,r)}async*deleteMany(e,r={}){for await(let n of e)await this.delete(n,r),yield n}batch(){let e=[],r=[];return{put(n,i){e.push({key:n,value:i})},delete(n){r.push(n)},commit:async n=>{await qd(this.putMany(e,n)),e=[],await qd(this.deleteMany(r,n)),r=[]}}}async*_all(e,r){throw new Error("._all is not implemented")}async*_allKeys(e,r){throw new Error("._allKeys is not implemented")}query(e,r){let n=this._all(e,r);if(e.prefix!=null&&(n=Vi(n,i=>i.key.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,a)=>Vi(i,a),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,a)=>Rd(i,a),n)),e.offset!=null){let i=0;n=Vi(n,()=>i++>=e.offset)}return e.limit!=null&&(n=kd(n,e.limit)),n}queryKeys(e,r){let n=this._allKeys(e,r);if(e.prefix!=null&&(n=Vi(n,i=>i.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,a)=>Vi(i,a),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,a)=>Rd(i,a),n)),e.offset!=null){let i=0;n=Vi(n,()=>i++>=e.offset)}return e.limit!=null&&(n=kd(n,e.limit)),n}};Ld.exports=Nd});var k0=T((kI,Dd)=>{"use strict";var Wa=ke();function em(t){return t=t||new Error("Cannot open database"),Wa(t,"ERR_DB_OPEN_FAILED")}function tm(t){return t=t||new Error("Delete failed"),Wa(t,"ERR_DB_DELETE_FAILED")}function rm(t){return t=t||new Error("Write failed"),Wa(t,"ERR_DB_WRITE_FAILED")}function nm(t){return t=t||new Error("Not Found"),Wa(t,"ERR_NOT_FOUND")}function im(t){return t=t||new Error("Aborted"),Wa(t,"ERR_ABORTED")}Dd.exports={dbOpenFailedError:em,dbDeleteFailedError:tm,dbWriteFailedError:rm,notFoundError:nm,abortedError:im}});var Ud=T((NI,Fd)=>{"use strict";var Od=M0(),am=q0(),sm=k0(),Kd=class extends am{constructor(){super();this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,r){this.data[e.toString()]=r}async get(e){if(!await this.has(e))throw sm.notFoundError();return this.data[e.toString()]}async has(e){return this.data[e.toString()]!==void 0}async delete(e){delete this.data[e.toString()]}async*_all(){yield*Object.entries(this.data).map(([e,r])=>({key:new Od(e),value:r}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>new Od(e))}};Fd.exports=Kd});var eo=T((LI,zd)=>{"use strict";var om=M0(),fm=Ud(),um=R0(),cm=k0(),hm=q0();zd.exports={Key:om,MemoryDatastore:fm,utils:um,Errors:cm,Adapter:hm}});var jd=T(to=>{"use strict";to.byteLength=dm;to.toByteArray=ym;to.fromByteArray=gm;var Hr=[],dr=[],lm=typeof Uint8Array!="undefined"?Uint8Array:Array,N0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(si=0,Vd=N0.length;si<Vd;++si)Hr[si]=N0[si],dr[N0.charCodeAt(si)]=si;var si,Vd;dr["-".charCodeAt(0)]=62;dr["_".charCodeAt(0)]=63;function Hd(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function dm(t){var e=Hd(t),r=e[0],n=e[1];return(r+n)*3/4-n}function pm(t,e,r){return(e+r)*3/4-r}function ym(t){var e,r=Hd(t),n=r[0],i=r[1],a=new lm(pm(t,n,i)),s=0,o=i>0?n-4:n,f;for(f=0;f<o;f+=4)e=dr[t.charCodeAt(f)]<<18|dr[t.charCodeAt(f+1)]<<12|dr[t.charCodeAt(f+2)]<<6|dr[t.charCodeAt(f+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return i===2&&(e=dr[t.charCodeAt(f)]<<2|dr[t.charCodeAt(f+1)]>>4,a[s++]=e&255),i===1&&(e=dr[t.charCodeAt(f)]<<10|dr[t.charCodeAt(f+1)]<<4|dr[t.charCodeAt(f+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function bm(t){return Hr[t>>18&63]+Hr[t>>12&63]+Hr[t>>6&63]+Hr[t&63]}function vm(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(bm(n));return i.join("")}function gm(t){for(var e,r=t.length,n=r%3,i=[],a=16383,s=0,o=r-n;s<o;s+=a)i.push(vm(t,s,s+a>o?o:s+a));return n===1?(e=t[r-1],i.push(Hr[e>>2]+Hr[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Hr[e>>10]+Hr[e>>4&63]+Hr[e<<2&63]+"=")),i.join("")}});var Gd=T(L0=>{L0.read=function(t,e,r,n,i){var a,s,o=i*8-n-1,f=(1<<o)-1,u=f>>1,c=-7,l=r?i-1:0,y=r?-1:1,x=t[e+l];for(l+=y,a=x&(1<<-c)-1,x>>=-c,c+=o;c>0;a=a*256+t[e+l],l+=y,c-=8);for(s=a&(1<<-c)-1,a>>=-c,c+=n;c>0;s=s*256+t[e+l],l+=y,c-=8);if(a===0)a=1-u;else{if(a===f)return s?NaN:(x?-1:1)*(1/0);s=s+Math.pow(2,n),a=a-u}return(x?-1:1)*s*Math.pow(2,a-n)};L0.write=function(t,e,r,n,i,a){var s,o,f,u=a*8-i-1,c=(1<<u)-1,l=c>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=n?0:a-1,v=n?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-s))<1&&(s--,f*=2),s+l>=1?e+=y/f:e+=y*Math.pow(2,1-l),e*f>=2&&(s++,f/=2),s+l>=c?(o=0,s=c):s+l>=1?(o=(e*f-1)*Math.pow(2,i),s=s+l):(o=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[r+x]=o&255,x+=v,o/=256,i-=8);for(s=s<<i|o,u+=i;u>0;t[r+x]=s&255,x+=v,s/=256,u-=8);t[r+x-v]|=b*128}});var Nn=T($i=>{"use strict";var D0=jd(),Hi=Gd(),$d=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;$i.Buffer=K;$i.SlowBuffer=_m;$i.INSPECT_MAX_BYTES=50;var ro=2147483647;$i.kMaxLength=ro;K.TYPED_ARRAY_SUPPORT=mm();!K.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function mm(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch(t){return!1}}Object.defineProperty(K.prototype,"parent",{enumerable:!0,get:function(){if(!!K.isBuffer(this))return this.buffer}});Object.defineProperty(K.prototype,"offset",{enumerable:!0,get:function(){if(!!K.isBuffer(this))return this.byteOffset}});function vn(t){if(t>ro)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,K.prototype),e}function K(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return O0(t)}return Yd(t,e,r)}K.poolSize=8192;function Yd(t,e,r){if(typeof t=="string")return wm(t,e);if(ArrayBuffer.isView(t))return Em(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(jr(t,ArrayBuffer)||t&&jr(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(jr(t,SharedArrayBuffer)||t&&jr(t.buffer,SharedArrayBuffer)))return F0(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return K.from(n,e,r);let i=Sm(t);if(i)return i;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return K.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}K.from=function(t,e,r){return Yd(t,e,r)};Object.setPrototypeOf(K.prototype,Uint8Array.prototype);Object.setPrototypeOf(K,Uint8Array);function Wd(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function xm(t,e,r){return Wd(t),t<=0?vn(t):e!==void 0?typeof r=="string"?vn(t).fill(e,r):vn(t).fill(e):vn(t)}K.alloc=function(t,e,r){return xm(t,e,r)};function O0(t){return Wd(t),vn(t<0?0:U0(t)|0)}K.allocUnsafe=function(t){return O0(t)};K.allocUnsafeSlow=function(t){return O0(t)};function wm(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!K.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=Qd(t,e)|0,n=vn(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function K0(t){let e=t.length<0?0:U0(t.length)|0,r=vn(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function Em(t){if(jr(t,Uint8Array)){let e=new Uint8Array(t);return F0(e.buffer,e.byteOffset,e.byteLength)}return K0(t)}function F0(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,K.prototype),n}function Sm(t){if(K.isBuffer(t)){let e=U0(t.length)|0,r=vn(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||H0(t.length)?vn(0):K0(t);if(t.type==="Buffer"&&Array.isArray(t.data))return K0(t.data)}function U0(t){if(t>=ro)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ro.toString(16)+" bytes");return t|0}function _m(t){return+t!=t&&(t=0),K.alloc(+t)}K.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==K.prototype};K.compare=function(e,r){if(jr(e,Uint8Array)&&(e=K.from(e,e.offset,e.byteLength)),jr(r,Uint8Array)&&(r=K.from(r,r.offset,r.byteLength)),!K.isBuffer(e)||!K.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let a=0,s=Math.min(n,i);a<s;++a)if(e[a]!==r[a]){n=e[a],i=r[a];break}return n<i?-1:i<n?1:0};K.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};K.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return K.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=K.allocUnsafe(r),a=0;for(n=0;n<e.length;++n){let s=e[n];if(jr(s,Uint8Array))a+s.length>i.length?(K.isBuffer(s)||(s=K.from(s)),s.copy(i,a)):Uint8Array.prototype.set.call(i,s,a);else if(K.isBuffer(s))s.copy(i,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=s.length}return i};function Qd(t,e){if(K.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||jr(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V0(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return fp(t).length;default:if(i)return n?-1:V0(t).length;e=(""+e).toLowerCase(),i=!0}}K.byteLength=Qd;function Am(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return Nm(this,e,r);case"utf8":case"utf-8":return Xd(this,e,r);case"ascii":return qm(this,e,r);case"latin1":case"binary":return km(this,e,r);case"base64":return Mm(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Lm(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}K.prototype._isBuffer=!0;function oi(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}K.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)oi(this,r,r+1);return this};K.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)oi(this,r,r+3),oi(this,r+1,r+2);return this};K.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)oi(this,r,r+7),oi(this,r+1,r+6),oi(this,r+2,r+5),oi(this,r+3,r+4);return this};K.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Xd(this,0,e):Am.apply(this,arguments)};K.prototype.toLocaleString=K.prototype.toString;K.prototype.equals=function(e){if(!K.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:K.compare(this,e)===0};K.prototype.inspect=function(){let e="",r=$i.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};$d&&(K.prototype[$d]=K.prototype.inspect);K.prototype.compare=function(e,r,n,i,a){if(jr(e,Uint8Array)&&(e=K.from(e,e.offset,e.byteLength)),!K.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),a===void 0&&(a=this.length),r<0||n>e.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&r>=n)return 0;if(i>=a)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,a>>>=0,this===e)return 0;let s=a-i,o=n-r,f=Math.min(s,o),u=this.slice(i,a),c=e.slice(r,n);for(let l=0;l<f;++l)if(u[l]!==c[l]){s=u[l],o=c[l];break}return s<o?-1:o<s?1:0};function Jd(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,H0(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=K.from(e,n)),K.isBuffer(e))return e.length===0?-1:Zd(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Zd(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Zd(t,e,r,n,i){let a=1,s=t.length,o=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;a=2,s/=2,o/=2,r/=2}function f(c,l){return a===1?c[l]:c.readUInt16BE(l*a)}let u;if(i){let c=-1;for(u=r;u<s;u++)if(f(t,u)===f(e,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===o)return c*a}else c!==-1&&(u-=u-c),c=-1}else for(r+o>s&&(r=s-o),u=r;u>=0;u--){let c=!0;for(let l=0;l<o;l++)if(f(t,u+l)!==f(e,l)){c=!1;break}if(c)return u}return-1}K.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};K.prototype.indexOf=function(e,r,n){return Jd(this,e,r,n,!0)};K.prototype.lastIndexOf=function(e,r,n){return Jd(this,e,r,n,!1)};function Bm(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let a=e.length;n>a/2&&(n=a/2);let s;for(s=0;s<n;++s){let o=parseInt(e.substr(s*2,2),16);if(H0(o))return s;t[r+s]=o}return s}function Im(t,e,r,n){return no(V0(e,t.length-r),t,r,n)}function Cm(t,e,r,n){return no(Fm(e),t,r,n)}function Tm(t,e,r,n){return no(fp(e),t,r,n)}function Pm(t,e,r,n){return no(Um(e,t.length-r),t,r,n)}K.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let a=this.length-r;if((n===void 0||n>a)&&(n=a),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return Bm(this,e,r,n);case"utf8":case"utf-8":return Im(this,e,r,n);case"ascii":case"latin1":case"binary":return Cm(this,e,r,n);case"base64":return Tm(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pm(this,e,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};K.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Mm(t,e,r){return e===0&&r===t.length?D0.fromByteArray(t):D0.fromByteArray(t.slice(e,r))}function Xd(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let a=t[i],s=null,o=a>239?4:a>223?3:a>191?2:1;if(i+o<=r){let f,u,c,l;switch(o){case 1:a<128&&(s=a);break;case 2:f=t[i+1],(f&192)==128&&(l=(a&31)<<6|f&63,l>127&&(s=l));break;case 3:f=t[i+1],u=t[i+2],(f&192)==128&&(u&192)==128&&(l=(a&15)<<12|(f&63)<<6|u&63,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:f=t[i+1],u=t[i+2],c=t[i+3],(f&192)==128&&(u&192)==128&&(c&192)==128&&(l=(a&15)<<18|(f&63)<<12|(u&63)<<6|c&63,l>65535&&l<1114112&&(s=l))}}s===null?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=o}return Rm(n)}var ep=4096;function Rm(t){let e=t.length;if(e<=ep)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=ep));return r}function qm(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function km(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function Nm(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let a=e;a<r;++a)i+=zm[t[a]];return i}function Lm(t,e,r){let n=t.slice(e,r),i="";for(let a=0;a<n.length-1;a+=2)i+=String.fromCharCode(n[a]+n[a+1]*256);return i}K.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,K.prototype),i};function Tt(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}K.prototype.readUintLE=K.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Tt(e,r,this.length);let i=this[e],a=1,s=0;for(;++s<r&&(a*=256);)i+=this[e+s]*a;return i};K.prototype.readUintBE=K.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Tt(e,r,this.length);let i=this[e+--r],a=1;for(;r>0&&(a*=256);)i+=this[e+--r]*a;return i};K.prototype.readUint8=K.prototype.readUInt8=function(e,r){return e=e>>>0,r||Tt(e,1,this.length),this[e]};K.prototype.readUint16LE=K.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Tt(e,2,this.length),this[e]|this[e+1]<<8};K.prototype.readUint16BE=K.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Tt(e,2,this.length),this[e]<<8|this[e+1]};K.prototype.readUint32LE=K.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Tt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};K.prototype.readUint32BE=K.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Tt(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};K.prototype.readBigUInt64LE=kn(function(e){e=e>>>0,Gi(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Qa(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,a=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(a)<<BigInt(32))});K.prototype.readBigUInt64BE=kn(function(e){e=e>>>0,Gi(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Qa(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],a=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(a)});K.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Tt(e,r,this.length);let i=this[e],a=1,s=0;for(;++s<r&&(a*=256);)i+=this[e+s]*a;return a*=128,i>=a&&(i-=Math.pow(2,8*r)),i};K.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Tt(e,r,this.length);let i=r,a=1,s=this[e+--i];for(;i>0&&(a*=256);)s+=this[e+--i]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*r)),s};K.prototype.readInt8=function(e,r){return e=e>>>0,r||Tt(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};K.prototype.readInt16LE=function(e,r){e=e>>>0,r||Tt(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};K.prototype.readInt16BE=function(e,r){e=e>>>0,r||Tt(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};K.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Tt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};K.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Tt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};K.prototype.readBigInt64LE=kn(function(e){e=e>>>0,Gi(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Qa(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});K.prototype.readBigInt64BE=kn(function(e){e=e>>>0,Gi(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Qa(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});K.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Tt(e,4,this.length),Hi.read(this,e,!0,23,4)};K.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Tt(e,4,this.length),Hi.read(this,e,!1,23,4)};K.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Tt(e,8,this.length),Hi.read(this,e,!0,52,8)};K.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Tt(e,8,this.length),Hi.read(this,e,!1,52,8)};function Jt(t,e,r,n,i,a){if(!K.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}K.prototype.writeUintLE=K.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let o=Math.pow(2,8*n)-1;Jt(this,e,r,n,o,0)}let a=1,s=0;for(this[r]=e&255;++s<n&&(a*=256);)this[r+s]=e/a&255;return r+n};K.prototype.writeUintBE=K.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let o=Math.pow(2,8*n)-1;Jt(this,e,r,n,o,0)}let a=n-1,s=1;for(this[r+a]=e&255;--a>=0&&(s*=256);)this[r+a]=e/s&255;return r+n};K.prototype.writeUint8=K.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,1,255,0),this[r]=e&255,r+1};K.prototype.writeUint16LE=K.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};K.prototype.writeUint16BE=K.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};K.prototype.writeUint32LE=K.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};K.prototype.writeUint32BE=K.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function tp(t,e,r,n,i){op(e,n,i,t,r,7);let a=Number(e&BigInt(4294967295));t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,r}function rp(t,e,r,n,i){op(e,n,i,t,r,7);let a=Number(e&BigInt(4294967295));t[r+7]=a,a=a>>8,t[r+6]=a,a=a>>8,t[r+5]=a,a=a>>8,t[r+4]=a;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s=s>>8,t[r+2]=s,s=s>>8,t[r+1]=s,s=s>>8,t[r]=s,r+8}K.prototype.writeBigUInt64LE=kn(function(e,r=0){return tp(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});K.prototype.writeBigUInt64BE=kn(function(e,r=0){return rp(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});K.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let f=Math.pow(2,8*n-1);Jt(this,e,r,n,f-1,-f)}let a=0,s=1,o=0;for(this[r]=e&255;++a<n&&(s*=256);)e<0&&o===0&&this[r+a-1]!==0&&(o=1),this[r+a]=(e/s>>0)-o&255;return r+n};K.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let f=Math.pow(2,8*n-1);Jt(this,e,r,n,f-1,-f)}let a=n-1,s=1,o=0;for(this[r+a]=e&255;--a>=0&&(s*=256);)e<0&&o===0&&this[r+a+1]!==0&&(o=1),this[r+a]=(e/s>>0)-o&255;return r+n};K.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};K.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};K.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};K.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};K.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Jt(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};K.prototype.writeBigInt64LE=kn(function(e,r=0){return tp(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});K.prototype.writeBigInt64BE=kn(function(e,r=0){return rp(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function np(t,e,r,n,i,a){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function ip(t,e,r,n,i){return e=+e,r=r>>>0,i||np(t,e,r,4,34028234663852886e22,-34028234663852886e22),Hi.write(t,e,r,n,23,4),r+4}K.prototype.writeFloatLE=function(e,r,n){return ip(this,e,r,!0,n)};K.prototype.writeFloatBE=function(e,r,n){return ip(this,e,r,!1,n)};function ap(t,e,r,n,i){return e=+e,r=r>>>0,i||np(t,e,r,8,17976931348623157e292,-17976931348623157e292),Hi.write(t,e,r,n,52,8),r+8}K.prototype.writeDoubleLE=function(e,r,n){return ap(this,e,r,!0,n)};K.prototype.writeDoubleBE=function(e,r,n){return ap(this,e,r,!1,n)};K.prototype.copy=function(e,r,n,i){if(!K.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let a=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),a};K.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!K.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let a;if(typeof e=="number")for(a=r;a<n;++a)this[a]=e;else{let s=K.isBuffer(e)?e:K.from(e,i),o=s.length;if(o===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-r;++a)this[a+r]=s[a%o]}return this};var ji={};function z0(t,e,r){ji[t]=class extends r{constructor(){super();Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}z0("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);z0("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);z0("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=sp(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=sp(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function sp(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Dm(t,e,r){Gi(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Qa(e,t.length-(r+1))}function op(t,e,r,n,i,a){if(t>r||t<e){let s=typeof e=="bigint"?"n":"",o;throw a>3?e===0||e===BigInt(0)?o=`>= 0${s} and < 2${s} ** ${(a+1)*8}${s}`:o=`>= -(2${s} ** ${(a+1)*8-1}${s}) and < 2 ** ${(a+1)*8-1}${s}`:o=`>= ${e}${s} and <= ${r}${s}`,new ji.ERR_OUT_OF_RANGE("value",o,t)}Dm(n,i,a)}function Gi(t,e){if(typeof t!="number")throw new ji.ERR_INVALID_ARG_TYPE(e,"number",t)}function Qa(t,e,r){throw Math.floor(t)!==t?(Gi(t,r),new ji.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new ji.ERR_BUFFER_OUT_OF_BOUNDS:new ji.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var Om=/[^+/0-9A-Za-z-_]/g;function Km(t){if(t=t.split("=")[0],t=t.trim().replace(Om,""),t.length<2)return"";for(;t.length%4!=0;)t=t+"=";return t}function V0(t,e){e=e||1/0;let r,n=t.length,i=null,a=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function Fm(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function Um(t,e){let r,n,i,a=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,a.push(i),a.push(n);return a}function fp(t){return D0.toByteArray(Km(t))}function no(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function jr(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function H0(t){return t!==t}var zm=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function kn(t){return typeof BigInt=="undefined"?Vm:t}function Vm(){throw new Error("BigInt not supported")}});var hp=T((j0,cp)=>{var io=Nn(),gn=io.Buffer;function up(t,e){for(var r in t)e[r]=t[r]}gn.from&&gn.alloc&&gn.allocUnsafe&&gn.allocUnsafeSlow?cp.exports=io:(up(io,j0),j0.Buffer=Yi);function Yi(t,e,r){return gn(t,e,r)}up(gn,Yi);Yi.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return gn(t,e,r)};Yi.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=gn(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Yi.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return gn(t)};Yi.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return io.SlowBuffer(t)}});var lp=T((UI,$0)=>{"use strict";var G0=65536,Hm=4294967295;function jm(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var Gm=hp().Buffer,ao=globalThis.crypto||globalThis.msCrypto;ao&&ao.getRandomValues?$0.exports=$m:$0.exports=jm;function $m(t,e){if(t>Hm)throw new RangeError("requested too many random bytes");var r=Gm.allocUnsafe(t);if(t>0)if(t>G0)for(var n=0;n<t;n+=G0)ao.getRandomValues(r.slice(n,n+G0));else ao.getRandomValues(r);return typeof e=="function"?process.nextTick(function(){e(null,r)}):r}});var yp=T((zI,pp)=>{"use strict";var Ym=lp(),{EventEmitter:Wm}=Ds();function dp(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;++r)if(t[r]!==e[r])return!1;return!0}function Y0(){return{contacts:[],dontSplit:!1,left:null,right:null}}function Ja(t,e){if(!(e instanceof Uint8Array))throw new TypeError(t+" is not a Uint8Array")}var Za=class extends Wm{constructor(e={}){super();this.localNodeId=e.localNodeId||Ym(20),this.numberOfNodesPerKBucket=e.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=e.numberOfNodesToPing||3,this.distance=e.distance||Za.distance,this.arbiter=e.arbiter||Za.arbiter,this.metadata=Object.assign({},e.metadata),Ja("option.localNodeId as parameter 1",this.localNodeId),this.root=Y0()}static arbiter(e,r){return e.vectorClock>r.vectorClock?e:r}static distance(e,r){let n=0,i=0,a=Math.min(e.length,r.length),s=Math.max(e.length,r.length);for(;i<a;++i)n=n*256+(e[i]^r[i]);for(;i<s;++i)n=n*256+255;return n}add(e){Ja("contact.id",(e||{}).id);let r=0,n=this.root;for(;n.contacts===null;)n=this._determineNode(n,e.id,r++);let i=this._indexOf(n,e.id);return i>=0?(this._update(n,i,e),this):n.contacts.length<this.numberOfNodesPerKBucket?(n.contacts.push(e),this.emit("added",e),this):n.dontSplit?(this.emit("ping",n.contacts.slice(0,this.numberOfNodesToPing),e),this):(this._split(n,r),this.add(e))}closest(e,r=1/0){if(Ja("id",e),!Number.isInteger(r)&&r!==1/0||r<=0)throw new TypeError("n is not positive number");let n=[];for(let i=[this.root],a=0;i.length>0&&n.length<r;){let s=i.pop();if(s.contacts===null){let o=this._determineNode(s,e,a++);i.push(s.left===o?s.right:s.left),i.push(o)}else n=n.concat(s.contacts)}return n.map(i=>[this.distance(i.id,e),i]).sort((i,a)=>i[0]-a[0]).slice(0,r).map(i=>i[1])}count(){let e=0;for(let r=[this.root];r.length>0;){let n=r.pop();n.contacts===null?r.push(n.right,n.left):e+=n.contacts.length}return e}_determineNode(e,r,n){let i=n>>3,a=n%8;return r.length<=i&&a!==0?e.left:r[i]&1<<7-a?e.right:e.left}get(e){Ja("id",e);let r=0,n=this.root;for(;n.contacts===null;)n=this._determineNode(n,e,r++);let i=this._indexOf(n,e);return i>=0?n.contacts[i]:null}_indexOf(e,r){for(let n=0;n<e.contacts.length;++n)if(dp(e.contacts[n].id,r))return n;return-1}remove(e){Ja("the id as parameter 1",e);let r=0,n=this.root;for(;n.contacts===null;)n=this._determineNode(n,e,r++);let i=this._indexOf(n,e);if(i>=0){let a=n.contacts.splice(i,1)[0];this.emit("removed",a)}return this}_split(e,r){e.left=Y0(),e.right=Y0();for(let a of e.contacts)this._determineNode(e,a.id,r).contacts.push(a);e.contacts=null;let n=this._determineNode(e,this.localNodeId,r),i=e.left===n?e.right:e.left;i.dontSplit=!0}toArray(){let e=[];for(let r=[this.root];r.length>0;){let n=r.pop();n.contacts===null?r.push(n.right,n.left):e=e.concat(n.contacts)}return e}*toIterable(){for(let e=[this.root];e.length>0;){let r=e.pop();r.contacts===null?e.push(r.right,r.left):yield*r.contacts}}_update(e,r,n){if(!dp(e.contacts[r].id,n.id))throw new Error("wrong index for _update");let i=e.contacts[r],a=this.arbiter(i,n);a===i&&i!==n||(e.contacts.splice(r,1),e.contacts.push(a),this.emit("updated",i,a))}};pp.exports=Za});var vp=T((VI,bp)=>{var Wi=1e3,Qi=Wi*60,Ji=Qi*60,fi=Ji*24,Qm=fi*7,Jm=fi*365.25;bp.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Zm(t);if(r==="number"&&isFinite(t))return e.long?e5(t):Xm(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Zm(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Jm;case"weeks":case"week":case"w":return r*Qm;case"days":case"day":case"d":return r*fi;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ji;case"minutes":case"minute":case"mins":case"min":case"m":return r*Qi;case"seconds":case"second":case"secs":case"sec":case"s":return r*Wi;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Xm(t){var e=Math.abs(t);return e>=fi?Math.round(t/fi)+"d":e>=Ji?Math.round(t/Ji)+"h":e>=Qi?Math.round(t/Qi)+"m":e>=Wi?Math.round(t/Wi)+"s":t+"ms"}function e5(t){var e=Math.abs(t);return e>=fi?so(t,e,fi,"day"):e>=Ji?so(t,e,Ji,"hour"):e>=Qi?so(t,e,Qi,"minute"):e>=Wi?so(t,e,Wi,"second"):t+" ms"}function so(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var mp=T((HI,gp)=>{function t5(t){r.debug=r,r.default=r,r.coerce=f,r.disable=a,r.enable=i,r.enabled=s,r.humanize=vp(),r.destroy=u,Object.keys(t).forEach(c=>{r[c]=t[c]}),r.names=[],r.skips=[],r.formatters={};function e(c){let l=0;for(let y=0;y<c.length;y++)l=(l<<5)-l+c.charCodeAt(y),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=e;function r(c){let l,y=null,x,v;function b(..._){if(!b.enabled)return;let A=b,M=Number(new Date),q=M-(l||M);A.diff=q,A.prev=l,A.curr=M,l=M,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let z=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(U,$)=>{if(U==="%%")return"%";z++;let H=r.formatters[$];if(typeof H=="function"){let X=_[z];U=H.call(A,X),_.splice(z,1),z--}return U}),r.formatArgs.call(A,_),(A.log||r.log).apply(A,_)}return b.namespace=c,b.useColors=r.useColors(),b.color=r.selectColor(c),b.extend=n,b.destroy=r.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(x!==r.namespaces&&(x=r.namespaces,v=r.enabled(c)),v),set:_=>{y=_}}),typeof r.init=="function"&&r.init(b),b}function n(c,l){let y=r(this.namespace+(typeof l=="undefined"?":":l)+c);return y.log=this.log,y}function i(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let l,y=(typeof c=="string"?c:"").split(/[\s,]+/),x=y.length;for(l=0;l<x;l++)!y[l]||(c=y[l].replace(/\*/g,".*?"),c[0]==="-"?r.skips.push(new RegExp("^"+c.substr(1)+"$")):r.names.push(new RegExp("^"+c+"$")))}function a(){let c=[...r.names.map(o),...r.skips.map(o).map(l=>"-"+l)].join(",");return r.enable(""),c}function s(c){if(c[c.length-1]==="*")return!0;let l,y;for(l=0,y=r.skips.length;l<y;l++)if(r.skips[l].test(c))return!1;for(l=0,y=r.names.length;l<y;l++)if(r.names[l].test(c))return!0;return!1}function o(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function f(c){return c instanceof Error?c.stack||c.message:c}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}gp.exports=t5});var W0=T((nr,oo)=>{nr.formatArgs=n5;nr.save=i5;nr.load=a5;nr.useColors=r5;nr.storage=s5();nr.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();nr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r5(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n5(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+oo.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}nr.log=console.debug||console.log||(()=>{});function i5(t){try{t?nr.storage.setItem("debug",t):nr.storage.removeItem("debug")}catch(e){}}function a5(){let t;try{t=nr.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function s5(){try{return localStorage}catch(t){}}oo.exports=mp()(nr);var{formatters:o5}=oo.exports;o5.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var fo=T((jI,xp)=>{xp.exports=Ln;function Ln(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");for(var r=Buffer.allocUnsafe(t.length),n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}Ln.compare=function(e,r){if(e.length!==r.length)throw new Error("Inputs should have the same length");for(var n=0;n<e.length;n++)if(e[n]!==r[n])return e[n]<r[n]?-1:1;return 0};Ln.gt=function(e,r){return Ln.compare(e,r)===1};Ln.lt=function(e,r){return Ln.compare(e,r)===-1};Ln.eq=function(e,r){return Ln.compare(e,r)===0}});var Ep=T((GI,wp)=>{"use strict";wp.exports=(t,e=1,r)=>{if(r={indent:" ",includeEmptyLines:!1,...r},typeof t!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof t}\``);if(typeof e!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof e}\``);if(typeof r.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof r.indent}\``);if(e===0)return t;let n=r.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return t.replace(n,r.indent.repeat(e))}});var Sp=T(()=>{});var Ip=T((WI,Bp)=>{"use strict";var _p=Sp(),Ap=/\s+at.*(?:\(|\s)(.*)\)?/,f5=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,u5=typeof _p.homedir=="undefined"?"":_p.homedir();Bp.exports=(t,e)=>(e=Object.assign({pretty:!1},e),t.replace(/\\/g,"/").split(`
`).filter(r=>{let n=r.match(Ap);if(n===null||!n[1])return!0;let i=n[1];return i.includes(".app/Contents/Resources/electron.asar")||i.includes(".app/Contents/Resources/default_app.asar")?!1:!f5.test(i)}).filter(r=>r.trim()!=="").map(r=>e.pretty?r.replace(Ap,(n,i)=>n.replace(i,i.replace(u5,"~"))):r).join(`
`))});var Pp=T((QI,Tp)=>{"use strict";var c5=Ep(),h5=Ip(),l5=t=>t.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""),Cp=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);e=[...e].map(n=>n instanceof Error?n:n!==null&&typeof n=="object"?Object.assign(new Error(n.message),n):new Error(n));let r=e.map(n=>typeof n.stack=="string"?l5(h5(n.stack)):String(n)).join(`
`);r=`
`+c5(r,4);super(r);this.name="AggregateError",Object.defineProperty(this,"_errors",{value:e})}*[Symbol.iterator](){for(let e of this._errors)yield e}};Tp.exports=Cp});var uo=T((JI,Mp)=>{"use strict";var d5=Pp();Mp.exports=async(t,e,{concurrency:r=1/0,stopOnError:n=!0}={})=>new Promise((i,a)=>{if(typeof e!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(r)||r===1/0)&&r>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${r}\` (${typeof r})`);let s=[],o=[],f=t[Symbol.iterator](),u=!1,c=!1,l=0,y=0,x=()=>{if(u)return;let v=f.next(),b=y;if(y++,v.done){c=!0,l===0&&(!n&&o.length!==0?a(new d5(o)):i(s));return}l++,(async()=>{try{let _=await v.value;s[b]=await e(_,b),l--,x()}catch(_){n?(u=!0,a(_)):(o.push(_),l--,x())}})()};for(let v=0;v<r&&(x(),!c);v++);})});var ho=T((ZI,qp)=>{"use strict";var ui=Oa(),co=ui.Reader,Rp=ui.Writer,Ft=ui.util,pr=ui.roots["libp2p-crypto-keys"]||(ui.roots["libp2p-crypto-keys"]={});pr.KeyType=function(){var t={},e=Object.create(t);return e[t[0]="RSA"]=0,e[t[1]="Ed25519"]=1,e[t[2]="Secp256k1"]=2,e}();pr.PublicKey=function(){function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.Type=0,t.prototype.Data=Ft.newBuffer([]),t.encode=function(r,n){return n||(n=Rp.create()),n.uint32(8).int32(r.Type),n.uint32(18).bytes(r.Data),n},t.decode=function(r,n){r instanceof co||(r=co.create(r));for(var i=n===void 0?r.len:r.pos+n,a=new pr.PublicKey;r.pos<i;){var s=r.uint32();switch(s>>>3){case 1:a.Type=r.int32();break;case 2:a.Data=r.bytes();break;default:r.skipType(s&7);break}}if(!a.hasOwnProperty("Type"))throw Ft.ProtocolError("missing required 'Type'",{instance:a});if(!a.hasOwnProperty("Data"))throw Ft.ProtocolError("missing required 'Data'",{instance:a});return a},t.fromObject=function(r){if(r instanceof pr.PublicKey)return r;var n=new pr.PublicKey;switch(r.Type){case"RSA":case 0:n.Type=0;break;case"Ed25519":case 1:n.Type=1;break;case"Secp256k1":case 2:n.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?Ft.base64.decode(r.Data,n.Data=Ft.newBuffer(Ft.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),n},t.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(i.Type=n.enums===String?"RSA":0,n.bytes===String?i.Data="":(i.Data=[],n.bytes!==Array&&(i.Data=Ft.newBuffer(i.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(i.Type=n.enums===String?pr.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(i.Data=n.bytes===String?Ft.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,ui.util.toJSONOptions)},t}();pr.PrivateKey=function(){function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.Type=0,t.prototype.Data=Ft.newBuffer([]),t.encode=function(r,n){return n||(n=Rp.create()),n.uint32(8).int32(r.Type),n.uint32(18).bytes(r.Data),n},t.decode=function(r,n){r instanceof co||(r=co.create(r));for(var i=n===void 0?r.len:r.pos+n,a=new pr.PrivateKey;r.pos<i;){var s=r.uint32();switch(s>>>3){case 1:a.Type=r.int32();break;case 2:a.Data=r.bytes();break;default:r.skipType(s&7);break}}if(!a.hasOwnProperty("Type"))throw Ft.ProtocolError("missing required 'Type'",{instance:a});if(!a.hasOwnProperty("Data"))throw Ft.ProtocolError("missing required 'Data'",{instance:a});return a},t.fromObject=function(r){if(r instanceof pr.PrivateKey)return r;var n=new pr.PrivateKey;switch(r.Type){case"RSA":case 0:n.Type=0;break;case"Ed25519":case 1:n.Type=1;break;case"Secp256k1":case 2:n.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?Ft.base64.decode(r.Data,n.Data=Ft.newBuffer(Ft.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),n},t.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(i.Type=n.enums===String?"RSA":0,n.bytes===String?i.Data="":(i.Data=[],n.bytes!==Array&&(i.Data=Ft.newBuffer(i.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(i.Type=n.enums===String?pr.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(i.Data=n.bytes===String?Ft.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,ui.util.toJSONOptions)},t}();qp.exports=pr});var Be=T((XI,kp)=>{kp.exports={options:{usePureJavaScript:!1}}});var Dp=T((eC,Lp)=>{var Q0={};Lp.exports=Q0;var Np={};Q0.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=p5(t,e);else{var i=0,a=e.length,s=e.charAt(0),o=[0];for(i=0;i<t.length;++i){for(var f=0,u=t[i];f<o.length;++f)u+=o[f]<<8,o[f]=u%a,u=u/a|0;for(;u>0;)o.push(u%a),u=u/a|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=s;for(i=o.length-1;i>=0;--i)n+=e[o[i]]}if(r){var c=new RegExp(".{1,"+r+"}","g");n=n.match(c).join(`\r
`)}return n};Q0.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=Np[e];if(!r){r=Np[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,a=e.charAt(0),s=[0],n=0;n<t.length;n++){var o=r[t.charCodeAt(n)];if(o===void 0)return;for(var f=0,u=o;f<s.length;++f)u+=s[f]*i,s[f]=u&255,u>>=8;for(;u>0;)s.push(u&255),u>>=8}for(var c=0;t[c]===a&&c<t.length-1;++c)s.push(0);return typeof Buffer!="undefined"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function p5(t,e){var r=0,n=e.length,i=e.charAt(0),a=[0];for(r=0;r<t.length();++r){for(var s=0,o=t.at(r);s<a.length;++s)o+=a[s]<<8,a[s]=o%n,o=o/n|0;for(;o>0;)a.push(o%n),o=o/n|0}var f="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)f+=i;for(r=a.length-1;r>=0;--r)f+=e[a[r]];return f}});var We=T((tC,Up)=>{var Op=Be(),Kp=Dp(),P=Up.exports=Op.util=Op.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){P.nextTick=process.nextTick,typeof setImmediate=="function"?P.setImmediate=setImmediate:P.setImmediate=P.nextTick;return}if(typeof setImmediate=="function"){P.setImmediate=function(){return setImmediate.apply(void 0,arguments)},P.nextTick=function(o){return setImmediate(o)};return}if(P.setImmediate=function(o){setTimeout(o,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let o=function(f){if(f.source===window&&f.data===t){f.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(c){c()})}};var s=o,t="forge.setImmediate",e=[];P.setImmediate=function(f){e.push(f),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",o,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var f=e.slice();e.length=0,f.forEach(function(u){u()})}).observe(i,{attributes:!0});var a=P.setImmediate;P.setImmediate=function(f){Date.now()-r>15?(r=Date.now(),a(f)):(e.push(f),e.length===1&&i.setAttribute("a",n=!n))}}P.nextTick=P.setImmediate})();P.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;P.globalScope=function(){return P.isNodejs?globalThis:typeof self=="undefined"?window:self}();P.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};P.isArrayBuffer=function(t){return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer};P.isArrayBufferView=function(t){return t&&P.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function Xa(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}P.ByteBuffer=J0;function J0(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(P.isArrayBuffer(t)||P.isArrayBufferView(t))if(typeof Buffer!="undefined"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(n){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof J0||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}P.ByteStringBuffer=J0;var y5=4096;P.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>y5&&(this.data.substr(0,1),this._constructedStringLength=0)};P.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};P.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};P.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};P.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};P.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};P.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(P.encodeUtf8(t))};P.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};P.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};P.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};P.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};P.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};P.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};P.ByteStringBuffer.prototype.putInt=function(t,e){Xa(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};P.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};P.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};P.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};P.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};P.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};P.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};P.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};P.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};P.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};P.ByteStringBuffer.prototype.getInt=function(t){Xa(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};P.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};P.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};P.ByteStringBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};P.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};P.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};P.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};P.ByteStringBuffer.prototype.copy=function(){var t=P.createBuffer(this.data);return t.read=this.read,t};P.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};P.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};P.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};P.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};P.ByteStringBuffer.prototype.toString=function(){return P.decodeUtf8(this.bytes())};function b5(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=P.isArrayBuffer(t),n=P.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}P.DataBuffer=b5;P.DataBuffer.prototype.length=function(){return this.write-this.read};P.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};P.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};P.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};P.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};P.DataBuffer.prototype.putBytes=function(t,e){if(P.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(P.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof P.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&P.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof P.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var a;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=P.binary.hex.decode(t,a,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),a=new Uint8Array(this.data.buffer,this.write),this.write+=P.binary.base64.decode(t,a,this.write),this;if(e==="utf8"&&(t=P.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=P.binary.raw.decode(a),this;if(e==="utf16")return this.accommodate(t.length*2),a=new Uint16Array(this.data.buffer,this.write),this.write+=P.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};P.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};P.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};P.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};P.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};P.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};P.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};P.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};P.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};P.DataBuffer.prototype.putInt=function(t,e){Xa(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};P.DataBuffer.prototype.putSignedInt=function(t,e){return Xa(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};P.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};P.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};P.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};P.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};P.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};P.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};P.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};P.DataBuffer.prototype.getInt=function(t){Xa(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};P.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};P.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};P.DataBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};P.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};P.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};P.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};P.DataBuffer.prototype.copy=function(){return new P.DataBuffer(this)};P.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};P.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};P.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};P.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};P.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return P.binary.raw.encode(e);if(t==="hex")return P.binary.hex.encode(e);if(t==="base64")return P.binary.base64.encode(e);if(t==="utf8")return P.text.utf8.decode(e);if(t==="utf16")return P.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};P.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=P.encodeUtf8(t)),new P.ByteBuffer(t)};P.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};P.xorBytes=function(t,e,r){for(var n="",i="",a="",s=0,o=0;r>0;--r,++s)i=t.charCodeAt(s)^e.charCodeAt(s),o>=10&&(n+=a,a="",o=0),a+=String.fromCharCode(i),++o;return n+=a,n};P.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};P.bytesToHex=function(t){return P.createBuffer(t).toHex()};P.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Dn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",On=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Fp="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";P.encode64=function(t,e){for(var r="",n="",i,a,s,o=0;o<t.length;)i=t.charCodeAt(o++),a=t.charCodeAt(o++),s=t.charCodeAt(o++),r+=Dn.charAt(i>>2),r+=Dn.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=Dn.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":Dn.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};P.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,a,s=0;s<t.length;)r=On[t.charCodeAt(s++)-43],n=On[t.charCodeAt(s++)-43],i=On[t.charCodeAt(s++)-43],a=On[t.charCodeAt(s++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),a!==64&&(e+=String.fromCharCode((i&3)<<6|a)));return e};P.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};P.decodeUtf8=function(t){return decodeURIComponent(escape(t))};P.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Kp.encode,decode:Kp.decode}};P.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};P.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,a=0;a<t.length;++a)n[i++]=t.charCodeAt(a);return e?i-r:n};P.binary.hex.encode=P.bytesToHex;P.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,a=r;for(t.length&1&&(i=1,n[a++]=parseInt(t[0],16));i<t.length;i+=2)n[a++]=parseInt(t.substr(i,2),16);return e?a-r:n};P.binary.base64.encode=function(t,e){for(var r="",n="",i,a,s,o=0;o<t.byteLength;)i=t[o++],a=t[o++],s=t[o++],r+=Dn.charAt(i>>2),r+=Dn.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=Dn.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":Dn.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};P.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,a,s,o,f=0,u=r;f<t.length;)i=On[t.charCodeAt(f++)-43],a=On[t.charCodeAt(f++)-43],s=On[t.charCodeAt(f++)-43],o=On[t.charCodeAt(f++)-43],n[u++]=i<<2|a>>4,s!==64&&(n[u++]=(a&15)<<4|s>>2,o!==64&&(n[u++]=(s&3)<<6|o));return e?u-r:n.subarray(0,u)};P.binary.base58.encode=function(t,e){return P.binary.baseN.encode(t,Fp,e)};P.binary.base58.decode=function(t,e){return P.binary.baseN.decode(t,Fp,e)};P.text={utf8:{},utf16:{}};P.text.utf8.encode=function(t,e,r){t=P.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,a=0;a<t.length;++a)n[i++]=t.charCodeAt(a);return e?i-r:n};P.text.utf8.decode=function(t){return P.decodeUtf8(String.fromCharCode.apply(null,t))};P.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var a=r,s=r,o=0;o<t.length;++o)i[s++]=t.charCodeAt(o),a+=2;return e?a-r:n};P.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};P.deflate=function(t,e,r){if(e=P.decode64(t.deflate(P.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};P.inflate=function(t,e,r){var n=t.inflate(P.encode64(e)).rval;return n===null?null:P.decode64(n)};var Z0=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=P.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n!="undefined"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},X0=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(P.decode64(r))),r},v5=function(t,e,r,n){var i=X0(t,e);i===null&&(i={}),i[r]=n,Z0(t,e,i)},g5=function(t,e,r){var n=X0(t,e);return n!==null&&(n=r in n?n[r]:null),n},m5=function(t,e,r){var n=X0(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var a in n){i=!1;break}i&&(n=null),Z0(t,e,n)}},x5=function(t,e){Z0(t,e,null)},lo=function(t,e,r){var n=null;typeof r=="undefined"&&(r=["web","flash"]);var i,a=!1,s=null;for(var o in r){i=r[o];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),a=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),a=!0)}catch(f){s=f}if(a)break}if(!a)throw s;return n};P.setItem=function(t,e,r,n,i){lo(v5,arguments,i)};P.getItem=function(t,e,r,n){return lo(g5,arguments,n)};P.removeItem=function(t,e,r,n){lo(m5,arguments,n)};P.clearItems=function(t,e,r){lo(x5,arguments,r)};P.parseUrl=function(t){var e=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;e.lastIndex=0;var r=e.exec(t),n=r===null?null:{full:t,scheme:r[1],host:r[2],port:r[3],path:r[4]};return n&&(n.fullHost=n.host,n.port?(n.port!==80&&n.scheme==="http"||n.port!==443&&n.scheme==="https")&&(n.fullHost+=":"+n.port):n.scheme==="http"?n.port=80:n.scheme==="https"&&(n.port=443),n.full=n.scheme+"://"+n.fullHost),n};var po=null;P.getQueryVariables=function(t){var e=function(n){for(var i={},a=n.split("&"),s=0;s<a.length;s++){var o=a[s].indexOf("="),f,u;o>0?(f=a[s].substring(0,o),u=a[s].substring(o+1)):(f=a[s],u=null),f in i||(i[f]=[]),!(f in Object.prototype)&&u!==null&&i[f].push(unescape(u))}return i},r;return typeof t=="undefined"?(po===null&&(typeof window!="undefined"&&window.location&&window.location.search?po=e(window.location.search.substring(1)):po={}),r=po):r=e(t),r};P.parseFragment=function(t){var e=t,r="",n=t.indexOf("?");n>0&&(e=t.substring(0,n),r=t.substring(n+1));var i=e.split("/");i.length>0&&i[0]===""&&i.shift();var a=r===""?{}:P.getQueryVariables(r);return{pathString:e,queryString:r,path:i,query:a}};P.makeRequest=function(t){var e=P.parseFragment(t),r={path:e.pathString,query:e.queryString,getPath:function(n){return typeof n=="undefined"?e.path:e.path[n]},getQuery:function(n,i){var a;return typeof n=="undefined"?a=e.query:(a=e.query[n],a&&typeof i!="undefined"&&(a=a[i])),a},getQueryLast:function(n,i){var a,s=r.getQuery(n);return s?a=s[s.length-1]:a=i,a}};return r};P.makeLink=function(t,e,r){t=jQuery.isArray(t)?t.join("/"):t;var n=jQuery.param(e||{});return r=r||"",t+(n.length>0?"?"+n:"")+(r.length>0?"#"+r:"")};P.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};P.format=function(t){for(var e=/%./g,r,n,i=0,a=[],s=0;r=e.exec(t);){n=t.substring(s,e.lastIndex-2),n.length>0&&a.push(n),s=e.lastIndex;var o=r[0][1];switch(o){case"s":case"o":i<arguments.length?a.push(arguments[i+++1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+o+"?>")}}return a.push(t.substring(s)),a.join("")};P.formatNumber=function(t,e,r,n){var i=t,a=isNaN(e=Math.abs(e))?2:e,s=r===void 0?",":r,o=n===void 0?".":n,f=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",c=u.length>3?u.length%3:0;return f+(c?u.substr(0,c)+o:"")+u.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+o)+(a?s+Math.abs(i-u).toFixed(a).slice(2):"")};P.formatSize=function(t){return t>=1073741824?t=P.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=P.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=P.formatNumber(t/1024,0)+" KiB":t=P.formatNumber(t,0)+" bytes",t};P.bytesFromIP=function(t){return t.indexOf(".")!==-1?P.bytesFromIPv4(t):t.indexOf(":")!==-1?P.bytesFromIPv6(t):null};P.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=P.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};P.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(s){return s.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=P.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var a=P.hexToBytes(t[i]);a.length<2&&n.putByte(0),n.putBytes(a)}return n.getBytes()};P.bytesToIP=function(t){return t.length===4?P.bytesToIPv4(t):t.length===16?P.bytesToIPv6(t):null};P.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};P.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var a=P.bytesToHex(t[i]+t[i+1]);a[0]==="0"&&a!=="0";)a=a.substr(1);if(a==="0"){var s=r[r.length-1],o=e.length;!s||o!==s.end+1?r.push({start:o,end:o}):(s.end=o,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(a)}if(r.length>0){var f=r[n];f.end-f.start>0&&(e.splice(f.start,f.end-f.start+1,""),f.start===0&&e.unshift(""),f.end===7&&e.push(""))}return e.join(":")};P.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in P&&!t.update)return e(null,P.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return P.cores=navigator.hardwareConcurrency,e(null,P.cores);if(typeof Worker=="undefined")return P.cores=1,e(null,P.cores);if(typeof Blob=="undefined")return P.cores=2,e(null,P.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var o=Date.now(),f=o+4;Date.now()<f;);self.postMessage({st:o,et:f})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,o,f){if(o===0){var u=Math.floor(s.reduce(function(c,l){return c+l},0)/s.length);return P.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,P.cores)}i(f,function(c,l){s.push(a(f,l)),n(s,o-1,f)})}function i(s,o){for(var f=[],u=[],c=0;c<s;++c){var l=new Worker(r);l.addEventListener("message",function(y){if(u.push(y.data),u.length===s){for(var x=0;x<s;++x)f[x].terminate();o(null,u)}}),f.push(l)}for(var c=0;c<s;++c)f[c].postMessage(c)}function a(s,o){for(var f=[],u=0;u<s;++u)for(var c=o[u],l=f[u]=[],y=0;y<s;++y)if(u!==y){var x=o[y];(c.st>x.st&&c.st<x.et||x.st>c.st&&x.st<c.et)&&l.push(y)}return f.reduce(function(v,b){return Math.max(v,b.length)},0)}}});var yo=T((rC,zp)=>{var es=Be();es.pki=es.pki||{};var eu=zp.exports=es.pki.oids=es.oids=es.oids||{};function j(t,e){eu[t]=e,eu[e]=t}function Pe(t,e){eu[t]=e}j("1.2.840.113549.1.1.1","rsaEncryption");j("1.2.840.113549.1.1.4","md5WithRSAEncryption");j("1.2.840.113549.1.1.5","sha1WithRSAEncryption");j("1.2.840.113549.1.1.7","RSAES-OAEP");j("1.2.840.113549.1.1.8","mgf1");j("1.2.840.113549.1.1.9","pSpecified");j("1.2.840.113549.1.1.10","RSASSA-PSS");j("1.2.840.113549.1.1.11","sha256WithRSAEncryption");j("1.2.840.113549.1.1.12","sha384WithRSAEncryption");j("1.2.840.113549.1.1.13","sha512WithRSAEncryption");j("1.3.101.112","EdDSA25519");j("1.2.840.10040.4.3","dsa-with-sha1");j("1.3.14.3.2.7","desCBC");j("1.3.14.3.2.26","sha1");j("2.16.840.1.101.3.4.2.1","sha256");j("2.16.840.1.101.3.4.2.2","sha384");j("2.16.840.1.101.3.4.2.3","sha512");j("1.2.840.113549.2.5","md5");j("1.2.840.113549.1.7.1","data");j("1.2.840.113549.1.7.2","signedData");j("1.2.840.113549.1.7.3","envelopedData");j("1.2.840.113549.1.7.4","signedAndEnvelopedData");j("1.2.840.113549.1.7.5","digestedData");j("1.2.840.113549.1.7.6","encryptedData");j("1.2.840.113549.1.9.1","emailAddress");j("1.2.840.113549.1.9.2","unstructuredName");j("1.2.840.113549.1.9.3","contentType");j("1.2.840.113549.1.9.4","messageDigest");j("1.2.840.113549.1.9.5","signingTime");j("1.2.840.113549.1.9.6","counterSignature");j("1.2.840.113549.1.9.7","challengePassword");j("1.2.840.113549.1.9.8","unstructuredAddress");j("1.2.840.113549.1.9.14","extensionRequest");j("1.2.840.113549.1.9.20","friendlyName");j("1.2.840.113549.1.9.21","localKeyId");j("1.2.840.113549.1.9.22.1","x509Certificate");j("1.2.840.113549.1.12.10.1.1","keyBag");j("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");j("1.2.840.113549.1.12.10.1.3","certBag");j("1.2.840.113549.1.12.10.1.4","crlBag");j("1.2.840.113549.1.12.10.1.5","secretBag");j("1.2.840.113549.1.12.10.1.6","safeContentsBag");j("1.2.840.113549.1.5.13","pkcs5PBES2");j("1.2.840.113549.1.5.12","pkcs5PBKDF2");j("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");j("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");j("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");j("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");j("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");j("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");j("1.2.840.113549.2.7","hmacWithSHA1");j("1.2.840.113549.2.8","hmacWithSHA224");j("1.2.840.113549.2.9","hmacWithSHA256");j("1.2.840.113549.2.10","hmacWithSHA384");j("1.2.840.113549.2.11","hmacWithSHA512");j("1.2.840.113549.3.7","des-EDE3-CBC");j("2.16.840.1.101.3.4.1.2","aes128-CBC");j("2.16.840.1.101.3.4.1.22","aes192-CBC");j("2.16.840.1.101.3.4.1.42","aes256-CBC");j("2.5.4.3","commonName");j("2.5.4.5","serialName");j("2.5.4.6","countryName");j("2.5.4.7","localityName");j("2.5.4.8","stateOrProvinceName");j("2.5.4.9","streetAddress");j("2.5.4.10","organizationName");j("2.5.4.11","organizationalUnitName");j("2.5.4.13","description");j("2.5.4.15","businessCategory");j("2.5.4.17","postalCode");j("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");j("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");j("2.16.840.1.113730.1.1","nsCertType");j("2.16.840.1.113730.1.13","nsComment");Pe("2.5.29.1","authorityKeyIdentifier");Pe("2.5.29.2","keyAttributes");Pe("2.5.29.3","certificatePolicies");Pe("2.5.29.4","keyUsageRestriction");Pe("2.5.29.5","policyMapping");Pe("2.5.29.6","subtreesConstraint");Pe("2.5.29.7","subjectAltName");Pe("2.5.29.8","issuerAltName");Pe("2.5.29.9","subjectDirectoryAttributes");Pe("2.5.29.10","basicConstraints");Pe("2.5.29.11","nameConstraints");Pe("2.5.29.12","policyConstraints");Pe("2.5.29.13","basicConstraints");j("2.5.29.14","subjectKeyIdentifier");j("2.5.29.15","keyUsage");Pe("2.5.29.16","privateKeyUsagePeriod");j("2.5.29.17","subjectAltName");j("2.5.29.18","issuerAltName");j("2.5.29.19","basicConstraints");Pe("2.5.29.20","cRLNumber");Pe("2.5.29.21","cRLReason");Pe("2.5.29.22","expirationDate");Pe("2.5.29.23","instructionCode");Pe("2.5.29.24","invalidityDate");Pe("2.5.29.25","cRLDistributionPoints");Pe("2.5.29.26","issuingDistributionPoint");Pe("2.5.29.27","deltaCRLIndicator");Pe("2.5.29.28","issuingDistributionPoint");Pe("2.5.29.29","certificateIssuer");Pe("2.5.29.30","nameConstraints");j("2.5.29.31","cRLDistributionPoints");j("2.5.29.32","certificatePolicies");Pe("2.5.29.33","policyMappings");Pe("2.5.29.34","policyConstraints");j("2.5.29.35","authorityKeyIdentifier");Pe("2.5.29.36","policyConstraints");j("2.5.29.37","extKeyUsage");Pe("2.5.29.46","freshestCRL");Pe("2.5.29.54","inhibitAnyPolicy");j("1.3.6.1.4.1.11129.2.4.2","timestampList");j("1.3.6.1.5.5.7.1.1","authorityInfoAccess");j("1.3.6.1.5.5.7.3.1","serverAuth");j("1.3.6.1.5.5.7.3.2","clientAuth");j("1.3.6.1.5.5.7.3.3","codeSigning");j("1.3.6.1.5.5.7.3.4","emailProtection");j("1.3.6.1.5.5.7.3.8","timeStamping")});var Zi=T((nC,Hp)=>{var He=Be();We();yo();var Q=Hp.exports=He.asn1=He.asn1||{};Q.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};Q.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};Q.create=function(t,e,r,n,i){if(He.util.isArray(n)){for(var a=[],s=0;s<n.length;++s)n[s]!==void 0&&a.push(n[s]);n=a}var o={tagClass:t,type:e,constructed:r,composed:r||He.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(o.bitStringContents=i.bitStringContents,o.original=Q.copy(o)),o};Q.copy=function(t,e){var r;if(He.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(Q.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:Q.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};Q.equals=function(t,e,r){if(He.util.isArray(t)){if(!He.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!Q.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&Q.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};Q.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function ts(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var w5=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var a=r&127;ts(t,e,a),n=t.getInt(a<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};Q.fromDer=function(t,e){return e===void 0&&(e={strict:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=He.util.createBuffer(t)),bo(t,t.length(),0,e)};function bo(t,e,r,n){var i;ts(t,e,2);var a=t.getByte();e--;var s=a&192,o=a&31;i=t.length();var f=w5(t,e);if(e-=i-t.length(),f!==void 0&&f>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=f,u}f=e}var c,l,y=(a&32)==32;if(y)if(c=[],f===void 0)for(;;){if(ts(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}i=t.length(),c.push(bo(t,e,r+1,n)),e-=i-t.length()}else for(;f>0;)i=t.length(),c.push(bo(t,f,r+1,n)),e-=i-t.length(),f-=i-t.length();if(c===void 0&&s===Q.Class.UNIVERSAL&&o===Q.Type.BITSTRING&&(l=t.bytes(f)),c===void 0&&n.decodeBitStrings&&s===Q.Class.UNIVERSAL&&o===Q.Type.BITSTRING&&f>1){var x=t.read,v=e,b=0;if(o===Q.Type.BITSTRING&&(ts(t,e,1),b=t.getByte(),e--),b===0)try{i=t.length();var _={verbose:n.verbose,strict:!0,decodeBitStrings:!0},A=bo(t,e,r+1,_),M=i-t.length();e-=M,o==Q.Type.BITSTRING&&M++;var q=A.tagClass;M===f&&(q===Q.Class.UNIVERSAL||q===Q.Class.CONTEXT_SPECIFIC)&&(c=[A])}catch(O){}c===void 0&&(t.read=x,e=v)}if(c===void 0){if(f===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");f=e}if(o===Q.Type.BMPSTRING)for(c="";f>0;f-=2)ts(t,e,2),c+=String.fromCharCode(t.getInt16()),e-=2;else c=t.getBytes(f)}var z=l===void 0?null:{bitStringContents:l};return Q.create(s,o,y,c,z)}Q.toDer=function(t){var e=He.util.createBuffer(),r=t.tagClass|t.type,n=He.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=Q.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var a=0;a<t.value.length;++a)t.value[a]!==void 0&&n.putBuffer(Q.toDer(t.value[a]))}else if(t.type===Q.Type.BMPSTRING)for(var a=0;a<t.value.length;++a)n.putInt16(t.value.charCodeAt(a));else t.type===Q.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)==0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)==128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var s=n.length(),o="";do o+=String.fromCharCode(s&255),s=s>>>8;while(s>0);e.putByte(o.length|128);for(var a=o.length-1;a>=0;--a)e.putByte(o.charCodeAt(a))}return e.putBuffer(n),e};Q.oidToDer=function(t){var e=t.split("."),r=He.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,a,s,o=2;o<e.length;++o){n=!0,i=[],a=parseInt(e[o],10);do s=a&127,a=a>>>7,n||(s|=128),i.push(s),n=!1;while(a>0);for(var f=i.length-1;f>=0;--f)r.putByte(i[f])}return r};Q.derToOid=function(t){var e;typeof t=="string"&&(t=He.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};Q.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),a=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),o=0;if(t.length>11){var f=t.charAt(10),u=10;f!=="+"&&f!=="-"&&(o=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(a,s,o,0),u&&(f=t.charAt(u),f==="+"||f==="-")){var c=parseInt(t.substr(u+1,2),10),l=parseInt(t.substr(u+4,2),10),y=c*60+l;y*=6e4,f==="+"?e.setTime(+e-y):e.setTime(+e+y)}return e};Q.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),o=parseInt(t.substr(12,2),10),f=0,u=0,c=!1;t.charAt(t.length-1)==="Z"&&(c=!0);var l=t.length-5,y=t.charAt(l);if(y==="+"||y==="-"){var x=parseInt(t.substr(l+1,2),10),v=parseInt(t.substr(l+4,2),10);u=x*60+v,u*=6e4,y==="+"&&(u*=-1),c=!0}return t.charAt(14)==="."&&(f=parseFloat(t.substr(14),10)*1e3),c?(e.setUTCFullYear(r,n,i),e.setUTCHours(a,s,o,f),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(a,s,o,f)),e};Q.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};Q.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};Q.integerToDer=function(t){var e=He.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};Q.derToInteger=function(t){typeof t=="string"&&(t=He.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};Q.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass=="undefined")&&(t.type===e.type||typeof e.type=="undefined"))if(t.constructed===e.constructed||typeof e.constructed=="undefined"){if(i=!0,e.value&&He.util.isArray(e.value))for(var a=0,s=0;i&&s<e.value.length;++s)i=e.value[s].optional||!1,t.value[a]&&(i=Q.validate(t.value[a],e.value[s],r,n),i?++a:e.value[s].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var o;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var f=t.bitStringContents.charCodeAt(0);if(f!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var Vp=/[^\\u0000-\\u00ff]/;Q.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",a=0;a<e*r;++a)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case Q.Class.UNIVERSAL:n+="Universal:";break;case Q.Class.APPLICATION:n+="Application:";break;case Q.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case Q.Class.PRIVATE:n+="Private:";break}if(t.tagClass===Q.Class.UNIVERSAL)switch(n+=t.type,t.type){case Q.Type.NONE:n+=" (None)";break;case Q.Type.BOOLEAN:n+=" (Boolean)";break;case Q.Type.INTEGER:n+=" (Integer)";break;case Q.Type.BITSTRING:n+=" (Bit string)";break;case Q.Type.OCTETSTRING:n+=" (Octet string)";break;case Q.Type.NULL:n+=" (Null)";break;case Q.Type.OID:n+=" (Object Identifier)";break;case Q.Type.ODESC:n+=" (Object Descriptor)";break;case Q.Type.EXTERNAL:n+=" (External or Instance of)";break;case Q.Type.REAL:n+=" (Real)";break;case Q.Type.ENUMERATED:n+=" (Enumerated)";break;case Q.Type.EMBEDDED:n+=" (Embedded PDV)";break;case Q.Type.UTF8:n+=" (UTF8)";break;case Q.Type.ROID:n+=" (Relative Object Identifier)";break;case Q.Type.SEQUENCE:n+=" (Sequence)";break;case Q.Type.SET:n+=" (Set)";break;case Q.Type.PRINTABLESTRING:n+=" (Printable String)";break;case Q.Type.IA5String:n+=" (IA5String (ASCII))";break;case Q.Type.UTCTIME:n+=" (UTC time)";break;case Q.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case Q.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var s=0,o="",a=0;a<t.value.length;++a)t.value[a]!==void 0&&(s+=1,o+=Q.prettyPrint(t.value[a],e+1,r),a+1<t.value.length&&(o+=","));n+=i+"Sub values: "+s+o}else{if(n+=i+"Value: ",t.type===Q.Type.OID){var f=Q.derToOid(t.value);n+=f,He.pki&&He.pki.oids&&f in He.pki.oids&&(n+=" ("+He.pki.oids[f]+") ")}if(t.type===Q.Type.INTEGER)try{n+=Q.derToInteger(t.value)}catch(c){n+="0x"+He.util.bytesToHex(t.value)}else if(t.type===Q.Type.BITSTRING){if(t.value.length>1?n+="0x"+He.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else t.type===Q.Type.OCTETSTRING?(Vp.test(t.value)||(n+="("+t.value+") "),n+="0x"+He.util.bytesToHex(t.value)):t.type===Q.Type.UTF8?n+=He.util.decodeUtf8(t.value):t.type===Q.Type.PRINTABLESTRING||t.type===Q.Type.IA5String?n+=t.value:Vp.test(t.value)?n+="0x"+He.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var ru=T((iC,jp)=>{var Pt=Be();We();jp.exports=Pt.cipher=Pt.cipher||{};Pt.cipher.algorithms=Pt.cipher.algorithms||{};Pt.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Pt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Pt.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Pt.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Pt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Pt.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Pt.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Pt.cipher.algorithms[t]=e};Pt.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Pt.cipher.algorithms?Pt.cipher.algorithms[t]:null};var tu=Pt.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};tu.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Pt.util.createBuffer(),this.output=t.output||Pt.util.createBuffer(),this.mode.start(e)};tu.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};tu.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var iu=T((aC,Gp)=>{var Mt=Be();We();Mt.cipher=Mt.cipher||{};var me=Gp.exports=Mt.cipher.modes=Mt.cipher.modes||{};me.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};me.ecb.prototype.start=function(t){};me.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};me.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};me.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};me.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};me.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};me.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=vo(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};me.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};me.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};me.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};me.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};me.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Mt.util.createBuffer(),this._partialBytes=0};me.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=vo(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};me.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};me.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};me.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Mt.util.createBuffer(),this._partialBytes=0};me.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=vo(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};me.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};me.ofb.prototype.decrypt=me.ofb.prototype.encrypt;me.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Mt.util.createBuffer(),this._partialBytes=0};me.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=vo(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};me.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(a>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}go(this._inBlock)};me.ctr.prototype.decrypt=me.ctr.prototype.encrypt;me.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Mt.util.createBuffer(),this._partialBytes=0,this._R=3774873600};me.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Mt.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Mt.util.createBuffer(t.additionalData):r=Mt.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Mt.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(nu(n*8)))}this._inBlock=this._j0.slice(0),go(this._inBlock),this._partialBytes=0,r=Mt.util.createBuffer(r),this._aDataLength=nu(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};me.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(a<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),go(this._inBlock)};me.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),go(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};me.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Mt.util.createBuffer();var n=this._aDataLength.concat(nu(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};me.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var a=t[i/32|0]&1<<31-i%32;a&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};me.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};me.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,a=this._m[r][i];e[0]^=a[0],e[1]^=a[1],e[2]^=a[2],e[3]^=a[3]}return e};me.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};me.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,a=new Array(i),s=0;s<i;++s){var o=[0,0,0,0],f=s/n|0,u=(n-1-s%n)*e;o[f]=1<<e-1<<u,a[s]=this.generateSubHashTable(this.multiply(o,t),e)}return a};me.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var a=n>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<n;){for(var s=1;s<a;++s){var o=i[a],f=i[s];i[a+s]=[o[0]^f[0],o[1]^f[1],o[2]^f[2],o[3]^f[3]]}a*=2}for(i[0]=[0,0,0,0],a=n+1;a<r;++a){var u=i[a^n];i[a]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function vo(t,e){if(typeof t=="string"&&(t=Mt.util.createBuffer(t)),Mt.util.isArray(t)&&t.length>4){var r=t;t=Mt.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Mt.util.isArray(t)){for(var i=[],a=e/4,n=0;n<a;++n)i.push(t.getInt32());t=i}return t}function go(t){t[t.length-1]=t[t.length-1]+1&4294967295}function nu(t){return[t/4294967296|0,t&4294967295]}});var xo=T((sC,Qp)=>{var Oe=Be();ru();iu();We();Qp.exports=Oe.aes=Oe.aes||{};Oe.aes.startEncrypting=function(t,e,r,n){var i=mo({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};Oe.aes.createEncryptionCipher=function(t,e){return mo({key:t,output:null,decrypt:!1,mode:e})};Oe.aes.startDecrypting=function(t,e,r,n){var i=mo({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};Oe.aes.createDecryptionCipher=function(t,e){return mo({key:t,output:null,decrypt:!0,mode:e})};Oe.aes.Algorithm=function(t,e){au||Yp();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return ou(r._w,n,i,!1)},decrypt:function(n,i){return ou(r._w,n,i,!0)}}}),r._init=!1};Oe.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=Oe.util.createBuffer(e);else if(Oe.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=Oe.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!Oe.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!Oe.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var a=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(a)!==-1;this._w=Wp(e,t.decrypt&&!s),this._init=!0}};Oe.aes._expandKey=function(t,e){return au||Yp(),Wp(t,e)};Oe.aes._updateBlock=ou;Xi("AES-ECB",Oe.cipher.modes.ecb);Xi("AES-CBC",Oe.cipher.modes.cbc);Xi("AES-CFB",Oe.cipher.modes.cfb);Xi("AES-OFB",Oe.cipher.modes.ofb);Xi("AES-CTR",Oe.cipher.modes.ctr);Xi("AES-GCM",Oe.cipher.modes.gcm);function Xi(t,e){var r=function(){return new Oe.aes.Algorithm(t,e)};Oe.cipher.registerAlgorithm(t,r)}var au=!1,ea=4,jt,su,$p,ci,Br;function Yp(){au=!0,$p=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;jt=new Array(256),su=new Array(256),ci=new Array(4),Br=new Array(4);for(var e=0;e<4;++e)ci[e]=new Array(256),Br[e]=new Array(256);for(var r=0,n=0,i,a,s,o,f,u,c,e=0;e<256;++e){o=n^n<<1^n<<2^n<<3^n<<4,o=o>>8^o&255^99,jt[r]=o,su[o]=r,f=t[o],i=t[r],a=t[i],s=t[a],u=f<<24^o<<16^o<<8^(o^f),c=(i^a^s)<<24^(r^s)<<16^(r^a^s)<<8^(r^i^s);for(var l=0;l<4;++l)ci[l][r]=u,Br[l][o]=c,u=u<<24|u>>>8,c=c<<24|c>>>8;r===0?r=n=1:(r=i^t[t[t[i^s]]],n^=t[t[n]])}}function Wp(t,e){for(var r=t.slice(0),n,i=1,a=r.length,s=a+6+1,o=ea*s,f=a;f<o;++f)n=r[f-1],f%a==0?(n=jt[n>>>16&255]<<24^jt[n>>>8&255]<<16^jt[n&255]<<8^jt[n>>>24]^$p[i]<<24,i++):a>6&&f%a==4&&(n=jt[n>>>24]<<24^jt[n>>>16&255]<<16^jt[n>>>8&255]<<8^jt[n&255]),r[f]=r[f-a]^n;if(e){var u,c=Br[0],l=Br[1],y=Br[2],x=Br[3],v=r.slice(0);o=r.length;for(var f=0,b=o-ea;f<o;f+=ea,b-=ea)if(f===0||f===o-ea)v[f]=r[b],v[f+1]=r[b+3],v[f+2]=r[b+2],v[f+3]=r[b+1];else for(var _=0;_<ea;++_)u=r[b+_],v[f+(3&-_)]=c[jt[u>>>24]]^l[jt[u>>>16&255]]^y[jt[u>>>8&255]]^x[jt[u&255]];r=v}return r}function ou(t,e,r,n){var i=t.length/4-1,a,s,o,f,u;n?(a=Br[0],s=Br[1],o=Br[2],f=Br[3],u=su):(a=ci[0],s=ci[1],o=ci[2],f=ci[3],u=jt);var c,l,y,x,v,b,_;c=e[0]^t[0],l=e[n?3:1]^t[1],y=e[2]^t[2],x=e[n?1:3]^t[3];for(var A=3,M=1;M<i;++M)v=a[c>>>24]^s[l>>>16&255]^o[y>>>8&255]^f[x&255]^t[++A],b=a[l>>>24]^s[y>>>16&255]^o[x>>>8&255]^f[c&255]^t[++A],_=a[y>>>24]^s[x>>>16&255]^o[c>>>8&255]^f[l&255]^t[++A],x=a[x>>>24]^s[c>>>16&255]^o[l>>>8&255]^f[y&255]^t[++A],c=v,l=b,y=_;r[0]=u[c>>>24]<<24^u[l>>>16&255]<<16^u[y>>>8&255]<<8^u[x&255]^t[++A],r[n?3:1]=u[l>>>24]<<24^u[y>>>16&255]<<16^u[x>>>8&255]<<8^u[c&255]^t[++A],r[2]=u[y>>>24]<<24^u[x>>>16&255]<<16^u[c>>>8&255]<<8^u[l&255]^t[++A],r[n?1:3]=u[x>>>24]<<24^u[c>>>16&255]<<16^u[l>>>8&255]<<8^u[y&255]^t[++A]}function mo(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=Oe.cipher.createDecipher(r,t.key):n=Oe.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(a,s){var o=null;s instanceof Oe.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,i.call(n,s)},n}});var Xp=T((oC,Zp)=>{var je=Be();ru();iu();We();Zp.exports=je.des=je.des||{};je.des.startEncrypting=function(t,e,r,n){var i=wo({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};je.des.createEncryptionCipher=function(t,e){return wo({key:t,output:null,decrypt:!1,mode:e})};je.des.startDecrypting=function(t,e,r,n){var i=wo({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};je.des.createDecryptionCipher=function(t,e){return wo({key:t,output:null,decrypt:!0,mode:e})};je.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return Jp(r._keys,n,i,!1)},decrypt:function(n,i){return Jp(r._keys,n,i,!0)}}}),r._init=!1};je.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=je.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=P5(e),this._init=!0}};Gr("DES-ECB",je.cipher.modes.ecb);Gr("DES-CBC",je.cipher.modes.cbc);Gr("DES-CFB",je.cipher.modes.cfb);Gr("DES-OFB",je.cipher.modes.ofb);Gr("DES-CTR",je.cipher.modes.ctr);Gr("3DES-ECB",je.cipher.modes.ecb);Gr("3DES-CBC",je.cipher.modes.cbc);Gr("3DES-CFB",je.cipher.modes.cfb);Gr("3DES-OFB",je.cipher.modes.ofb);Gr("3DES-CTR",je.cipher.modes.ctr);function Gr(t,e){var r=function(){return new je.des.Algorithm(t,e)};je.cipher.registerAlgorithm(t,r)}var E5=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],S5=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],_5=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],A5=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],B5=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],I5=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],C5=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],T5=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function P5(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],f=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],c=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],l=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],y=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],x=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],v=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],b=t.length()>8?3:1,_=[],A=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],M=0,q,z=0;z<b;z++){var O=t.getInt32(),U=t.getInt32();q=(O>>>4^U)&252645135,U^=q,O^=q<<4,q=(U>>>-16^O)&65535,O^=q,U^=q<<-16,q=(O>>>2^U)&858993459,U^=q,O^=q<<2,q=(U>>>-16^O)&65535,O^=q,U^=q<<-16,q=(O>>>1^U)&1431655765,U^=q,O^=q<<1,q=(U>>>8^O)&16711935,O^=q,U^=q<<8,q=(O>>>1^U)&1431655765,U^=q,O^=q<<1,q=O<<8|U>>>20&240,O=U<<24|U<<8&16711680|U>>>8&65280|U>>>24&240,U=q;for(var $=0;$<A.length;++$){A[$]?(O=O<<2|O>>>26,U=U<<2|U>>>26):(O=O<<1|O>>>27,U=U<<1|U>>>27),O&=-15,U&=-15;var H=e[O>>>28]|r[O>>>24&15]|n[O>>>20&15]|i[O>>>16&15]|a[O>>>12&15]|s[O>>>8&15]|o[O>>>4&15],X=f[U>>>28]|u[U>>>24&15]|c[U>>>20&15]|l[U>>>16&15]|y[U>>>12&15]|x[U>>>8&15]|v[U>>>4&15];q=(X>>>16^H)&65535,_[M++]=H^q,_[M++]=X^q<<16}}return _}function Jp(t,e,r,n){var i=t.length===32?3:9,a;i===3?a=n?[30,-2,-2]:[0,32,2]:a=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,o=e[0],f=e[1];s=(o>>>4^f)&252645135,f^=s,o^=s<<4,s=(o>>>16^f)&65535,f^=s,o^=s<<16,s=(f>>>2^o)&858993459,o^=s,f^=s<<2,s=(f>>>8^o)&16711935,o^=s,f^=s<<8,s=(o>>>1^f)&1431655765,f^=s,o^=s<<1,o=o<<1|o>>>31,f=f<<1|f>>>31;for(var u=0;u<i;u+=3){for(var c=a[u+1],l=a[u+2],y=a[u];y!=c;y+=l){var x=f^t[y],v=(f>>>4|f<<28)^t[y+1];s=o,o=f,f=s^(S5[x>>>24&63]|A5[x>>>16&63]|I5[x>>>8&63]|T5[x&63]|E5[v>>>24&63]|_5[v>>>16&63]|B5[v>>>8&63]|C5[v&63])}s=o,o=f,f=s}o=o>>>1|o<<31,f=f>>>1|f<<31,s=(o>>>1^f)&1431655765,f^=s,o^=s<<1,s=(f>>>8^o)&16711935,o^=s,f^=s<<8,s=(f>>>2^o)&858993459,o^=s,f^=s<<2,s=(o>>>16^f)&65535,f^=s,o^=s<<16,s=(o>>>4^f)&252645135,f^=s,o^=s<<4,r[0]=o,r[1]=f}function wo(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=je.cipher.createDecipher(r,t.key):n=je.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(a,s){var o=null;s instanceof je.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,i.call(n,s)},n}});var hi=T((fC,e1)=>{var Eo=Be();e1.exports=Eo.md=Eo.md||{};Eo.md.algorithms=Eo.md.algorithms||{}});var r1=T((uC,t1)=>{var mn=Be();hi();We();var M5=t1.exports=mn.hmac=mn.hmac||{};M5.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(a,s){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in mn.md.algorithms)e=mn.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else e=a;if(s===null)s=t;else{if(typeof s=="string")s=mn.util.createBuffer(s);else if(mn.util.isArray(s)){var o=s;s=mn.util.createBuffer();for(var f=0;f<o.length;++f)s.putByte(o[f])}var u=s.length();u>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=mn.util.createBuffer(),n=mn.util.createBuffer(),u=s.length();for(var f=0;f<u;++f){var o=s.at(f);r.putByte(54^o),n.putByte(92^o)}if(u<e.blockLength)for(var o=e.blockLength-u,f=0;f<o;++f)r.putByte(54),n.putByte(92);t=s,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(a){e.update(a)},i.getMac=function(){var a=e.digest().bytes();return e.start(),e.update(n),e.update(a),e.digest()},i.digest=i.getMac,i}});var rs=T(()=>{});var fu=T((lC,n1)=>{var Gt=Be();r1();hi();We();var R5=Gt.pkcs5=Gt.pkcs5||{},xn;Gt.util.isNodejs&&!Gt.options.usePureJavaScript&&(xn=rs());n1.exports=Gt.pbkdf2=R5.pbkdf2=function(t,e,r,n,i,a){if(typeof i=="function"&&(a=i,i=null),Gt.util.isNodejs&&!Gt.options.usePureJavaScript&&xn.pbkdf2&&(i===null||typeof i!="object")&&(xn.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),a?xn.pbkdf2Sync.length===4?xn.pbkdf2(t,e,r,n,function(q,z){if(q)return a(q);a(null,z.toString("binary"))}):xn.pbkdf2(t,e,r,n,i,function(q,z){if(q)return a(q);a(null,z.toString("binary"))}):xn.pbkdf2Sync.length===4?xn.pbkdf2Sync(t,e,r,n).toString("binary"):xn.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i=="undefined"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Gt.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Gt.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var o=new Error("Derived key is too long.");if(a)return a(o);throw o}var f=Math.ceil(n/s),u=n-(f-1)*s,c=Gt.hmac.create();c.start(i,t);var l="",y,x,v;if(!a){for(var b=1;b<=f;++b){c.start(null,null),c.update(e),c.update(Gt.util.int32ToBytes(b)),y=v=c.digest().getBytes();for(var _=2;_<=r;++_)c.start(null,null),c.update(v),x=c.digest().getBytes(),y=Gt.util.xorBytes(y,x,s),v=x;l+=b<f?y:y.substr(0,u)}return l}var b=1,_;function A(){if(b>f)return a(null,l);c.start(null,null),c.update(e),c.update(Gt.util.int32ToBytes(b)),y=v=c.digest().getBytes(),_=2,M()}function M(){if(_<=r)return c.start(null,null),c.update(v),x=c.digest().getBytes(),y=Gt.util.xorBytes(y,x,s),v=x,++_,Gt.util.setImmediate(M);l+=b<f?y:y.substr(0,u),++b,A()}A()}});var s1=T((dC,a1)=>{var So=Be();We();var i1=a1.exports=So.pem=So.pem||{};i1.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=_o(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=_o(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=_o(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=_o(t.headers[i]);return t.procType&&(r+=`\r
`),r+=So.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};i1.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,a;a=r.exec(t),!!a;){var s={type:a[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:So.util.decode64(a[3])};if(e.push(s),!!a[2]){for(var o=a[2].split(i),f=0;a&&f<o.length;){for(var u=o[f].replace(/\s+$/,""),c=f+1;c<o.length;++c){var l=o[c];if(!/\s/.test(l[0]))break;u+=l,f=c}if(a=u.match(n),a){for(var y={name:a[1],values:[]},x=a[2].split(","),v=0;v<x.length;++v)y.values.push(q5(x[v]));if(s.procType)if(!s.contentDomain&&y.name==="Content-Domain")s.contentDomain=x[0]||"";else if(!s.dekInfo&&y.name==="DEK-Info"){if(y.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');s.dekInfo={algorithm:x[0],parameters:x[1]||null}}else s.headers.push(y);else{if(y.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(y.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');s.procType={version:x[0],type:x[1]}}}++f}if(s.procType==="ENCRYPTED"&&!s.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function _o(t){for(var e=t.name+": ",r=[],n=function(f,u){return" "+u},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var a=0,s=-1,i=0;i<e.length;++i,++a)if(a>65&&s!==-1){var o=e[s];o===","?(++s,e=e.substr(0,s)+`\r
 `+e.substr(s)):e=e.substr(0,s)+`\r
`+o+e.substr(s+1),a=i-s-1,s=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(s=i);return e}function q5(t){return t.replace(/^\s+/,"")}});var l1=T((pC,h1)=>{var $r=Be();hi();We();var o1=h1.exports=$r.sha256=$r.sha256||{};$r.md.sha256=$r.md.algorithms.sha256=o1;o1.create=function(){f1||k5();var t=null,e=$r.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return e=$r.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=$r.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=s[1],s[1]=s[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),c1(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=$r.util.createBuffer();i.putBytes(e.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(uu.substr(0,n.blockLength-s));for(var o,f,u=n.fullMessageLength[0]*8,c=0;c<n.fullMessageLength.length-1;++c)o=n.fullMessageLength[c+1]*8,f=o/4294967296>>>0,u+=f,i.putInt32(u>>>0),u=o>>>0;i.putInt32(u);var l={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};c1(l,r,i);var y=$r.util.createBuffer();return y.putInt32(l.h0),y.putInt32(l.h1),y.putInt32(l.h2),y.putInt32(l.h3),y.putInt32(l.h4),y.putInt32(l.h5),y.putInt32(l.h6),y.putInt32(l.h7),y},n};var uu=null,f1=!1,u1=null;function k5(){uu=String.fromCharCode(128),uu+=$r.util.fillString(String.fromCharCode(0),64),u1=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f1=!0}function c1(t,e,r){for(var n,i,a,s,o,f,u,c,l,y,x,v,b,_,A,M=r.length();M>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(c=t.h0,l=t.h1,y=t.h2,x=t.h3,v=t.h4,b=t.h5,_=t.h6,A=t.h7,u=0;u<64;++u)s=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7),o=_^v&(b^_),a=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),f=c&l|y&(c^l),n=A+s+o+u1[u]+e[u],i=a+f,A=_,_=b,b=v,v=x+n>>>0,x=y,y=l,l=c,c=n+i>>>0;t.h0=t.h0+c|0,t.h1=t.h1+l|0,t.h2=t.h2+y|0,t.h3=t.h3+x|0,t.h4=t.h4+v|0,t.h5=t.h5+b|0,t.h6=t.h6+_|0,t.h7=t.h7+A|0,M-=64}}});var p1=T((yC,d1)=>{var Yr=Be();We();var Ao=null;Yr.util.isNodejs&&!Yr.options.usePureJavaScript&&!process.versions["node-webkit"]&&(Ao=rs());var N5=d1.exports=Yr.prng=Yr.prng||{};N5.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(u,c){if(!c)return e.generateSync(u);var l=e.plugin.cipher,y=e.plugin.increment,x=e.plugin.formatKey,v=e.plugin.formatSeed,b=Yr.util.createBuffer();e.key=null,_();function _(A){if(A)return c(A);if(b.length()>=u)return c(null,b.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return Yr.util.nextTick(function(){a(_)});var M=l(e.key,e.seed);e.generated+=M.length,b.putBytes(M),e.key=x(l(e.key,y(e.seed))),e.seed=v(l(e.key,e.seed)),Yr.util.setImmediate(_)}},e.generateSync=function(u){var c=e.plugin.cipher,l=e.plugin.increment,y=e.plugin.formatKey,x=e.plugin.formatSeed;e.key=null;for(var v=Yr.util.createBuffer();v.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&s();var b=c(e.key,e.seed);e.generated+=b.length,v.putBytes(b),e.key=y(c(e.key,l(e.seed))),e.seed=x(c(e.key,e.seed))}return v.getBytes(u)};function a(u){if(e.pools[0].messageLength>=32)return o(),u();var c=32-e.pools[0].messageLength<<5;e.seedFile(c,function(l,y){if(l)return u(l);e.collect(y),o(),u()})}function s(){if(e.pools[0].messageLength>=32)return o();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),o()}function o(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var c=1,l=0;l<32;++l)e.reseeds%c==0&&(u.update(e.pools[l].digest().getBytes()),e.pools[l].start()),c=c<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var y=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(y),e.generated=0}function f(u){var c=null,l=Yr.util.globalScope,y=l.crypto||l.msCrypto;y&&y.getRandomValues&&(c=function(O){return y.getRandomValues(O)});var x=Yr.util.createBuffer();if(c)for(;x.length()<u;){var v=Math.max(1,Math.min(u-x.length(),65536)/4),b=new Uint32Array(Math.floor(v));try{c(b);for(var _=0;_<b.length;++_)x.putInt32(b[_])}catch(O){if(!(typeof QuotaExceededError!="undefined"&&O instanceof QuotaExceededError))throw O}}if(x.length()<u)for(var A,M,q,z=Math.floor(Math.random()*65536);x.length()<u;){M=16807*(z&65535),A=16807*(z>>16),M+=(A&32767)<<16,M+=A>>15,M=(M&2147483647)+(M>>31),z=M&4294967295;for(var _=0;_<3;++_)q=z>>>(_<<3),q^=Math.floor(Math.random()*256),x.putByte(String.fromCharCode(q&255))}return x.getBytes(u)}return Ao?(e.seedFile=function(u,c){Ao.randomBytes(u,function(l,y){if(l)return c(l);c(null,y.toString())})},e.seedFileSync=function(u){return Ao.randomBytes(u).toString()}):(e.seedFile=function(u,c){try{c(null,f(u))}catch(l){c(l)}},e.seedFileSync=f),e.collect=function(u){for(var c=u.length,l=0;l<c;++l)e.pools[e.pool].update(u.substr(l,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,c){for(var l="",y=0;y<c;y+=8)l+=String.fromCharCode(u>>y&255);e.collect(l)},e.registerWorker=function(u){if(u===self)e.seedFile=function(l,y){function x(v){var b=v.data;b.forge&&b.forge.prng&&(self.removeEventListener("message",x),y(b.forge.prng.err,b.forge.prng.bytes))}self.addEventListener("message",x),self.postMessage({forge:{prng:{needed:l}}})};else{var c=function(l){var y=l.data;y.forge&&y.forge.prng&&e.seedFile(y.forge.prng.needed,function(x,v){u.postMessage({forge:{prng:{err:x,bytes:v}}})})};u.addEventListener("message",c)}},e}});var ta=T((bC,cu)=>{var Rt=Be();xo();l1();p1();We();(function(){if(Rt.random&&Rt.random.getBytes){cu.exports=Rt.random;return}(function(t){var e={},r=new Array(4),n=Rt.util.createBuffer();e.formatKey=function(l){var y=Rt.util.createBuffer(l);return l=new Array(4),l[0]=y.getInt32(),l[1]=y.getInt32(),l[2]=y.getInt32(),l[3]=y.getInt32(),Rt.aes._expandKey(l,!1)},e.formatSeed=function(l){var y=Rt.util.createBuffer(l);return l=new Array(4),l[0]=y.getInt32(),l[1]=y.getInt32(),l[2]=y.getInt32(),l[3]=y.getInt32(),l},e.cipher=function(l,y){return Rt.aes._updateBlock(l,y,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(l){return++l[3],l},e.md=Rt.md.sha256;function i(){var l=Rt.prng.create(e);return l.getBytes=function(y,x){return l.generate(y,x)},l.getBytesSync=function(y){return l.generate(y)},l}var a=i(),s=null,o=Rt.util.globalScope,f=o.crypto||o.msCrypto;if(f&&f.getRandomValues&&(s=function(l){return f.getRandomValues(l)}),Rt.options.usePureJavaScript||!Rt.util.isNodejs&&!s){if(typeof window=="undefined"||window.document===void 0,a.collectInt(+new Date,32),typeof navigator!="undefined"){var u="";for(var c in navigator)try{typeof navigator[c]=="string"&&(u+=navigator[c])}catch(l){}a.collect(u),u=null}t&&(t().mousemove(function(l){a.collectInt(l.clientX,16),a.collectInt(l.clientY,16)}),t().keypress(function(l){a.collectInt(l.charCode,8)}))}if(!Rt.random)Rt.random=a;else for(var c in a)Rt.random[c]=a[c];Rt.random.createInstance=i,cu.exports=Rt.random})(typeof jQuery!="undefined"?jQuery:null)})()});var g1=T((vC,v1)=>{var Zt=Be();We();var hu=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],y1=[1,2,3,5],L5=function(t,e){return t<<e&65535|(t&65535)>>16-e},D5=function(t,e){return(t&65535)>>e|t<<16-e&65535};v1.exports=Zt.rc2=Zt.rc2||{};Zt.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Zt.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,a=Math.ceil(i/8),s=255>>(i&7),o;for(o=n;o<128;o++)r.putByte(hu[r.at(o-1)+r.at(o-n)&255]);for(r.setAt(128-a,hu[r.at(128-a)&s]),o=127-a;o>=0;o--)r.setAt(o,hu[r.at(o+1)^r.at(o+a)]);return r};var b1=function(t,e,r){var n=!1,i=null,a=null,s=null,o,f,u,c,l=[];for(t=Zt.rc2.expandKey(t,e),u=0;u<64;u++)l.push(t.getInt16Le());r?(o=function(v){for(u=0;u<4;u++)v[u]+=l[c]+(v[(u+3)%4]&v[(u+2)%4])+(~v[(u+3)%4]&v[(u+1)%4]),v[u]=L5(v[u],y1[u]),c++},f=function(v){for(u=0;u<4;u++)v[u]+=l[v[(u+3)%4]&63]}):(o=function(v){for(u=3;u>=0;u--)v[u]=D5(v[u],y1[u]),v[u]-=l[c]+(v[(u+3)%4]&v[(u+2)%4])+(~v[(u+3)%4]&v[(u+1)%4]),c--},f=function(v){for(u=3;u>=0;u--)v[u]-=l[v[(u+3)%4]&63]});var y=function(v){var b=[];for(u=0;u<4;u++){var _=i.getInt16Le();s!==null&&(r?_^=s.getInt16Le():s.putInt16Le(_)),b.push(_&65535)}c=r?0:63;for(var A=0;A<v.length;A++)for(var M=0;M<v[A][0];M++)v[A][1](b);for(u=0;u<4;u++)s!==null&&(r?s.putInt16Le(b[u]):b[u]^=s.getInt16Le()),a.putInt16Le(b[u])},x=null;return x={start:function(v,b){v&&typeof v=="string"&&(v=Zt.util.createBuffer(v)),n=!1,i=Zt.util.createBuffer(),a=b||new Zt.util.createBuffer,s=v,x.output=a},update:function(v){for(n||i.putBuffer(v);i.length()>=8;)y([[5,o],[1,f],[6,o],[1,f],[5,o]])},finish:function(v){var b=!0;if(r)if(v)b=v(8,i,!r);else{var _=i.length()===8?8:8-i.length();i.fillWithByte(_,_)}if(b&&(n=!0,x.update()),!r&&(b=i.length()===0,b))if(v)b=v(8,a,!r);else{var A=a.length(),M=a.at(A-1);M>A?b=!1:a.truncate(M)}return b}},x};Zt.rc2.startEncrypting=function(t,e,r){var n=Zt.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};Zt.rc2.createEncryptionCipher=function(t,e){return b1(t,e,!0)};Zt.rc2.startDecrypting=function(t,e,r){var n=Zt.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};Zt.rc2.createDecryptionCipher=function(t,e){return b1(t,e,!1)}});var is=T((gC,B1)=>{var lu=Be();B1.exports=lu.jsbn=lu.jsbn||{};var wn,O5=244837814094590,m1=(O5&16777215)==15715070;function V(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}lu.jsbn.BigInteger=V;function Ae(){return new V(null)}function K5(t,e,r,n,i,a){for(;--a>=0;){var s=e*this.data[t++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function F5(t,e,r,n,i,a){for(var s=e&32767,o=e>>15;--a>=0;){var f=this.data[t]&32767,u=this.data[t++]>>15,c=o*f+u*s;f=s*f+((c&32767)<<15)+r.data[n]+(i&1073741823),i=(f>>>30)+(c>>>15)+o*u+(i>>>30),r.data[n++]=f&1073741823}return i}function x1(t,e,r,n,i,a){for(var s=e&16383,o=e>>14;--a>=0;){var f=this.data[t]&16383,u=this.data[t++]>>14,c=o*f+u*s;f=s*f+((c&16383)<<14)+r.data[n]+i,i=(f>>28)+(c>>14)+o*u,r.data[n++]=f&268435455}return i}typeof navigator=="undefined"?(V.prototype.am=x1,wn=28):m1&&navigator.appName=="Microsoft Internet Explorer"?(V.prototype.am=F5,wn=30):m1&&navigator.appName!="Netscape"?(V.prototype.am=K5,wn=26):(V.prototype.am=x1,wn=28);V.prototype.DB=wn;V.prototype.DM=(1<<wn)-1;V.prototype.DV=1<<wn;var du=52;V.prototype.FV=Math.pow(2,du);V.prototype.F1=du-wn;V.prototype.F2=2*wn-du;var U5="0123456789abcdefghijklmnopqrstuvwxyz",Bo=new Array,ra,yr;ra="0".charCodeAt(0);for(yr=0;yr<=9;++yr)Bo[ra++]=yr;ra="a".charCodeAt(0);for(yr=10;yr<36;++yr)Bo[ra++]=yr;ra="A".charCodeAt(0);for(yr=10;yr<36;++yr)Bo[ra++]=yr;function w1(t){return U5.charAt(t)}function E1(t,e){var r=Bo[t.charCodeAt(e)];return r??-1}function z5(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function V5(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function Kn(t){var e=Ae();return e.fromInt(t),e}function H5(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,a=0;--n>=0;){var s=r==8?t[n]&255:E1(t,n);if(s<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,a==0?this.data[this.t++]=s:a+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,a+=r,a>=this.DB&&(a-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&V.ZERO.subTo(this,this)}function j5(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function G5(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,a="",s=this.t,o=this.DB-s*this.DB%e;if(s-- >0)for(o<this.DB&&(n=this.data[s]>>o)>0&&(i=!0,a=w1(n));s>=0;)o<e?(n=(this.data[s]&(1<<o)-1)<<e-o,n|=this.data[--s]>>(o+=this.DB-e)):(n=this.data[s]>>(o-=e)&r,o<=0&&(o+=this.DB,--s)),n>0&&(i=!0),i&&(a+=w1(n));return i?a:"0"}function $5(){var t=Ae();return V.ZERO.subTo(this,t),t}function Y5(){return this.s<0?this.negate():this}function W5(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function Io(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function Q5(){return this.t<=0?0:this.DB*(this.t-1)+Io(this.data[this.t-1]^this.s&this.DM)}function J5(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function Z5(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function X5(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,a=Math.floor(t/this.DB),s=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)e.data[o+a+1]=this.data[o]>>n|s,s=(this.data[o]&i)<<r;for(o=a-1;o>=0;--o)e.data[o]=0;e.data[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()}function ex(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,a=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&a)<<i,e.data[s-r]=this.data[s]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&a)<<i),e.t=this.t-r,e.clamp()}function tx(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function rx(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&V.ZERO.subTo(e,e)}function nx(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function ix(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Ae());var a=Ae(),s=this.s,o=t.s,f=this.DB-Io(n.data[n.t-1]);f>0?(n.lShiftTo(f,a),i.lShiftTo(f,r)):(n.copyTo(a),i.copyTo(r));var u=a.t,c=a.data[u-1];if(c!=0){var l=c*(1<<this.F1)+(u>1?a.data[u-2]>>this.F2:0),y=this.FV/l,x=(1<<this.F1)/l,v=1<<this.F2,b=r.t,_=b-u,A=e??Ae();for(a.dlShiftTo(_,A),r.compareTo(A)>=0&&(r.data[r.t++]=1,r.subTo(A,r)),V.ONE.dlShiftTo(u,A),A.subTo(a,a);a.t<u;)a.data[a.t++]=0;for(;--_>=0;){var M=r.data[--b]==c?this.DM:Math.floor(r.data[b]*y+(r.data[b-1]+v)*x);if((r.data[b]+=a.am(0,M,r,_,0,u))<M)for(a.dlShiftTo(_,A),r.subTo(A,r);r.data[b]<--M;)r.subTo(A,r)}e!=null&&(r.drShiftTo(u,e),s!=o&&V.ZERO.subTo(e,e)),r.t=u,r.clamp(),f>0&&r.rShiftTo(f,r),s<0&&V.ZERO.subTo(r,r)}}}function ax(t){var e=Ae();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(V.ZERO)>0&&t.subTo(e,e),e}function li(t){this.m=t}function sx(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function ox(t){return t}function fx(t){t.divRemTo(this.m,null,t)}function ux(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function cx(t,e){t.squareTo(e),this.reduce(e)}li.prototype.convert=sx;li.prototype.revert=ox;li.prototype.reduce=fx;li.prototype.mulTo=ux;li.prototype.sqrTo=cx;function hx(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function di(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function lx(t){var e=Ae();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(V.ZERO)>0&&this.m.subTo(e,e),e}function dx(t){var e=Ae();return t.copyTo(e),this.reduce(e),e}function px(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function yx(t,e){t.squareTo(e),this.reduce(e)}function bx(t,e,r){t.multiplyTo(e,r),this.reduce(r)}di.prototype.convert=lx;di.prototype.revert=dx;di.prototype.reduce=px;di.prototype.mulTo=bx;di.prototype.sqrTo=yx;function vx(){return(this.t>0?this.data[0]&1:this.s)==0}function gx(t,e){if(t>4294967295||t<1)return V.ONE;var r=Ae(),n=Ae(),i=e.convert(this),a=Io(t)-1;for(i.copyTo(r);--a>=0;)if(e.sqrTo(r,n),(t&1<<a)>0)e.mulTo(n,i,r);else{var s=r;r=n,n=s}return e.revert(r)}function mx(t,e){var r;return t<256||e.isEven()?r=new li(e):r=new di(e),this.exp(t,r)}V.prototype.copyTo=z5;V.prototype.fromInt=V5;V.prototype.fromString=H5;V.prototype.clamp=j5;V.prototype.dlShiftTo=J5;V.prototype.drShiftTo=Z5;V.prototype.lShiftTo=X5;V.prototype.rShiftTo=ex;V.prototype.subTo=tx;V.prototype.multiplyTo=rx;V.prototype.squareTo=nx;V.prototype.divRemTo=ix;V.prototype.invDigit=hx;V.prototype.isEven=vx;V.prototype.exp=gx;V.prototype.toString=G5;V.prototype.negate=$5;V.prototype.abs=Y5;V.prototype.compareTo=W5;V.prototype.bitLength=Q5;V.prototype.mod=ax;V.prototype.modPowInt=mx;V.ZERO=Kn(0);V.ONE=Kn(1);function xx(){var t=Ae();return this.copyTo(t),t}function wx(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function Ex(){return this.t==0?this.s:this.data[0]<<24>>24}function Sx(){return this.t==0?this.s:this.data[0]<<16>>16}function _x(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function Ax(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function Bx(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=Kn(r),i=Ae(),a=Ae(),s="";for(this.divRemTo(n,i,a);i.signum()>0;)s=(r+a.intValue()).toString(t).substr(1)+s,i.divRemTo(n,i,a);return a.intValue().toString(t)+s}function Ix(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,a=0,s=0,o=0;o<t.length;++o){var f=E1(t,o);if(f<0){t.charAt(o)=="-"&&this.signum()==0&&(i=!0);continue}s=e*s+f,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0)}a>0&&(this.dMultiply(Math.pow(e,a)),this.dAddOffset(s,0)),i&&V.ZERO.subTo(this,this)}function Cx(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(V.ONE.shiftLeft(t-1),pu,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(V.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function Tx(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function Px(t){return this.compareTo(t)==0}function Mx(t){return this.compareTo(t)<0?this:t}function Rx(t){return this.compareTo(t)>0?this:t}function qx(t,e,r){var n,i,a=Math.min(t.t,this.t);for(n=0;n<a;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=a;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function kx(t,e){return t&e}function Nx(t){var e=Ae();return this.bitwiseTo(t,kx,e),e}function pu(t,e){return t|e}function Lx(t){var e=Ae();return this.bitwiseTo(t,pu,e),e}function S1(t,e){return t^e}function Dx(t){var e=Ae();return this.bitwiseTo(t,S1,e),e}function _1(t,e){return t&~e}function Ox(t){var e=Ae();return this.bitwiseTo(t,_1,e),e}function Kx(){for(var t=Ae(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function Fx(t){var e=Ae();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function Ux(t){var e=Ae();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function zx(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}function Vx(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+zx(this.data[t]);return this.s<0?this.t*this.DB:-1}function Hx(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function jx(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=Hx(this.data[r]^e);return t}function Gx(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function $x(t,e){var r=V.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function Yx(t){return this.changeBit(t,pu)}function Wx(t){return this.changeBit(t,_1)}function Qx(t){return this.changeBit(t,S1)}function Jx(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function Zx(t){var e=Ae();return this.addTo(t,e),e}function Xx(t){var e=Ae();return this.subTo(t,e),e}function ew(t){var e=Ae();return this.multiplyTo(t,e),e}function tw(t){var e=Ae();return this.divRemTo(t,e,null),e}function rw(t){var e=Ae();return this.divRemTo(t,null,e),e}function nw(t){var e=Ae(),r=Ae();return this.divRemTo(t,e,r),new Array(e,r)}function iw(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function aw(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function ns(){}function A1(t){return t}function sw(t,e,r){t.multiplyTo(e,r)}function ow(t,e){t.squareTo(e)}ns.prototype.convert=A1;ns.prototype.revert=A1;ns.prototype.mulTo=sw;ns.prototype.sqrTo=ow;function fw(t){return this.exp(t,new ns)}function uw(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function cw(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function na(t){this.r2=Ae(),this.q3=Ae(),V.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function hw(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=Ae();return t.copyTo(e),this.reduce(e),e}function lw(t){return t}function dw(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function pw(t,e){t.squareTo(e),this.reduce(e)}function yw(t,e,r){t.multiplyTo(e,r),this.reduce(r)}na.prototype.convert=hw;na.prototype.revert=lw;na.prototype.reduce=dw;na.prototype.mulTo=yw;na.prototype.sqrTo=pw;function bw(t,e){var r=t.bitLength(),n,i=Kn(1),a;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?a=new li(e):e.isEven()?a=new na(e):a=new di(e);var s=new Array,o=3,f=n-1,u=(1<<n)-1;if(s[1]=a.convert(this),n>1){var c=Ae();for(a.sqrTo(s[1],c);o<=u;)s[o]=Ae(),a.mulTo(c,s[o-2],s[o]),o+=2}var l=t.t-1,y,x=!0,v=Ae(),b;for(r=Io(t.data[l])-1;l>=0;){for(r>=f?y=t.data[l]>>r-f&u:(y=(t.data[l]&(1<<r+1)-1)<<f-r,l>0&&(y|=t.data[l-1]>>this.DB+r-f)),o=n;(y&1)==0;)y>>=1,--o;if((r-=o)<0&&(r+=this.DB,--l),x)s[y].copyTo(i),x=!1;else{for(;o>1;)a.sqrTo(i,v),a.sqrTo(v,i),o-=2;o>0?a.sqrTo(i,v):(b=i,i=v,v=b),a.mulTo(v,s[y],i)}for(;l>=0&&(t.data[l]&1<<r)==0;)a.sqrTo(i,v),b=i,i=v,v=b,--r<0&&(r=this.DB-1,--l)}return a.revert(i)}function vw(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return e;for(i<a&&(a=i),a>0&&(e.rShiftTo(a,e),r.rShiftTo(a,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function gw(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function mw(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return V.ZERO;for(var r=t.clone(),n=this.clone(),i=Kn(1),a=Kn(0),s=Kn(0),o=Kn(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(t,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),e?((!s.isEven()||!o.isEven())&&(s.addTo(this,s),o.subTo(t,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(s,i),a.subTo(o,a)):(n.subTo(r,n),e&&s.subTo(i,s),o.subTo(a,o))}if(n.compareTo(V.ONE)!=0)return V.ZERO;if(o.compareTo(t)>=0)return o.subtract(t);if(o.signum()<0)o.addTo(t,o);else return o;return o.signum()<0?o.add(t):o}var Ir=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],xw=(1<<26)/Ir[Ir.length-1];function ww(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=Ir[Ir.length-1]){for(e=0;e<Ir.length;++e)if(r.data[0]==Ir[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Ir.length;){for(var n=Ir[e],i=e+1;i<Ir.length&&n<xw;)n*=Ir[i++];for(n=r.modInt(n);e<i;)if(n%Ir[e++]==0)return!1}return r.millerRabin(t)}function Ew(t){var e=this.subtract(V.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=Sw(),a,s=0;s<t;++s){do a=new V(this.bitLength(),i);while(a.compareTo(V.ONE)<=0||a.compareTo(e)>=0);var o=a.modPow(n,this);if(o.compareTo(V.ONE)!=0&&o.compareTo(e)!=0){for(var f=1;f++<r&&o.compareTo(e)!=0;)if(o=o.modPowInt(2,this),o.compareTo(V.ONE)==0)return!1;if(o.compareTo(e)!=0)return!1}}return!0}function Sw(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}V.prototype.chunkSize=_x;V.prototype.toRadix=Bx;V.prototype.fromRadix=Ix;V.prototype.fromNumber=Cx;V.prototype.bitwiseTo=qx;V.prototype.changeBit=$x;V.prototype.addTo=Jx;V.prototype.dMultiply=iw;V.prototype.dAddOffset=aw;V.prototype.multiplyLowerTo=uw;V.prototype.multiplyUpperTo=cw;V.prototype.modInt=gw;V.prototype.millerRabin=Ew;V.prototype.clone=xx;V.prototype.intValue=wx;V.prototype.byteValue=Ex;V.prototype.shortValue=Sx;V.prototype.signum=Ax;V.prototype.toByteArray=Tx;V.prototype.equals=Px;V.prototype.min=Mx;V.prototype.max=Rx;V.prototype.and=Nx;V.prototype.or=Lx;V.prototype.xor=Dx;V.prototype.andNot=Ox;V.prototype.not=Kx;V.prototype.shiftLeft=Fx;V.prototype.shiftRight=Ux;V.prototype.getLowestSetBit=Vx;V.prototype.bitCount=jx;V.prototype.testBit=Gx;V.prototype.setBit=Yx;V.prototype.clearBit=Wx;V.prototype.flipBit=Qx;V.prototype.add=Zx;V.prototype.subtract=Xx;V.prototype.multiply=ew;V.prototype.divide=tw;V.prototype.remainder=rw;V.prototype.divideAndRemainder=nw;V.prototype.modPow=bw;V.prototype.modInverse=mw;V.prototype.pow=fw;V.prototype.gcd=vw;V.prototype.isProbablePrime=ww});var M1=T((mC,P1)=>{var Wr=Be();hi();We();var I1=P1.exports=Wr.sha1=Wr.sha1||{};Wr.md.sha1=Wr.md.algorithms.sha1=I1;I1.create=function(){C1||_w();var t=null,e=Wr.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return e=Wr.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=Wr.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=s[1],s[1]=s[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),T1(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Wr.util.createBuffer();i.putBytes(e.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(yu.substr(0,n.blockLength-s));for(var o,f,u=n.fullMessageLength[0]*8,c=0;c<n.fullMessageLength.length-1;++c)o=n.fullMessageLength[c+1]*8,f=o/4294967296>>>0,u+=f,i.putInt32(u>>>0),u=o>>>0;i.putInt32(u);var l={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};T1(l,r,i);var y=Wr.util.createBuffer();return y.putInt32(l.h0),y.putInt32(l.h1),y.putInt32(l.h2),y.putInt32(l.h3),y.putInt32(l.h4),y},n};var yu=null,C1=!1;function _w(){yu=String.fromCharCode(128),yu+=Wr.util.fillString(String.fromCharCode(0),64),C1=!0}function T1(t,e,r){for(var n,i,a,s,o,f,u,c,l=r.length();l>=64;){for(i=t.h0,a=t.h1,s=t.h2,o=t.h3,f=t.h4,c=0;c<16;++c)n=r.getInt32(),e[c]=n,u=o^a&(s^o),n=(i<<5|i>>>27)+u+f+1518500249+n,f=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<20;++c)n=e[c-3]^e[c-8]^e[c-14]^e[c-16],n=n<<1|n>>>31,e[c]=n,u=o^a&(s^o),n=(i<<5|i>>>27)+u+f+1518500249+n,f=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<32;++c)n=e[c-3]^e[c-8]^e[c-14]^e[c-16],n=n<<1|n>>>31,e[c]=n,u=a^s^o,n=(i<<5|i>>>27)+u+f+1859775393+n,f=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<40;++c)n=e[c-6]^e[c-16]^e[c-28]^e[c-32],n=n<<2|n>>>30,e[c]=n,u=a^s^o,n=(i<<5|i>>>27)+u+f+1859775393+n,f=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<60;++c)n=e[c-6]^e[c-16]^e[c-28]^e[c-32],n=n<<2|n>>>30,e[c]=n,u=a&s|o&(a^s),n=(i<<5|i>>>27)+u+f+2400959708+n,f=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<80;++c)n=e[c-6]^e[c-16]^e[c-28]^e[c-32],n=n<<2|n>>>30,e[c]=n,u=a^s^o,n=(i<<5|i>>>27)+u+f+3395469782+n,f=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+a|0,t.h2=t.h2+s|0,t.h3=t.h3+o|0,t.h4=t.h4+f|0,l-=64}}});var k1=T((xC,q1)=>{var Qr=Be();We();ta();M1();var R1=q1.exports=Qr.pkcs1=Qr.pkcs1||{};R1.encode_rsa_oaep=function(t,e,r){var n,i,a,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,a=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),a?a.start():a=Qr.md.sha1.create(),s||(s=a);var o=Math.ceil(t.n.bitLength()/8),f=o-2*a.digestLength-2;if(e.length>f){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=f,u}n||(n=""),a.update(n,"raw");for(var c=a.digest(),l="",y=f-e.length,x=0;x<y;x++)l+="\0";var v=c.getBytes()+l+""+e;if(!i)i=Qr.random.getBytes(a.digestLength);else if(i.length!==a.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=a.digestLength,u}var b=Co(i,o-a.digestLength-1,s),_=Qr.util.xorBytes(v,b,v.length),A=Co(_,a.digestLength,s),M=Qr.util.xorBytes(i,A,i.length);return"\0"+M+_};R1.decode_rsa_oaep=function(t,e,r){var n,i,a;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var s=Math.ceil(t.n.bitLength()/8);if(e.length!==s){var _=new Error("RSAES-OAEP encoded message length is invalid.");throw _.length=e.length,_.expectedLength=s,_}if(i===void 0?i=Qr.md.sha1.create():i.start(),a||(a=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var o=i.digest().getBytes(),f=e.charAt(0),u=e.substring(1,i.digestLength+1),c=e.substring(1+i.digestLength),l=Co(c,i.digestLength,a),y=Qr.util.xorBytes(u,l,u.length),x=Co(y,s-i.digestLength-1,a),v=Qr.util.xorBytes(c,x,c.length),b=v.substring(0,i.digestLength),_=f!=="\0",A=0;A<i.digestLength;++A)_|=o.charAt(A)!==b.charAt(A);for(var M=1,q=i.digestLength,z=i.digestLength;z<v.length;z++){var O=v.charCodeAt(z),U=O&1^1,$=M?65534:0;_|=O&$,M=M&U,q+=M}if(_||v.charCodeAt(q)!==1)throw new Error("Invalid RSAES-OAEP padding.");return v.substring(q+1)};function Co(t,e,r){r||(r=Qr.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255);r.start(),r.update(t+s),n+=r.digest().getBytes()}return n.substring(0,e)}});var N1=T((wC,bu)=>{var Fn=Be();We();is();ta();(function(){if(Fn.prime){bu.exports=Fn.prime;return}var t=bu.exports=Fn.prime=Fn.prime||{},e=Fn.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(l,y){return l|y};t.generateProbablePrime=function(l,y,x){typeof y=="function"&&(x=y,y={}),y=y||{};var v=y.algorithm||"PRIMEINC";typeof v=="string"&&(v={name:v}),v.options=v.options||{};var b=y.prng||Fn.random,_={nextBytes:function(A){for(var M=b.getBytesSync(A.length),q=0;q<A.length;++q)A[q]=M.charCodeAt(q)}};if(v.name==="PRIMEINC")return a(l,_,v.options,x);throw new Error("Invalid prime generation algorithm: "+v.name)};function a(l,y,x,v){return"workers"in x?f(l,y,x,v):s(l,y,x,v)}function s(l,y,x,v){var b=u(l,y),_=0,A=c(b.bitLength());"millerRabinTests"in x&&(A=x.millerRabinTests);var M=10;"maxBlockTime"in x&&(M=x.maxBlockTime),o(b,l,y,_,A,M,v)}function o(l,y,x,v,b,_,A){var M=+new Date;do{if(l.bitLength()>y&&(l=u(y,x)),l.isProbablePrime(b))return A(null,l);l.dAddOffset(r[v++%8],0)}while(_<0||+new Date-M<_);Fn.util.setImmediate(function(){o(l,y,x,v,b,_,A)})}function f(l,y,x,v){if(typeof Worker=="undefined")return s(l,y,x,v);var b=u(l,y),_=x.workers,A=x.workLoad||100,M=A*30/8,q=x.workerScript||"forge/prime.worker.js";if(_===-1)return Fn.util.estimateCores(function(O,U){O&&(U=2),_=U-1,z()});z();function z(){_=Math.max(1,_);for(var O=[],U=0;U<_;++U)O[U]=new Worker(q);for(var $=_,U=0;U<_;++U)O[U].addEventListener("message",X);var H=!1;function X(B){if(!H){--$;var h=B.data;if(h.found){for(var p=0;p<O.length;++p)O[p].terminate();return H=!0,v(null,new e(h.prime,16))}b.bitLength()>l&&(b=u(l,y));var g=b.toString(16);B.target.postMessage({hex:g,workLoad:A}),b.dAddOffset(M,0)}}}}function u(l,y){var x=new e(l,y),v=l-1;return x.testBit(v)||x.bitwiseTo(e.ONE.shiftLeft(v),i,x),x.dAddOffset(31-x.mod(n).byteValue(),0),x}function c(l){return l<=100?27:l<=150?18:l<=200?15:l<=250?12:l<=300?9:l<=350?8:l<=400?7:l<=500?6:l<=600?5:l<=800?4:l<=1250?3:2}})()});var Po=T((EC,z1)=>{var pe=Be();Zi();is();yo();k1();N1();ta();We();typeof Ee=="undefined"&&(Ee=pe.jsbn.BigInteger);var Ee,vu=pe.util.isNodejs?rs():null,k=pe.asn1,br=pe.util;pe.pki=pe.pki||{};z1.exports=pe.pki.rsa=pe.rsa=pe.rsa||{};var ye=pe.pki,Aw=[6,4,2,4,2,4,6,2],Bw={name:"PrivateKeyInfo",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:k.Class.UNIVERSAL,type:k.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},Iw={name:"RSAPrivateKey",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Cw={name:"RSAPublicKey",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},Tw=pe.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:k.Class.UNIVERSAL,type:k.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Pw=function(t){var e;if(t.algorithm in ye.oids)e=ye.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=k.oidToDer(e).getBytes(),i=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]),a=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]);a.value.push(k.create(k.Class.UNIVERSAL,k.Type.OID,!1,n)),a.value.push(k.create(k.Class.UNIVERSAL,k.Type.NULL,!1,""));var s=k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(a),i.value.push(s),k.toDer(i).getBytes()},L1=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Ee.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Ee.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new Ee(pe.util.bytesToHex(pe.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(Ee.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),a=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(a)<0;)i=i.add(e.p);var s=i.subtract(a).multiply(e.qInv).mod(e.p).multiply(e.q).add(a);return s=s.multiply(n.modInverse(e.n)).mod(e.n),s};ye.rsa.encrypt=function(t,e,r){var n=r,i,a=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=D1(t,e,r)):(i=pe.util.createBuffer(),i.putBytes(t));for(var s=new Ee(i.toHex(),16),o=L1(s,e,n),f=o.toString(16),u=pe.util.createBuffer(),c=a-Math.ceil(f.length/2);c>0;)u.putByte(0),--c;return u.putBytes(pe.util.hexToBytes(f)),u.getBytes()};ye.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=t.length,a.expected=i,a}var s=new Ee(pe.util.createBuffer(t).toHex(),16);if(s.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=L1(s,e,r),f=o.toString(16),u=pe.util.createBuffer(),c=i-Math.ceil(f.length/2);c>0;)u.putByte(0),--c;return u.putBytes(pe.util.hexToBytes(f)),n!==!1?To(u.getBytes(),e,r):u.getBytes()};ye.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||pe.random,i={nextBytes:function(o){for(var f=n.getBytesSync(o.length),u=0;u<o.length;++u)o[u]=f.charCodeAt(u)}},a=r.algorithm||"PRIMEINC",s;if(a==="PRIMEINC")s={algorithm:a,state:0,bits:t,rng:i,eInt:e||65537,e:new Ee(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+a);return s};ye.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Ee(null);r.fromInt(30);for(var n=0,i=function(l,y){return l|y},a=+new Date,s,o=0;t.keys===null&&(e<=0||o<e);){if(t.state===0){var f=t.p===null?t.pBits:t.qBits,u=f-1;t.pqState===0?(t.num=new Ee(f,t.rng),t.num.testBit(u)||t.num.bitwiseTo(Ee.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>f?t.pqState=0:t.num.isProbablePrime(Rw(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(Aw[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(Ee.ONE).gcd(t.e).compareTo(Ee.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Ee.ONE),t.q1=t.q.subtract(Ee.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Ee.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var c=t.e.modInverse(t.phi);t.keys={privateKey:ye.rsa.setPrivateKey(t.n,t.e,c,t.p,t.q,c.mod(t.p1),c.mod(t.q1),t.q.modInverse(t.p)),publicKey:ye.rsa.setPublicKey(t.n,t.e)}}s=+new Date,o+=s-a,a=s}return t.keys!==null};ye.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!pe.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(O1("generateKeyPair"))return vu.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,f,u){if(o)return n(o);n(null,{privateKey:ye.privateKeyFromPem(u),publicKey:ye.publicKeyFromPem(f)})});if(K1("generateKey")&&K1("exportKey"))return br.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:U1(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return br.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){n(o)}).then(function(o){if(o){var f=ye.privateKeyFromAsn1(k.fromDer(pe.util.createBuffer(o)));n(null,{privateKey:f,publicKey:ye.setRsaPublicKey(f.n,f.e)})}});if(F1("generateKey")&&F1("exportKey")){var i=br.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:U1(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(o){var f=o.target.result,u=br.globalScope.msCrypto.subtle.exportKey("pkcs8",f.privateKey);u.oncomplete=function(c){var l=c.target.result,y=ye.privateKeyFromAsn1(k.fromDer(pe.util.createBuffer(l)));n(null,{privateKey:y,publicKey:ye.setRsaPublicKey(y.n,y.e)})},u.onerror=function(c){n(c)}},i.onerror=function(o){n(o)};return}}else if(O1("generateKeyPairSync")){var a=vu.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:ye.privateKeyFromPem(a.privateKey),publicKey:ye.publicKeyFromPem(a.publicKey)}}}var s=ye.rsa.createKeyPairGenerationState(t,e,r);if(!n)return ye.rsa.stepKeyPairGenerationState(s,0),s.keys;Mw(s,r,n)};ye.setRsaPublicKey=ye.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,a){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(o,f,u){return D1(o,f,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(o,f){return pe.pkcs1.encode_rsa_oaep(f,o,a)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(o){return o}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return ye.rsa.encrypt(s,r,!0)},r.verify=function(n,i,a){typeof a=="string"?a=a.toUpperCase():a===void 0&&(a="RSASSA-PKCS1-V1_5"),a==="RSASSA-PKCS1-V1_5"?a={verify:function(o,f){f=To(f,r,!0);var u=k.fromDer(f);return o===u.value[1].value}}:(a==="NONE"||a==="NULL"||a===null)&&(a={verify:function(o,f){return f=To(f,r,!0),o===f}});var s=ye.rsa.decrypt(i,r,!0,!1);return a.verify(n,s,r.n.bitLength())},r};ye.setRsaPrivateKey=ye.rsa.setPrivateKey=function(t,e,r,n,i,a,s,o){var f={n:t,e,d:r,p:n,q:i,dP:a,dQ:s,qInv:o};return f.decrypt=function(u,c,l){typeof c=="string"?c=c.toUpperCase():c===void 0&&(c="RSAES-PKCS1-V1_5");var y=ye.rsa.decrypt(u,f,!1,!1);if(c==="RSAES-PKCS1-V1_5")c={decode:To};else if(c==="RSA-OAEP"||c==="RSAES-OAEP")c={decode:function(x,v){return pe.pkcs1.decode_rsa_oaep(v,x,l)}};else if(["RAW","NONE","NULL",null].indexOf(c)!==-1)c={decode:function(x){return x}};else throw new Error('Unsupported encryption scheme: "'+c+'".');return c.decode(y,f,!1)},f.sign=function(u,c){var l=!1;typeof c=="string"&&(c=c.toUpperCase()),c===void 0||c==="RSASSA-PKCS1-V1_5"?(c={encode:Pw},l=1):(c==="NONE"||c==="NULL"||c===null)&&(c={encode:function(){return u}},l=1);var y=c.encode(u,f.n.bitLength());return ye.rsa.encrypt(y,f,l)},f};ye.wrapRsaPrivateKey=function(t){return k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,k.integerToDer(0).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(ye.oids.rsaEncryption).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.NULL,!1,"")]),k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,k.toDer(t).getBytes())])};ye.privateKeyFromAsn1=function(t){var e={},r=[];if(k.validate(t,Bw,e,r)&&(t=k.fromDer(pe.util.createBuffer(e.privateKey))),e={},r=[],!k.validate(t,Iw,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,a,s,o,f,u,c,l;return i=pe.util.createBuffer(e.privateKeyModulus).toHex(),a=pe.util.createBuffer(e.privateKeyPublicExponent).toHex(),s=pe.util.createBuffer(e.privateKeyPrivateExponent).toHex(),o=pe.util.createBuffer(e.privateKeyPrime1).toHex(),f=pe.util.createBuffer(e.privateKeyPrime2).toHex(),u=pe.util.createBuffer(e.privateKeyExponent1).toHex(),c=pe.util.createBuffer(e.privateKeyExponent2).toHex(),l=pe.util.createBuffer(e.privateKeyCoefficient).toHex(),ye.setRsaPrivateKey(new Ee(i,16),new Ee(a,16),new Ee(s,16),new Ee(o,16),new Ee(f,16),new Ee(u,16),new Ee(c,16),new Ee(l,16))};ye.privateKeyToAsn1=ye.privateKeyToRSAPrivateKey=function(t){return k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,k.integerToDer(0).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,Jr(t.n)),k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,Jr(t.e)),k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,Jr(t.d)),k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,Jr(t.p)),k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,Jr(t.q)),k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,Jr(t.dP)),k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,Jr(t.dQ)),k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,Jr(t.qInv))])};ye.publicKeyFromAsn1=function(t){var e={},r=[];if(k.validate(t,Tw,e,r)){var n=k.derToOid(e.publicKeyOid);if(n!==ye.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!k.validate(t,Cw,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var a=pe.util.createBuffer(e.publicKeyModulus).toHex(),s=pe.util.createBuffer(e.publicKeyExponent).toHex();return ye.setRsaPublicKey(new Ee(a,16),new Ee(s,16))};ye.publicKeyToAsn1=ye.publicKeyToSubjectPublicKeyInfo=function(t){return k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(ye.oids.rsaEncryption).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.NULL,!1,"")]),k.create(k.Class.UNIVERSAL,k.Type.BITSTRING,!1,[ye.publicKeyToRSAPublicKey(t)])])};ye.publicKeyToRSAPublicKey=function(t){return k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,Jr(t.n)),k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,Jr(t.e))])};function D1(t,e,r){var n=pe.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=t.length,a.max=i-11,a}n.putByte(0),n.putByte(r);var s=i-3-t.length,o;if(r===0||r===1){o=r===0?0:255;for(var f=0;f<s;++f)n.putByte(o)}else for(;s>0;){for(var u=0,c=pe.random.getBytes(s),f=0;f<s;++f)o=c.charCodeAt(f),o===0?++u:n.putByte(o);s=u}return n.putByte(0),n.putBytes(t),n}function To(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),a=pe.util.createBuffer(t),s=a.getByte(),o=a.getByte();if(s!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof n=="undefined")throw new Error("Encryption block is invalid.");var f=0;if(o===0){f=i-3-n;for(var u=0;u<f;++u)if(a.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(f=0;a.length()>1;){if(a.getByte()!==255){--a.read;break}++f}else if(o===2)for(f=0;a.length()>1;){if(a.getByte()===0){--a.read;break}++f}var c=a.getByte();if(c!==0||f!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function Mw(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){a(t.pBits,function(o,f){if(o)return r(o);if(t.p=f,t.q!==null)return s(o,t.q);a(t.qBits,s)})}function a(o,f){pe.prime.generateProbablePrime(o,n,f)}function s(o,f){if(o)return r(o);if(t.q=f,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(Ee.ONE).gcd(t.e).compareTo(Ee.ONE)!==0){t.p=null,i();return}if(t.q.subtract(Ee.ONE).gcd(t.e).compareTo(Ee.ONE)!==0){t.q=null,a(t.qBits,s);return}if(t.p1=t.p.subtract(Ee.ONE),t.q1=t.q.subtract(Ee.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Ee.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,a(t.qBits,s);return}var c=t.e.modInverse(t.phi);t.keys={privateKey:ye.rsa.setPrivateKey(t.n,t.e,c,t.p,t.q,c.mod(t.p1),c.mod(t.q1),t.q.modInverse(t.p)),publicKey:ye.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function Jr(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=pe.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function Rw(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function O1(t){return pe.util.isNodejs&&typeof vu[t]=="function"}function K1(t){return typeof br.globalScope!="undefined"&&typeof br.globalScope.crypto=="object"&&typeof br.globalScope.crypto.subtle=="object"&&typeof br.globalScope.crypto.subtle[t]=="function"}function F1(t){return typeof br.globalScope!="undefined"&&typeof br.globalScope.msCrypto=="object"&&typeof br.globalScope.msCrypto.subtle=="object"&&typeof br.globalScope.msCrypto.subtle[t]=="function"}function U1(t){for(var e=pe.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var Y1=T((SC,$1)=>{var J=Be();xo();Zi();Xp();hi();yo();fu();s1();ta();g1();Po();We();typeof V1=="undefined"&&(V1=J.jsbn.BigInteger);var V1,F=J.asn1,ve=J.pki=J.pki||{};$1.exports=ve.pbe=J.pbe=J.pbe||{};var pi=ve.oids,qw={name:"EncryptedPrivateKeyInfo",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:F.Class.UNIVERSAL,type:F.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},kw={name:"PBES2Algorithms",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:F.Class.UNIVERSAL,type:F.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:F.Class.UNIVERSAL,type:F.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:F.Class.UNIVERSAL,type:F.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:F.Class.UNIVERSAL,type:F.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Nw={name:"pkcs-12PbeParams",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:F.Class.UNIVERSAL,type:F.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:F.Class.UNIVERSAL,type:F.Type.INTEGER,constructed:!1,capture:"iterations"}]};ve.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=J.random.getBytesSync(r.saltSize),i=r.count,a=F.integerToDer(i),s,o,f;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,c,l;switch(r.algorithm){case"aes128":s=16,u=16,c=pi["aes128-CBC"],l=J.aes.createEncryptionCipher;break;case"aes192":s=24,u=16,c=pi["aes192-CBC"],l=J.aes.createEncryptionCipher;break;case"aes256":s=32,u=16,c=pi["aes256-CBC"],l=J.aes.createEncryptionCipher;break;case"des":s=8,u=8,c=pi.desCBC,l=J.des.createEncryptionCipher;break;default:var y=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw y.algorithm=r.algorithm,y}var x="hmacWith"+r.prfAlgorithm.toUpperCase(),v=G1(x),b=J.pkcs5.pbkdf2(e,n,i,s,v),_=J.random.getBytesSync(u),A=l(b);A.start(_),A.update(F.toDer(t)),A.finish(),f=A.output.getBytes();var M=Lw(n,a,s,x);o=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(pi.pkcs5PBES2).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(pi.pkcs5PBKDF2).getBytes()),M]),F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(c).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,_)])])])}else if(r.algorithm==="3des"){s=24;var q=new J.util.ByteBuffer(n),b=ve.pbe.generatePkcs12Key(e,q,1,i,s),_=ve.pbe.generatePkcs12Key(e,q,2,i,s),A=J.des.createEncryptionCipher(b);A.start(_),A.update(F.toDer(t)),A.finish(),f=A.output.getBytes(),o=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(pi["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,n),F.create(F.Class.UNIVERSAL,F.Type.INTEGER,!1,a.getBytes())])])}else{var y=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw y.algorithm=r.algorithm,y}var z=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[o,F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,f)]);return z};ve.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!F.validate(t,qw,n,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=F.derToOid(n.encryptionOid),o=ve.pbe.getCipher(s,n.encryptionParams,e),f=J.util.createBuffer(n.encryptedData);return o.update(f),o.finish()&&(r=F.fromDer(o.output)),r};ve.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:F.toDer(t).getBytes()};return J.pem.encode(r,{maxline:e})};ve.encryptedPrivateKeyFromPem=function(t){var e=J.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return F.fromDer(e.body)};ve.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=ve.wrapRsaPrivateKey(ve.privateKeyToAsn1(t));return n=ve.encryptPrivateKeyInfo(n,e,r),ve.encryptedPrivateKeyToPem(n)}var i,a,s,o;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,a=J.random.getBytesSync(16),o=J.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,a=J.random.getBytesSync(16),o=J.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,a=J.random.getBytesSync(16),o=J.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,a=J.random.getBytesSync(8),o=J.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,a=J.random.getBytesSync(8),o=J.des.createEncryptionCipher;break;default:var f=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw f.algorithm=r.algorithm,f}var u=J.pbe.opensslDeriveBytes(e,a.substr(0,8),s),c=o(u);c.start(a),c.update(F.toDer(ve.privateKeyToAsn1(t))),c.finish();var l={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:J.util.bytesToHex(a).toUpperCase()},body:c.output.getBytes()};return J.pem.encode(l)};ve.decryptRsaPrivateKey=function(t,e){var r=null,n=J.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var a,s;switch(n.dekInfo.algorithm){case"DES-CBC":a=8,s=J.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,s=J.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,s=J.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,s=J.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,s=J.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,s=function(l){return J.rc2.createDecryptionCipher(l,40)};break;case"RC2-64-CBC":a=8,s=function(l){return J.rc2.createDecryptionCipher(l,64)};break;case"RC2-128-CBC":a=16,s=function(l){return J.rc2.createDecryptionCipher(l,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var o=J.util.hexToBytes(n.dekInfo.parameters),f=J.pbe.opensslDeriveBytes(e,o.substr(0,8),a),u=s(f);if(u.start(o),u.update(J.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=ve.decryptPrivateKeyInfo(F.fromDer(r),e):r=F.fromDer(r),r!==null&&(r=ve.privateKeyFromAsn1(r)),r};ve.pbe.generatePkcs12Key=function(t,e,r,n,i,a){var s,o;if(typeof a=="undefined"||a===null){if(!("sha1"in J.md))throw new Error('"sha1" hash algorithm unavailable.');a=J.md.sha1.create()}var f=a.digestLength,u=a.blockLength,c=new J.util.ByteBuffer,l=new J.util.ByteBuffer;if(t!=null){for(o=0;o<t.length;o++)l.putInt16(t.charCodeAt(o));l.putInt16(0)}var y=l.length(),x=e.length(),v=new J.util.ByteBuffer;v.fillWithByte(r,u);var b=u*Math.ceil(x/u),_=new J.util.ByteBuffer;for(o=0;o<b;o++)_.putByte(e.at(o%x));var A=u*Math.ceil(y/u),M=new J.util.ByteBuffer;for(o=0;o<A;o++)M.putByte(l.at(o%y));var q=_;q.putBuffer(M);for(var z=Math.ceil(i/f),O=1;O<=z;O++){var U=new J.util.ByteBuffer;U.putBytes(v.bytes()),U.putBytes(q.bytes());for(var $=0;$<n;$++)a.start(),a.update(U.getBytes()),U=a.digest();var H=new J.util.ByteBuffer;for(o=0;o<u;o++)H.putByte(U.at(o%f));var X=Math.ceil(x/u)+Math.ceil(y/u),B=new J.util.ByteBuffer;for(s=0;s<X;s++){var h=new J.util.ByteBuffer(q.getBytes(u)),p=511;for(o=H.length()-1;o>=0;o--)p=p>>8,p+=H.at(o)+h.at(o),h.setAt(o,p&255);B.putBuffer(h)}q=B,c.putBuffer(U)}return c.truncate(c.length()-i),c};ve.pbe.getCipher=function(t,e,r){switch(t){case ve.oids.pkcs5PBES2:return ve.pbe.getCipherForPBES2(t,e,r);case ve.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case ve.oids["pbewithSHAAnd40BitRC2-CBC"]:return ve.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};ve.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!F.validate(e,kw,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}if(t=F.derToOid(n.kdfOid),t!==ve.oids.pkcs5PBKDF2){var a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw a.oid=t,a.supportedOids=["pkcs5PBKDF2"],a}if(t=F.derToOid(n.encOid),t!==ve.oids["aes128-CBC"]&&t!==ve.oids["aes192-CBC"]&&t!==ve.oids["aes256-CBC"]&&t!==ve.oids["des-EDE3-CBC"]&&t!==ve.oids.desCBC){var a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw a.oid=t,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a}var s=n.kdfSalt,o=J.util.createBuffer(n.kdfIterationCount);o=o.getInt(o.length()<<3);var f,u;switch(ve.oids[t]){case"aes128-CBC":f=16,u=J.aes.createDecryptionCipher;break;case"aes192-CBC":f=24,u=J.aes.createDecryptionCipher;break;case"aes256-CBC":f=32,u=J.aes.createDecryptionCipher;break;case"des-EDE3-CBC":f=24,u=J.des.createDecryptionCipher;break;case"desCBC":f=8,u=J.des.createDecryptionCipher;break}var c=j1(n.prfOid),l=J.pkcs5.pbkdf2(r,s,o,f,c),y=n.encIv,x=u(l);return x.start(y),x};ve.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!F.validate(e,Nw,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=J.util.createBuffer(n.salt),o=J.util.createBuffer(n.iterations);o=o.getInt(o.length()<<3);var f,u,c;switch(t){case ve.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:f=24,u=8,c=J.des.startDecrypting;break;case ve.oids["pbewithSHAAnd40BitRC2-CBC"]:f=5,u=8,c=function(b,_){var A=J.rc2.createDecryptionCipher(b,40);return A.start(_,null),A};break;default:var a=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw a.oid=t,a}var l=j1(n.prfOid),y=ve.pbe.generatePkcs12Key(r,s,1,o,f,l);l.start();var x=ve.pbe.generatePkcs12Key(r,s,2,o,u,l);return c(y,x)};ve.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n=="undefined"||n===null){if(!("md5"in J.md))throw new Error('"md5" hash algorithm unavailable.');n=J.md.md5.create()}e===null&&(e="");for(var i=[H1(n,t+e)],a=16,s=1;a<r;++s,a+=16)i.push(H1(n,i[s-1]+t+e));return i.join("").substr(0,r)};function H1(t,e){return t.start().update(e).digest().getBytes()}function j1(t){var e;if(!t)e="hmacWithSHA1";else if(e=ve.oids[F.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return G1(e)}function G1(t){var e=J.md;switch(t){case"hmacWithSHA224":e=J.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function Lw(t,e,r,n){var i=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,t),F.create(F.Class.UNIVERSAL,F.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(F.create(F.Class.UNIVERSAL,F.Type.INTEGER,!1,J.util.hexToBytes(r.toString(16))),F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(ve.oids[n]).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.NULL,!1,"")])),i}});var Un={};It(Un,{concat:()=>Dw});function Dw(t,e){e||(e=t.reduce((i,a)=>i+a.length,0));let r=new Uint8Array(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return r}var zn=Te(()=>{});var as=T(W1=>{"use strict";W1.get=(t=self)=>{let e=t.crypto||t.msCrypto;if(!e||!e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}});var gu=T((AC,J1)=>{"use strict";var{concat:Ow}=(zn(),Un),{fromString:Q1}=(hr(),cr),Kw=as();function Fw({algorithm:t="AES-GCM",nonceLength:e=12,keyLength:r=16,digest:n="SHA-256",saltLength:i=16,iterations:a=32767}={}){let s=Kw.get();r*=8;async function o(u,c){let l=s.getRandomValues(new Uint8Array(i)),y=s.getRandomValues(new Uint8Array(e)),x={name:t,iv:y},v={name:"PBKDF2",salt:l,iterations:a,hash:{name:n}},b=await s.subtle.importKey("raw",Q1(c),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),_=await s.subtle.deriveKey(v,b,{name:t,length:r},!0,["encrypt"]),A=await s.subtle.encrypt(x,_,u);return Ow([l,x.iv,new Uint8Array(A)])}async function f(u,c){let l=u.slice(0,i),y=u.slice(i,i+e),x=u.slice(i+e),v={name:t,iv:y},b={name:"PBKDF2",salt:l,iterations:a,hash:{name:n}},_=await s.subtle.importKey("raw",Q1(c),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),A=await s.subtle.deriveKey(b,_,{name:t,length:r},!0,["decrypt"]),M=await s.subtle.decrypt(v,A,x);return new Uint8Array(M)}return{encrypt:o,decrypt:f}}J1.exports={create:Fw}});var X1=T((BC,Z1)=>{"use strict";var{base64:Uw}=(Ua(),Li),zw=gu();Z1.exports={import:async function(t,e){let r=Uw.decode(t);return await zw.create().decrypt(r,e)}}});var wu=T((IC,ny)=>{var ze=Be();hi();We();var ss=ny.exports=ze.sha512=ze.sha512||{};ze.md.sha512=ze.md.algorithms.sha512=ss;var ey=ze.sha384=ze.sha512.sha384=ze.sha512.sha384||{};ey.create=function(){return ss.create("SHA-384")};ze.md.sha384=ze.md.algorithms.sha384=ey;ze.sha512.sha256=ze.sha512.sha256||{create:function(){return ss.create("SHA-512/256")}};ze.md["sha512/256"]=ze.md.algorithms["sha512/256"]=ze.sha512.sha256;ze.sha512.sha224=ze.sha512.sha224||{create:function(){return ss.create("SHA-512/224")}};ze.md["sha512/224"]=ze.md.algorithms["sha512/224"]=ze.sha512.sha224;ss.create=function(t){if(ty||Vw(),typeof t=="undefined"&&(t="SHA-512"),!(t in yi))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=yi[t],r=null,n=ze.util.createBuffer(),i=new Array(80),a=0;a<80;++a)i[a]=new Array(2);var s=64;switch(t){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var o={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var f=o.messageLengthSize/4,u=0;u<f;++u)o.fullMessageLength.push(0);n=ze.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return o},o.start(),o.update=function(f,u){u==="utf8"&&(f=ze.util.encodeUtf8(f));var c=f.length;o.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var l=o.fullMessageLength.length-1;l>=0;--l)o.fullMessageLength[l]+=c[1],c[1]=c[0]+(o.fullMessageLength[l]/4294967296>>>0),o.fullMessageLength[l]=o.fullMessageLength[l]>>>0,c[0]=c[1]/4294967296>>>0;return n.putBytes(f),ry(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),o},o.digest=function(){var f=ze.util.createBuffer();f.putBytes(n.bytes());var u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,c=u&o.blockLength-1;f.putBytes(mu.substr(0,o.blockLength-c));for(var l,y,x=o.fullMessageLength[0]*8,v=0;v<o.fullMessageLength.length-1;++v)l=o.fullMessageLength[v+1]*8,y=l/4294967296>>>0,x+=y,f.putInt32(x>>>0),x=l>>>0;f.putInt32(x);for(var b=new Array(r.length),v=0;v<r.length;++v)b[v]=r[v].slice(0);ry(b,i,f);var _=ze.util.createBuffer(),A;t==="SHA-512"?A=b.length:t==="SHA-384"?A=b.length-2:A=b.length-4;for(var v=0;v<A;++v)_.putInt32(b[v][0]),(v!==A-1||t!=="SHA-512/224")&&_.putInt32(b[v][1]);return _},o};var mu=null,ty=!1,xu=null,yi=null;function Vw(){mu=String.fromCharCode(128),mu+=ze.util.fillString(String.fromCharCode(0),128),xu=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],yi={},yi["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],yi["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],yi["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],yi["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],ty=!0}function ry(t,e,r){for(var n,i,a,s,o,f,u,c,l,y,x,v,b,_,A,M,q,z,O,U,$,H,X,B,h,p,g,m,w,C,I,E,d,S,G,Y=r.length();Y>=128;){for(w=0;w<16;++w)e[w][0]=r.getInt32()>>>0,e[w][1]=r.getInt32()>>>0;for(;w<80;++w)E=e[w-2],C=E[0],I=E[1],n=((C>>>19|I<<13)^(I>>>29|C<<3)^C>>>6)>>>0,i=((C<<13|I>>>19)^(I<<3|C>>>29)^(C<<26|I>>>6))>>>0,S=e[w-15],C=S[0],I=S[1],a=((C>>>1|I<<31)^(C>>>8|I<<24)^C>>>7)>>>0,s=((C<<31|I>>>1)^(C<<24|I>>>8)^(C<<25|I>>>7))>>>0,d=e[w-7],G=e[w-16],I=i+d[1]+s+G[1],e[w][0]=n+d[0]+a+G[0]+(I/4294967296>>>0)>>>0,e[w][1]=I>>>0;for(b=t[0][0],_=t[0][1],A=t[1][0],M=t[1][1],q=t[2][0],z=t[2][1],O=t[3][0],U=t[3][1],$=t[4][0],H=t[4][1],X=t[5][0],B=t[5][1],h=t[6][0],p=t[6][1],g=t[7][0],m=t[7][1],w=0;w<80;++w)u=(($>>>14|H<<18)^($>>>18|H<<14)^(H>>>9|$<<23))>>>0,c=(($<<18|H>>>14)^($<<14|H>>>18)^(H<<23|$>>>9))>>>0,l=(h^$&(X^h))>>>0,y=(p^H&(B^p))>>>0,o=((b>>>28|_<<4)^(_>>>2|b<<30)^(_>>>7|b<<25))>>>0,f=((b<<4|_>>>28)^(_<<30|b>>>2)^(_<<25|b>>>7))>>>0,x=(b&A|q&(b^A))>>>0,v=(_&M|z&(_^M))>>>0,I=m+c+y+xu[w][1]+e[w][1],n=g+u+l+xu[w][0]+e[w][0]+(I/4294967296>>>0)>>>0,i=I>>>0,I=f+v,a=o+x+(I/4294967296>>>0)>>>0,s=I>>>0,g=h,m=p,h=X,p=B,X=$,B=H,I=U+i,$=O+n+(I/4294967296>>>0)>>>0,H=I>>>0,O=q,U=z,q=A,z=M,A=b,M=_,I=i+s,b=n+a+(I/4294967296>>>0)>>>0,_=I>>>0;I=t[0][1]+_,t[0][0]=t[0][0]+b+(I/4294967296>>>0)>>>0,t[0][1]=I>>>0,I=t[1][1]+M,t[1][0]=t[1][0]+A+(I/4294967296>>>0)>>>0,t[1][1]=I>>>0,I=t[2][1]+z,t[2][0]=t[2][0]+q+(I/4294967296>>>0)>>>0,t[2][1]=I>>>0,I=t[3][1]+U,t[3][0]=t[3][0]+O+(I/4294967296>>>0)>>>0,t[3][1]=I>>>0,I=t[4][1]+H,t[4][0]=t[4][0]+$+(I/4294967296>>>0)>>>0,t[4][1]=I>>>0,I=t[5][1]+B,t[5][0]=t[5][0]+X+(I/4294967296>>>0)>>>0,t[5][1]=I>>>0,I=t[6][1]+p,t[6][0]=t[6][0]+h+(I/4294967296>>>0)>>>0,t[6][1]=I>>>0,I=t[7][1]+m,t[7][0]=t[7][0]+g+(I/4294967296>>>0)>>>0,t[7][1]=I>>>0,Y-=128}}});var iy=T(Eu=>{var Hw=Be();Zi();var qt=Hw.asn1;Eu.privateKeyValidator={name:"PrivateKeyInfo",tagClass:qt.Class.UNIVERSAL,type:qt.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:qt.Class.UNIVERSAL,type:qt.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:qt.Class.UNIVERSAL,type:qt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:qt.Class.UNIVERSAL,type:qt.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:qt.Class.UNIVERSAL,type:qt.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Eu.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:qt.Class.UNIVERSAL,type:qt.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:qt.Class.UNIVERSAL,type:qt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:qt.Class.UNIVERSAL,type:qt.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:qt.Class.UNIVERSAL,type:qt.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var Mu=T((TC,by)=>{var Dt=Be();is();ta();wu();We();var ay=iy(),jw=ay.publicKeyValidator,Gw=ay.privateKeyValidator;typeof sy=="undefined"&&(sy=Dt.jsbn.BigInteger);var sy,Su=Dt.util.ByteBuffer,Xt=typeof Buffer=="undefined"?Uint8Array:Buffer;Dt.pki=Dt.pki||{};by.exports=Dt.pki.ed25519=Dt.ed25519=Dt.ed25519||{};var xe=Dt.ed25519;xe.constants={};xe.constants.PUBLIC_KEY_BYTE_LENGTH=32;xe.constants.PRIVATE_KEY_BYTE_LENGTH=64;xe.constants.SEED_BYTE_LENGTH=32;xe.constants.SIGN_BYTE_LENGTH=64;xe.constants.HASH_BYTE_LENGTH=64;xe.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=Dt.random.getBytesSync(xe.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==xe.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+xe.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=En({message:e,encoding:"binary"});for(var r=new Xt(xe.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Xt(xe.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return Qw(r,n),{publicKey:r,privateKey:n}};xe.privateKeyFromAsn1=function(t){var e={},r=[],n=Dt.asn1.validate(t,Gw,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=Dt.asn1.derToOid(e.privateKeyOid),s=Dt.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var o=e.privateKey,f=En({message:Dt.asn1.fromDer(o).value,encoding:"binary"});return{privateKeyBytes:f}};xe.publicKeyFromAsn1=function(t){var e={},r=[],n=Dt.asn1.validate(t,jw,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=Dt.asn1.derToOid(e.publicKeyOid),s=Dt.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var o=e.ed25519PublicKey;if(o.length!==xe.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return En({message:o,encoding:"binary"})};xe.publicKeyFromPrivateKey=function(t){t=t||{};var e=En({message:t.privateKey,encoding:"binary"});if(e.length!==xe.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+xe.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Xt(xe.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};xe.sign=function(t){t=t||{};var e=En(t),r=En({message:t.privateKey,encoding:"binary"});if(r.length===xe.constants.SEED_BYTE_LENGTH){var n=xe.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==xe.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+xe.constants.SEED_BYTE_LENGTH+" or "+xe.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Xt(xe.constants.SIGN_BYTE_LENGTH+e.length);Jw(i,e,e.length,r);for(var a=new Xt(xe.constants.SIGN_BYTE_LENGTH),s=0;s<a.length;++s)a[s]=i[s];return a};xe.verify=function(t){t=t||{};var e=En(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=En({message:t.signature,encoding:"binary"});if(r.length!==xe.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+xe.constants.SIGN_BYTE_LENGTH);var n=En({message:t.publicKey,encoding:"binary"});if(n.length!==xe.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+xe.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Xt(xe.constants.SIGN_BYTE_LENGTH+e.length),a=new Xt(xe.constants.SIGN_BYTE_LENGTH+e.length),s;for(s=0;s<xe.constants.SIGN_BYTE_LENGTH;++s)i[s]=r[s];for(s=0;s<e.length;++s)i[s+xe.constants.SIGN_BYTE_LENGTH]=e[s];return Zw(a,i,i.length,n)>=0};function En(t){var e=t.message;if(e instanceof Uint8Array||e instanceof Xt)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer!="undefined")return Buffer.from(e,r);e=new Su(e,r)}else if(!(e instanceof Su))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Xt(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}var _u=se(),Mo=se([1]),$w=se([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Yw=se([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),oy=se([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),fy=se([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Au=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),Ww=se([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function os(t,e){var r=Dt.md.sha512.create(),n=new Su(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer!="undefined")return Buffer.from(i,"binary");for(var a=new Xt(xe.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)a[s]=i.charCodeAt(s);return a}function Qw(t,e){var r=[se(),se(),se(),se()],n,i=os(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Tu(r,i),Cu(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}function Jw(t,e,r,n){var i,a,s=new Float64Array(64),o=[se(),se(),se(),se()],f=os(n,32);f[0]&=248,f[31]&=127,f[31]|=64;var u=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=f[32+i];var c=os(t.subarray(32),r+32);for(Bu(c),Tu(o,c),Cu(t,o),i=32;i<64;++i)t[i]=n[i];var l=os(t,r+64);for(Bu(l),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=c[i];for(i=0;i<32;++i)for(a=0;a<32;a++)s[i+a]+=l[i]*f[a];return uy(t.subarray(32),s),u}function Zw(t,e,r,n){var i,a,s=new Xt(32),o=[se(),se(),se(),se()],f=[se(),se(),se(),se()];if(a=-1,r<64||Xw(f,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var u=os(t,r);if(Bu(u),py(o,f,u),Tu(f,e.subarray(32)),Iu(o,f),Cu(s,o),r-=64,ly(e,0,s,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return a=r,a}function uy(t,e){var r,n,i,a;for(n=63;n>=32;--n){for(r=0,i=n-32,a=n-12;i<a;++i)e[i]+=r-16*e[n]*Au[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*Au[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*Au[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}function Bu(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;uy(t,e)}function Iu(t,e){var r=se(),n=se(),i=se(),a=se(),s=se(),o=se(),f=se(),u=se(),c=se();aa(r,t[1],t[0]),aa(c,e[1],e[0]),Ne(r,r,c),ia(n,t[0],t[1]),ia(c,e[0],e[1]),Ne(n,n,c),Ne(i,t[3],e[3]),Ne(i,i,Yw),Ne(a,t[2],e[2]),ia(a,a,a),aa(s,n,r),aa(o,a,i),ia(f,a,i),ia(u,n,r),Ne(t[0],s,o),Ne(t[1],u,f),Ne(t[2],f,o),Ne(t[3],s,u)}function cy(t,e,r){for(var n=0;n<4;++n)yy(t[n],e[n],r)}function Cu(t,e){var r=se(),n=se(),i=se();n7(i,e[2]),Ne(r,e[0],i),Ne(n,e[1],i),Ro(t,n),t[31]^=dy(r)<<7}function Ro(t,e){var r,n,i,a=se(),s=se();for(r=0;r<16;++r)s[r]=e[r];for(Pu(s),Pu(s),Pu(s),n=0;n<2;++n){for(a[0]=s[0]-65517,r=1;r<15;++r)a[r]=s[r]-65535-(a[r-1]>>16&1),a[r-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),i=a[15]>>16&1,a[14]&=65535,yy(s,a,1-i)}for(r=0;r<16;r++)t[2*r]=s[r]&255,t[2*r+1]=s[r]>>8}function Xw(t,e){var r=se(),n=se(),i=se(),a=se(),s=se(),o=se(),f=se();return Vn(t[2],Mo),e7(t[1],e),bi(i,t[1]),Ne(a,i,$w),aa(i,i,t[2]),ia(a,t[2],a),bi(s,a),bi(o,s),Ne(f,o,s),Ne(r,f,i),Ne(r,r,a),t7(r,r),Ne(r,r,i),Ne(r,r,a),Ne(r,r,a),Ne(t[0],r,a),bi(n,t[0]),Ne(n,n,a),hy(n,i)&&Ne(t[0],t[0],Ww),bi(n,t[0]),Ne(n,n,a),hy(n,i)?-1:(dy(t[0])===e[31]>>7&&aa(t[0],_u,t[0]),Ne(t[3],t[0],t[1]),0)}function e7(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function t7(t,e){var r=se(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)bi(r,r),n!==1&&Ne(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function hy(t,e){var r=new Xt(32),n=new Xt(32);return Ro(r,t),Ro(n,e),ly(r,0,n,0)}function ly(t,e,r,n){return r7(t,e,r,n,32)}function r7(t,e,r,n,i){var a,s=0;for(a=0;a<i;++a)s|=t[e+a]^r[n+a];return(1&s-1>>>8)-1}function dy(t){var e=new Xt(32);return Ro(e,t),e[0]&1}function py(t,e,r){var n,i;for(Vn(t[0],_u),Vn(t[1],Mo),Vn(t[2],Mo),Vn(t[3],_u),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,cy(t,e,n),Iu(e,t),Iu(t,t),cy(t,e,n)}function Tu(t,e){var r=[se(),se(),se(),se()];Vn(r[0],oy),Vn(r[1],fy),Vn(r[2],Mo),Ne(r[3],oy,fy),py(t,r,e)}function Vn(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}function n7(t,e){var r=se(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)bi(r,r),n!==2&&n!==4&&Ne(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function Pu(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}function yy(t,e,r){for(var n,i=~(r-1),a=0;a<16;++a)n=i&(t[a]^e[a]),t[a]^=n,e[a]^=n}function se(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function ia(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}function aa(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}function bi(t,e){Ne(t,e,e)}function Ne(t,e,r){var n,i,a=0,s=0,o=0,f=0,u=0,c=0,l=0,y=0,x=0,v=0,b=0,_=0,A=0,M=0,q=0,z=0,O=0,U=0,$=0,H=0,X=0,B=0,h=0,p=0,g=0,m=0,w=0,C=0,I=0,E=0,d=0,S=r[0],G=r[1],Y=r[2],W=r[3],ee=r[4],oe=r[5],he=r[6],Me=r[7],le=r[8],ce=r[9],Ge=r[10],ge=r[11],R=r[12],L=r[13],N=r[14],D=r[15];n=e[0],a+=n*S,s+=n*G,o+=n*Y,f+=n*W,u+=n*ee,c+=n*oe,l+=n*he,y+=n*Me,x+=n*le,v+=n*ce,b+=n*Ge,_+=n*ge,A+=n*R,M+=n*L,q+=n*N,z+=n*D,n=e[1],s+=n*S,o+=n*G,f+=n*Y,u+=n*W,c+=n*ee,l+=n*oe,y+=n*he,x+=n*Me,v+=n*le,b+=n*ce,_+=n*Ge,A+=n*ge,M+=n*R,q+=n*L,z+=n*N,O+=n*D,n=e[2],o+=n*S,f+=n*G,u+=n*Y,c+=n*W,l+=n*ee,y+=n*oe,x+=n*he,v+=n*Me,b+=n*le,_+=n*ce,A+=n*Ge,M+=n*ge,q+=n*R,z+=n*L,O+=n*N,U+=n*D,n=e[3],f+=n*S,u+=n*G,c+=n*Y,l+=n*W,y+=n*ee,x+=n*oe,v+=n*he,b+=n*Me,_+=n*le,A+=n*ce,M+=n*Ge,q+=n*ge,z+=n*R,O+=n*L,U+=n*N,$+=n*D,n=e[4],u+=n*S,c+=n*G,l+=n*Y,y+=n*W,x+=n*ee,v+=n*oe,b+=n*he,_+=n*Me,A+=n*le,M+=n*ce,q+=n*Ge,z+=n*ge,O+=n*R,U+=n*L,$+=n*N,H+=n*D,n=e[5],c+=n*S,l+=n*G,y+=n*Y,x+=n*W,v+=n*ee,b+=n*oe,_+=n*he,A+=n*Me,M+=n*le,q+=n*ce,z+=n*Ge,O+=n*ge,U+=n*R,$+=n*L,H+=n*N,X+=n*D,n=e[6],l+=n*S,y+=n*G,x+=n*Y,v+=n*W,b+=n*ee,_+=n*oe,A+=n*he,M+=n*Me,q+=n*le,z+=n*ce,O+=n*Ge,U+=n*ge,$+=n*R,H+=n*L,X+=n*N,B+=n*D,n=e[7],y+=n*S,x+=n*G,v+=n*Y,b+=n*W,_+=n*ee,A+=n*oe,M+=n*he,q+=n*Me,z+=n*le,O+=n*ce,U+=n*Ge,$+=n*ge,H+=n*R,X+=n*L,B+=n*N,h+=n*D,n=e[8],x+=n*S,v+=n*G,b+=n*Y,_+=n*W,A+=n*ee,M+=n*oe,q+=n*he,z+=n*Me,O+=n*le,U+=n*ce,$+=n*Ge,H+=n*ge,X+=n*R,B+=n*L,h+=n*N,p+=n*D,n=e[9],v+=n*S,b+=n*G,_+=n*Y,A+=n*W,M+=n*ee,q+=n*oe,z+=n*he,O+=n*Me,U+=n*le,$+=n*ce,H+=n*Ge,X+=n*ge,B+=n*R,h+=n*L,p+=n*N,g+=n*D,n=e[10],b+=n*S,_+=n*G,A+=n*Y,M+=n*W,q+=n*ee,z+=n*oe,O+=n*he,U+=n*Me,$+=n*le,H+=n*ce,X+=n*Ge,B+=n*ge,h+=n*R,p+=n*L,g+=n*N,m+=n*D,n=e[11],_+=n*S,A+=n*G,M+=n*Y,q+=n*W,z+=n*ee,O+=n*oe,U+=n*he,$+=n*Me,H+=n*le,X+=n*ce,B+=n*Ge,h+=n*ge,p+=n*R,g+=n*L,m+=n*N,w+=n*D,n=e[12],A+=n*S,M+=n*G,q+=n*Y,z+=n*W,O+=n*ee,U+=n*oe,$+=n*he,H+=n*Me,X+=n*le,B+=n*ce,h+=n*Ge,p+=n*ge,g+=n*R,m+=n*L,w+=n*N,C+=n*D,n=e[13],M+=n*S,q+=n*G,z+=n*Y,O+=n*W,U+=n*ee,$+=n*oe,H+=n*he,X+=n*Me,B+=n*le,h+=n*ce,p+=n*Ge,g+=n*ge,m+=n*R,w+=n*L,C+=n*N,I+=n*D,n=e[14],q+=n*S,z+=n*G,O+=n*Y,U+=n*W,$+=n*ee,H+=n*oe,X+=n*he,B+=n*Me,h+=n*le,p+=n*ce,g+=n*Ge,m+=n*ge,w+=n*R,C+=n*L,I+=n*N,E+=n*D,n=e[15],z+=n*S,O+=n*G,U+=n*Y,$+=n*W,H+=n*ee,X+=n*oe,B+=n*he,h+=n*Me,p+=n*le,g+=n*ce,m+=n*Ge,w+=n*ge,C+=n*R,I+=n*L,E+=n*N,d+=n*D,a+=38*O,s+=38*U,o+=38*$,f+=38*H,u+=38*X,c+=38*B,l+=38*h,y+=38*p,x+=38*g,v+=38*m,b+=38*w,_+=38*C,A+=38*I,M+=38*E,q+=38*d,i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=M+i+65535,i=Math.floor(n/65536),M=n-i*65536,n=q+i+65535,i=Math.floor(n/65536),q=n-i*65536,n=z+i+65535,i=Math.floor(n/65536),z=n-i*65536,a+=i-1+37*(i-1),i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=M+i+65535,i=Math.floor(n/65536),M=n-i*65536,n=q+i+65535,i=Math.floor(n/65536),q=n-i*65536,n=z+i+65535,i=Math.floor(n/65536),z=n-i*65536,a+=i-1+37*(i-1),t[0]=a,t[1]=s,t[2]=o,t[3]=f,t[4]=u,t[5]=c,t[6]=l,t[7]=y,t[8]=x,t[9]=v,t[10]=b,t[11]=_,t[12]=A,t[13]=M,t[14]=q,t[15]=z}});var gy=T((PC,vy)=>{"use strict";var qo=65536;function i7(t){let e=new Uint8Array(t),r=0;if(t>0)if(t>qo)for(;r<t;)r+qo>t?(crypto.getRandomValues(e.subarray(r,r+(t-r))),r+=t-r):(crypto.getRandomValues(e.subarray(r,r+qo)),r+=qo);else crypto.getRandomValues(e);return e}vy.exports=i7});var ko=T((MC,my)=>{"use strict";var a7=gy(),s7=ke();my.exports=function(t){if(isNaN(t)||t<=0)throw s7(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return a7(t)}});var No=T(fs=>{"use strict";We();is();var o7=Be(),{fromString:f7}=(hr(),cr),{toString:xy}=(et(),Xe),{concat:wy}=(zn(),Un);fs.bigIntegerToUintBase64url=(t,e)=>{let r=Uint8Array.from(t.abs().toByteArray());if(r=r[0]===0?r.slice(1):r,e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=wy([new Uint8Array(e-r.length),r])}return xy(r,"base64url")};fs.base64urlToBigInteger=t=>{let e=fs.base64urlToBuffer(t);return new o7.jsbn.BigInteger(xy(e,"base16"),16)};fs.base64urlToBuffer=(t,e)=>{let r=f7(t,"base64urlpad");if(e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=wy([new Uint8Array(e-r.length),r])}return r}});var _y=T(us=>{"use strict";Zi();Po();var Hn=Be(),{bigIntegerToUintBase64url:Zr,base64urlToBigInteger:Xr}=No(),{fromString:Ey}=(hr(),cr),{toString:Sy}=(et(),Xe);us.pkcs1ToJwk=function(t){let e=Hn.asn1.fromDer(Sy(t,"ascii")),r=Hn.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:Zr(r.n),e:Zr(r.e),d:Zr(r.d),p:Zr(r.p),q:Zr(r.q),dp:Zr(r.dP),dq:Zr(r.dQ),qi:Zr(r.qInv),alg:"RS256",kid:"2011-04-29"}};us.jwkToPkcs1=function(t){let e=Hn.pki.privateKeyToAsn1({n:Xr(t.n),e:Xr(t.e),d:Xr(t.d),p:Xr(t.p),q:Xr(t.q),dP:Xr(t.dp),dQ:Xr(t.dq),qInv:Xr(t.qi)});return Ey(Hn.asn1.toDer(e).getBytes(),"ascii")};us.pkixToJwk=function(t){let e=Hn.asn1.fromDer(Sy(t,"ascii")),r=Hn.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:Zr(r.n),e:Zr(r.e),alg:"RS256",kid:"2011-04-29"}};us.jwkToPkix=function(t){let e=Hn.pki.publicKeyToAsn1({n:Xr(t.n),e:Xr(t.e)});return Ey(Hn.asn1.toDer(e).getBytes(),"ascii")}});var Cy=T((kC,Iy)=>{"use strict";Po();var Ay=Be(),{base64urlToBigInteger:u7}=No();function By(t,e){return e.map(r=>u7(t[r]))}function c7(t){return Ay.pki.setRsaPrivateKey(...By(t,["n","e","d","p","q","dp","dq","qi"]))}function h7(t){return Ay.pki.setRsaPublicKey(...By(t,["n","e"]))}Iy.exports={jwk2pub:h7,jwk2priv:c7}});var My=T(_n=>{"use strict";var Sn=as(),l7=ko(),{toString:d7}=(et(),Xe),{fromString:p7}=(hr(),cr);_n.utils=_y();_n.generateKey=async function(t){let e=await Sn.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await Ty(e);return{privateKey:r[0],publicKey:r[1]}};_n.unmarshalPrivateKey=async function(t){let r=[await Sn.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await y7(t)],n=await Ty({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}};_n.getRandomValues=l7;_n.hashAndSign=async function(t,e){let r=await Sn.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await Sn.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(n,n.byteOffset,n.byteLength)};_n.hashAndVerify=async function(t,e,r){let n=await Sn.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return Sn.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,r)};function Ty(t){return Promise.all([Sn.get().subtle.exportKey("jwk",t.privateKey),Sn.get().subtle.exportKey("jwk",t.publicKey)])}function y7(t){return Sn.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}var{jwk2pub:b7,jwk2priv:v7}=Cy();function Py(t,e,r,n){let i=e?b7(t):v7(t),a=d7(Uint8Array.from(r),"ascii"),s=n(a,i);return p7(s,"ascii")}_n.encrypt=function(t,e){return Py(t,!0,e,(r,n)=>n.encrypt(r))};_n.decrypt=function(t,e){return Py(t,!1,e,(r,n)=>n.decrypt(r))}});var Lo=T((LC,Ry)=>{"use strict";var{base64:g7}=(Ua(),Li),m7=gu();Ry.exports={export:async function(t,e){let n=await m7.create().encrypt(t,e);return g7.encode(n)}}});var Dy=T((DC,Ly)=>{"use strict";var{sha256:qy}=(yn(),Vr),ky=ke(),{equals:Ny}=(ur(),fr),{toString:x7}=(et(),Xe);wu();Mu();var Do=Be(),vr=My(),Oo=ho(),w7=Lo(),Ko=class{constructor(e){this._key=e}async verify(e,r){return vr.hashAndVerify(this._key,r,e)}marshal(){return vr.utils.jwkToPkix(this._key)}get bytes(){return Oo.PublicKey.encode({Type:Oo.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(e){return vr.encrypt(this._key,e)}equals(e){return Ny(this.bytes,e.bytes)}async hash(){let{bytes:e}=await qy.digest(this.bytes);return e}},cs=class{constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return vr.getRandomValues(16)}async sign(e){return vr.hashAndSign(this._key,e)}get public(){if(!this._publicKey)throw ky(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new Ko(this._publicKey)}decrypt(e){return vr.decrypt(this._key,e)}marshal(){return vr.utils.jwkToPkcs1(this._key)}get bytes(){return Oo.PrivateKey.encode({Type:Oo.KeyType.RSA,Data:this.marshal()}).finish()}equals(e){return Ny(this.bytes,e.bytes)}async hash(){let{bytes:e}=await qy.digest(this.bytes);return e}async id(){let e=await this.public.hash();return x7(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){let n=new Do.util.ByteBuffer(this.marshal()),i=Do.asn1.fromDer(n),a=Do.pki.privateKeyFromAsn1(i),s={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return Do.pki.encryptRsaPrivateKey(a,e,s)}else{if(r==="libp2p-key")return w7.export(this.bytes,e);throw ky(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}};async function E7(t){let e=vr.utils.pkcs1ToJwk(t),r=await vr.unmarshalPrivateKey(e);return new cs(r.privateKey,r.publicKey)}function S7(t){let e=vr.utils.pkixToJwk(t);return new Ko(e)}async function _7(t){let e=await vr.unmarshalPrivateKey(t);return new cs(e.privateKey,e.publicKey)}async function A7(t){let e=await vr.generateKey(t);return new cs(e.privateKey,e.publicKey)}Ly.exports={RsaPublicKey:Ko,RsaPrivateKey:cs,unmarshalRsaPublicKey:S7,unmarshalRsaPrivateKey:E7,generateKeyPair:A7,fromJwk:_7}});var Oy=T(vi=>{"use strict";Mu();var sa=Be();vi.publicKeyLength=sa.pki.ed25519.constants.PUBLIC_KEY_BYTE_LENGTH;vi.privateKeyLength=sa.pki.ed25519.constants.PRIVATE_KEY_BYTE_LENGTH;vi.generateKey=async function(){return sa.pki.ed25519.generateKeyPair()};vi.generateKeyFromSeed=async function(t){return sa.pki.ed25519.generateKeyPair({seed:t})};vi.hashAndSign=async function(t,e){return sa.pki.ed25519.sign({message:e,privateKey:t})};vi.hashAndVerify=async function(t,e,r){return sa.pki.ed25519.verify({signature:e,message:r,publicKey:t})}});var Vy=T((KC,zy)=>{"use strict";var Ky=ke(),{equals:Fy}=(ur(),fr),{sha256:Uy}=(yn(),Vr),{base58btc:B7}=(zr(),Ur),{identity:I7}=(Ys(),$a),Ut=Oy(),Fo=ho(),C7=Lo(),Uo=class{constructor(e){this._key=fa(e,Ut.publicKeyLength)}async verify(e,r){return Ut.hashAndVerify(this._key,r,e)}marshal(){return this._key}get bytes(){return Fo.PublicKey.encode({Type:Fo.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return Fy(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Uy.digest(this.bytes);return e}},oa=class{constructor(e,r){this._key=fa(e,Ut.privateKeyLength),this._publicKey=fa(r,Ut.publicKeyLength)}async sign(e){return Ut.hashAndSign(this._key,e)}get public(){return new Uo(this._publicKey)}marshal(){return this._key}get bytes(){return Fo.PrivateKey.encode({Type:Fo.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return Fy(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Uy.digest(this.bytes);return e}async id(){let e=await I7.digest(this.public.bytes);return B7.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return C7.export(this.bytes,e);throw Ky(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function T7(t){if(t.length>Ut.privateKeyLength){t=fa(t,Ut.privateKeyLength+Ut.publicKeyLength);let n=t.slice(0,Ut.privateKeyLength),i=t.slice(Ut.privateKeyLength,t.length);return new oa(n,i)}t=fa(t,Ut.privateKeyLength);let e=t.slice(0,Ut.privateKeyLength),r=t.slice(Ut.publicKeyLength);return new oa(e,r)}function P7(t){return t=fa(t,Ut.publicKeyLength),new Uo(t)}async function M7(){let{privateKey:t,publicKey:e}=await Ut.generateKey();return new oa(t,e)}async function R7(t){let{privateKey:e,publicKey:r}=await Ut.generateKeyFromSeed(t);return new oa(e,r)}function fa(t,e){if(t=Uint8Array.from(t||[]),t.length!==e)throw Ky(new Error(`Key must be a Uint8Array of length ${e}, got ${t.length}`),"ERR_INVALID_KEY_TYPE");return t}zy.exports={Ed25519PublicKey:Uo,Ed25519PrivateKey:oa,unmarshalEd25519PrivateKey:T7,unmarshalEd25519PublicKey:P7,generateKeyPair:M7,generateKeyPairFromSeed:R7}});var jy=T((FC,Hy)=>{var Ie={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function gr(t,e){if(!t)throw new Error(e)}function Se(t,e,r){if(gr(e instanceof Uint8Array,`Expected ${t} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){let n=r.join(", "),i=`Expected ${t} to be an Uint8Array with length [${n}]`;gr(r.includes(e.length),i)}else{let n=`Expected ${t} to be an Uint8Array with length ${r}`;gr(e.length===r,n)}}function gi(t){gr(ua(t)==="Boolean","Expected compressed to be a Boolean")}function Cr(t=r=>new Uint8Array(r),e){return typeof t=="function"&&(t=t(e)),Se("output",t,e),t}function ua(t){return Object.prototype.toString.call(t).slice(8,-1)}Hy.exports=t=>({contextRandomize(e){switch(gr(e===null||e instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),e!==null&&Se("seed",e,32),t.contextRandomize(e)){case 1:throw new Error(Ie.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(e){return Se("private key",e,32),t.privateKeyVerify(e)===0},privateKeyNegate(e){switch(Se("private key",e,32),t.privateKeyNegate(e)){case 0:return e;case 1:throw new Error(Ie.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(e,r){switch(Se("private key",e,32),Se("tweak",r,32),t.privateKeyTweakAdd(e,r)){case 0:return e;case 1:throw new Error(Ie.TWEAK_ADD)}},privateKeyTweakMul(e,r){switch(Se("private key",e,32),Se("tweak",r,32),t.privateKeyTweakMul(e,r)){case 0:return e;case 1:throw new Error(Ie.TWEAK_MUL)}},publicKeyVerify(e){return Se("public key",e,[33,65]),t.publicKeyVerify(e)===0},publicKeyCreate(e,r=!0,n){switch(Se("private key",e,32),gi(r),n=Cr(n,r?33:65),t.publicKeyCreate(n,e)){case 0:return n;case 1:throw new Error(Ie.SECKEY_INVALID);case 2:throw new Error(Ie.PUBKEY_SERIALIZE)}},publicKeyConvert(e,r=!0,n){switch(Se("public key",e,[33,65]),gi(r),n=Cr(n,r?33:65),t.publicKeyConvert(n,e)){case 0:return n;case 1:throw new Error(Ie.PUBKEY_PARSE);case 2:throw new Error(Ie.PUBKEY_SERIALIZE)}},publicKeyNegate(e,r=!0,n){switch(Se("public key",e,[33,65]),gi(r),n=Cr(n,r?33:65),t.publicKeyNegate(n,e)){case 0:return n;case 1:throw new Error(Ie.PUBKEY_PARSE);case 2:throw new Error(Ie.IMPOSSIBLE_CASE);case 3:throw new Error(Ie.PUBKEY_SERIALIZE)}},publicKeyCombine(e,r=!0,n){gr(Array.isArray(e),"Expected public keys to be an Array"),gr(e.length>0,"Expected public keys array will have more than zero items");for(let i of e)Se("public key",i,[33,65]);switch(gi(r),n=Cr(n,r?33:65),t.publicKeyCombine(n,e)){case 0:return n;case 1:throw new Error(Ie.PUBKEY_PARSE);case 2:throw new Error(Ie.PUBKEY_COMBINE);case 3:throw new Error(Ie.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(e,r,n=!0,i){switch(Se("public key",e,[33,65]),Se("tweak",r,32),gi(n),i=Cr(i,n?33:65),t.publicKeyTweakAdd(i,e,r)){case 0:return i;case 1:throw new Error(Ie.PUBKEY_PARSE);case 2:throw new Error(Ie.TWEAK_ADD)}},publicKeyTweakMul(e,r,n=!0,i){switch(Se("public key",e,[33,65]),Se("tweak",r,32),gi(n),i=Cr(i,n?33:65),t.publicKeyTweakMul(i,e,r)){case 0:return i;case 1:throw new Error(Ie.PUBKEY_PARSE);case 2:throw new Error(Ie.TWEAK_MUL)}},signatureNormalize(e){switch(Se("signature",e,64),t.signatureNormalize(e)){case 0:return e;case 1:throw new Error(Ie.SIG_PARSE)}},signatureExport(e,r){Se("signature",e,64),r=Cr(r,72);let n={output:r,outputlen:72};switch(t.signatureExport(n,e)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(Ie.SIG_PARSE);case 2:throw new Error(Ie.IMPOSSIBLE_CASE)}},signatureImport(e,r){switch(Se("signature",e),r=Cr(r,64),t.signatureImport(r,e)){case 0:return r;case 1:throw new Error(Ie.SIG_PARSE);case 2:throw new Error(Ie.IMPOSSIBLE_CASE)}},ecdsaSign(e,r,n={},i){Se("message",e,32),Se("private key",r,32),gr(ua(n)==="Object","Expected options to be an Object"),n.data!==void 0&&Se("options.data",n.data),n.noncefn!==void 0&&gr(ua(n.noncefn)==="Function","Expected options.noncefn to be a Function"),i=Cr(i,64);let a={signature:i,recid:null};switch(t.ecdsaSign(a,e,r,n.data,n.noncefn)){case 0:return a;case 1:throw new Error(Ie.SIGN);case 2:throw new Error(Ie.IMPOSSIBLE_CASE)}},ecdsaVerify(e,r,n){switch(Se("signature",e,64),Se("message",r,32),Se("public key",n,[33,65]),t.ecdsaVerify(e,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(Ie.SIG_PARSE);case 2:throw new Error(Ie.PUBKEY_PARSE)}},ecdsaRecover(e,r,n,i=!0,a){switch(Se("signature",e,64),gr(ua(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),Se("message",n,32),gi(i),a=Cr(a,i?33:65),t.ecdsaRecover(a,e,r,n)){case 0:return a;case 1:throw new Error(Ie.SIG_PARSE);case 2:throw new Error(Ie.RECOVER);case 3:throw new Error(Ie.IMPOSSIBLE_CASE)}},ecdh(e,r,n={},i){switch(Se("public key",e,[33,65]),Se("private key",r,32),gr(ua(n)==="Object","Expected options to be an Object"),n.data!==void 0&&Se("options.data",n.data),n.hashfn!==void 0?(gr(ua(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&Se("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&Se("options.ybuf",n.ybuf,32),Se("output",i)):i=Cr(i,32),t.ecdh(i,e,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(Ie.PUBKEY_PARSE);case 2:throw new Error(Ie.ECDH)}}})});var Gy=T((UC,q7)=>{q7.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}});var $y=T(()=>{});var en=T((Yy,Ru)=>{(function(t,e){"use strict";function r(B,h){if(!B)throw new Error(h||"Assertion failed")}function n(B,h){B.super_=h;var p=function(){};p.prototype=h.prototype,B.prototype=new p,B.prototype.constructor=B}function i(B,h,p){if(i.isBN(B))return B;this.negative=0,this.words=null,this.length=0,this.red=null,B!==null&&((h==="le"||h==="be")&&(p=h,h=10),this._init(B||0,h||10,p||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var a;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?a=window.Buffer:a=$y().Buffer}catch(B){}i.isBN=function(h){return h instanceof i?!0:h!==null&&typeof h=="object"&&h.constructor.wordSize===i.wordSize&&Array.isArray(h.words)},i.max=function(h,p){return h.cmp(p)>0?h:p},i.min=function(h,p){return h.cmp(p)<0?h:p},i.prototype._init=function(h,p,g){if(typeof h=="number")return this._initNumber(h,p,g);if(typeof h=="object")return this._initArray(h,p,g);p==="hex"&&(p=16),r(p===(p|0)&&p>=2&&p<=36),h=h.toString().replace(/\s+/g,"");var m=0;h[0]==="-"&&(m++,this.negative=1),m<h.length&&(p===16?this._parseHex(h,m,g):(this._parseBase(h,p,m),g==="le"&&this._initArray(this.toArray(),p,g)))},i.prototype._initNumber=function(h,p,g){h<0&&(this.negative=1,h=-h),h<67108864?(this.words=[h&67108863],this.length=1):h<4503599627370496?(this.words=[h&67108863,h/67108864&67108863],this.length=2):(r(h<9007199254740992),this.words=[h&67108863,h/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),p,g)},i.prototype._initArray=function(h,p,g){if(r(typeof h.length=="number"),h.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(h.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var w,C,I=0;if(g==="be")for(m=h.length-1,w=0;m>=0;m-=3)C=h[m]|h[m-1]<<8|h[m-2]<<16,this.words[w]|=C<<I&67108863,this.words[w+1]=C>>>26-I&67108863,I+=24,I>=26&&(I-=26,w++);else if(g==="le")for(m=0,w=0;m<h.length;m+=3)C=h[m]|h[m+1]<<8|h[m+2]<<16,this.words[w]|=C<<I&67108863,this.words[w+1]=C>>>26-I&67108863,I+=24,I>=26&&(I-=26,w++);return this.strip()};function s(B,h){var p=B.charCodeAt(h);return p>=65&&p<=70?p-55:p>=97&&p<=102?p-87:p-48&15}function o(B,h,p){var g=s(B,p);return p-1>=h&&(g|=s(B,p-1)<<4),g}i.prototype._parseHex=function(h,p,g){this.length=Math.ceil((h.length-p)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var w=0,C=0,I;if(g==="be")for(m=h.length-1;m>=p;m-=2)I=o(h,p,m)<<w,this.words[C]|=I&67108863,w>=18?(w-=18,C+=1,this.words[C]|=I>>>26):w+=8;else{var E=h.length-p;for(m=E%2==0?p+1:p;m<h.length;m+=2)I=o(h,p,m)<<w,this.words[C]|=I&67108863,w>=18?(w-=18,C+=1,this.words[C]|=I>>>26):w+=8}this.strip()};function f(B,h,p,g){for(var m=0,w=Math.min(B.length,p),C=h;C<w;C++){var I=B.charCodeAt(C)-48;m*=g,I>=49?m+=I-49+10:I>=17?m+=I-17+10:m+=I}return m}i.prototype._parseBase=function(h,p,g){this.words=[0],this.length=1;for(var m=0,w=1;w<=67108863;w*=p)m++;m--,w=w/p|0;for(var C=h.length-g,I=C%m,E=Math.min(C,C-I)+g,d=0,S=g;S<E;S+=m)d=f(h,S,S+m,p),this.imuln(w),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(I!==0){var G=1;for(d=f(h,S,h.length,p),S=0;S<I;S++)G*=p;this.imuln(G),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},i.prototype.copy=function(h){h.words=new Array(this.length);for(var p=0;p<this.length;p++)h.words[p]=this.words[p];h.length=this.length,h.negative=this.negative,h.red=this.red},i.prototype.clone=function(){var h=new i(null);return this.copy(h),h},i.prototype._expand=function(h){for(;this.length<h;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(h,p){h=h||10,p=p|0||1;var g;if(h===16||h==="hex"){g="";for(var m=0,w=0,C=0;C<this.length;C++){var I=this.words[C],E=((I<<m|w)&16777215).toString(16);w=I>>>24-m&16777215,w!==0||C!==this.length-1?g=u[6-E.length]+E+g:g=E+g,m+=2,m>=26&&(m-=26,C--)}for(w!==0&&(g=w.toString(16)+g);g.length%p!=0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(h===(h|0)&&h>=2&&h<=36){var d=c[h],S=l[h];g="";var G=this.clone();for(G.negative=0;!G.isZero();){var Y=G.modn(S).toString(h);G=G.idivn(S),G.isZero()?g=Y+g:g=u[d-Y.length]+Y+g}for(this.isZero()&&(g="0"+g);g.length%p!=0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var h=this.words[0];return this.length===2?h+=this.words[1]*67108864:this.length===3&&this.words[2]===1?h+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-h:h},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(h,p){return r(typeof a!="undefined"),this.toArrayLike(a,h,p)},i.prototype.toArray=function(h,p){return this.toArrayLike(Array,h,p)},i.prototype.toArrayLike=function(h,p,g){var m=this.byteLength(),w=g||Math.max(1,m);r(m<=w,"byte array longer than desired length"),r(w>0,"Requested array length <= 0"),this.strip();var C=p==="le",I=new h(w),E,d,S=this.clone();if(C){for(d=0;!S.isZero();d++)E=S.andln(255),S.iushrn(8),I[d]=E;for(;d<w;d++)I[d]=0}else{for(d=0;d<w-m;d++)I[d]=0;for(d=0;!S.isZero();d++)E=S.andln(255),S.iushrn(8),I[w-d-1]=E}return I},Math.clz32?i.prototype._countBits=function(h){return 32-Math.clz32(h)}:i.prototype._countBits=function(h){var p=h,g=0;return p>=4096&&(g+=13,p>>>=13),p>=64&&(g+=7,p>>>=7),p>=8&&(g+=4,p>>>=4),p>=2&&(g+=2,p>>>=2),g+p},i.prototype._zeroBits=function(h){if(h===0)return 26;var p=h,g=0;return(p&8191)==0&&(g+=13,p>>>=13),(p&127)==0&&(g+=7,p>>>=7),(p&15)==0&&(g+=4,p>>>=4),(p&3)==0&&(g+=2,p>>>=2),(p&1)==0&&g++,g},i.prototype.bitLength=function(){var h=this.words[this.length-1],p=this._countBits(h);return(this.length-1)*26+p};function y(B){for(var h=new Array(B.bitLength()),p=0;p<h.length;p++){var g=p/26|0,m=p%26;h[p]=(B.words[g]&1<<m)>>>m}return h}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var h=0,p=0;p<this.length;p++){var g=this._zeroBits(this.words[p]);if(h+=g,g!==26)break}return h},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(h){return this.negative!==0?this.abs().inotn(h).iaddn(1):this.clone()},i.prototype.fromTwos=function(h){return this.testn(h-1)?this.notn(h).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(h){for(;this.length<h.length;)this.words[this.length++]=0;for(var p=0;p<h.length;p++)this.words[p]=this.words[p]|h.words[p];return this.strip()},i.prototype.ior=function(h){return r((this.negative|h.negative)==0),this.iuor(h)},i.prototype.or=function(h){return this.length>h.length?this.clone().ior(h):h.clone().ior(this)},i.prototype.uor=function(h){return this.length>h.length?this.clone().iuor(h):h.clone().iuor(this)},i.prototype.iuand=function(h){var p;this.length>h.length?p=h:p=this;for(var g=0;g<p.length;g++)this.words[g]=this.words[g]&h.words[g];return this.length=p.length,this.strip()},i.prototype.iand=function(h){return r((this.negative|h.negative)==0),this.iuand(h)},i.prototype.and=function(h){return this.length>h.length?this.clone().iand(h):h.clone().iand(this)},i.prototype.uand=function(h){return this.length>h.length?this.clone().iuand(h):h.clone().iuand(this)},i.prototype.iuxor=function(h){var p,g;this.length>h.length?(p=this,g=h):(p=h,g=this);for(var m=0;m<g.length;m++)this.words[m]=p.words[m]^g.words[m];if(this!==p)for(;m<p.length;m++)this.words[m]=p.words[m];return this.length=p.length,this.strip()},i.prototype.ixor=function(h){return r((this.negative|h.negative)==0),this.iuxor(h)},i.prototype.xor=function(h){return this.length>h.length?this.clone().ixor(h):h.clone().ixor(this)},i.prototype.uxor=function(h){return this.length>h.length?this.clone().iuxor(h):h.clone().iuxor(this)},i.prototype.inotn=function(h){r(typeof h=="number"&&h>=0);var p=Math.ceil(h/26)|0,g=h%26;this._expand(p),g>0&&p--;for(var m=0;m<p;m++)this.words[m]=~this.words[m]&67108863;return g>0&&(this.words[m]=~this.words[m]&67108863>>26-g),this.strip()},i.prototype.notn=function(h){return this.clone().inotn(h)},i.prototype.setn=function(h,p){r(typeof h=="number"&&h>=0);var g=h/26|0,m=h%26;return this._expand(g+1),p?this.words[g]=this.words[g]|1<<m:this.words[g]=this.words[g]&~(1<<m),this.strip()},i.prototype.iadd=function(h){var p;if(this.negative!==0&&h.negative===0)return this.negative=0,p=this.isub(h),this.negative^=1,this._normSign();if(this.negative===0&&h.negative!==0)return h.negative=0,p=this.isub(h),h.negative=1,p._normSign();var g,m;this.length>h.length?(g=this,m=h):(g=h,m=this);for(var w=0,C=0;C<m.length;C++)p=(g.words[C]|0)+(m.words[C]|0)+w,this.words[C]=p&67108863,w=p>>>26;for(;w!==0&&C<g.length;C++)p=(g.words[C]|0)+w,this.words[C]=p&67108863,w=p>>>26;if(this.length=g.length,w!==0)this.words[this.length]=w,this.length++;else if(g!==this)for(;C<g.length;C++)this.words[C]=g.words[C];return this},i.prototype.add=function(h){var p;return h.negative!==0&&this.negative===0?(h.negative=0,p=this.sub(h),h.negative^=1,p):h.negative===0&&this.negative!==0?(this.negative=0,p=h.sub(this),this.negative=1,p):this.length>h.length?this.clone().iadd(h):h.clone().iadd(this)},i.prototype.isub=function(h){if(h.negative!==0){h.negative=0;var p=this.iadd(h);return h.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(h),this.negative=1,this._normSign();var g=this.cmp(h);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,w;g>0?(m=this,w=h):(m=h,w=this);for(var C=0,I=0;I<w.length;I++)p=(m.words[I]|0)-(w.words[I]|0)+C,C=p>>26,this.words[I]=p&67108863;for(;C!==0&&I<m.length;I++)p=(m.words[I]|0)+C,C=p>>26,this.words[I]=p&67108863;if(C===0&&I<m.length&&m!==this)for(;I<m.length;I++)this.words[I]=m.words[I];return this.length=Math.max(this.length,I),m!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(h){return this.clone().isub(h)};function x(B,h,p){p.negative=h.negative^B.negative;var g=B.length+h.length|0;p.length=g,g=g-1|0;var m=B.words[0]|0,w=h.words[0]|0,C=m*w,I=C&67108863,E=C/67108864|0;p.words[0]=I;for(var d=1;d<g;d++){for(var S=E>>>26,G=E&67108863,Y=Math.min(d,h.length-1),W=Math.max(0,d-B.length+1);W<=Y;W++){var ee=d-W|0;m=B.words[ee]|0,w=h.words[W]|0,C=m*w+G,S+=C/67108864|0,G=C&67108863}p.words[d]=G|0,E=S|0}return E!==0?p.words[d]=E|0:p.length--,p.strip()}var v=function(h,p,g){var m=h.words,w=p.words,C=g.words,I=0,E,d,S,G=m[0]|0,Y=G&8191,W=G>>>13,ee=m[1]|0,oe=ee&8191,he=ee>>>13,Me=m[2]|0,le=Me&8191,ce=Me>>>13,Ge=m[3]|0,ge=Ge&8191,R=Ge>>>13,L=m[4]|0,N=L&8191,D=L>>>13,Z=m[5]|0,ie=Z&8191,ae=Z>>>13,Ve=m[6]|0,fe=Ve&8191,ue=Ve>>>13,Ue=m[7]|0,te=Ue&8191,be=Ue>>>13,ar=m[8]|0,Re=ar&8191,de=ar>>>13,Ce=m[9]|0,$e=Ce&8191,nt=Ce>>>13,th=w[0]|0,it=th&8191,at=th>>>13,rh=w[1]|0,st=rh&8191,ot=rh>>>13,nh=w[2]|0,ft=nh&8191,ut=nh>>>13,ih=w[3]|0,ct=ih&8191,ht=ih>>>13,ah=w[4]|0,lt=ah&8191,dt=ah>>>13,sh=w[5]|0,pt=sh&8191,yt=sh>>>13,oh=w[6]|0,bt=oh&8191,vt=oh>>>13,fh=w[7]|0,gt=fh&8191,mt=fh>>>13,uh=w[8]|0,xt=uh&8191,wt=uh>>>13,ch=w[9]|0,Et=ch&8191,St=ch>>>13;g.negative=h.negative^p.negative,g.length=19,E=Math.imul(Y,it),d=Math.imul(Y,at),d=d+Math.imul(W,it)|0,S=Math.imul(W,at);var Nf=(I+E|0)+((d&8191)<<13)|0;I=(S+(d>>>13)|0)+(Nf>>>26)|0,Nf&=67108863,E=Math.imul(oe,it),d=Math.imul(oe,at),d=d+Math.imul(he,it)|0,S=Math.imul(he,at),E=E+Math.imul(Y,st)|0,d=d+Math.imul(Y,ot)|0,d=d+Math.imul(W,st)|0,S=S+Math.imul(W,ot)|0;var Lf=(I+E|0)+((d&8191)<<13)|0;I=(S+(d>>>13)|0)+(Lf>>>26)|0,Lf&=67108863,E=Math.imul(le,it),d=Math.imul(le,at),d=d+Math.imul(ce,it)|0,S=Math.imul(ce,at),E=E+Math.imul(oe,st)|0,d=d+Math.imul(oe,ot)|0,d=d+Math.imul(he,st)|0,S=S+Math.imul(he,ot)|0,E=E+Math.imul(Y,ft)|0,d=d+Math.imul(Y,ut)|0,d=d+Math.imul(W,ft)|0,S=S+Math.imul(W,ut)|0;var Df=(I+E|0)+((d&8191)<<13)|0;I=(S+(d>>>13)|0)+(Df>>>26)|0,Df&=67108863,E=Math.imul(ge,it),d=Math.imul(ge,at),d=d+Math.imul(R,it)|0,S=Math.imul(R,at),E=E+Math.imul(le,st)|0,d=d+Math.imul(le,ot)|0,d=d+Math.imul(ce,st)|0,S=S+Math.imul(ce,ot)|0,E=E+Math.imul(oe,ft)|0,d=d+Math.imul(oe,ut)|0,d=d+Math.imul(he,ft)|0,S=S+Math.imul(he,ut)|0,E=E+Math.imul(Y,ct)|0,d=d+Math.imul(Y,ht)|0,d=d+Math.imul(W,ct)|0,S=S+Math.imul(W,ht)|0;var Of=(I+E|0)+((d&8191)<<13)|0;I=(S+(d>>>13)|0)+(Of>>>26)|0,Of&=67108863,E=Math.imul(N,it),d=Math.imul(N,at),d=d+Math.imul(D,it)|0,S=Math.imul(D,at),E=E+Math.imul(ge,st)|0,d=d+Math.imul(ge,ot)|0,d=d+Math.imul(R,st)|0,S=S+Math.imul(R,ot)|0,E=E+Math.imul(le,ft)|0,d=d+Math.imul(le,ut)|0,d=d+Math.imul(ce,ft)|0,S=S+Math.imul(ce,ut)|0,E=E+Math.imul(oe,ct)|0,d=d+Math.imul(oe,ht)|0,d=d+Math.imul(he,ct)|0,S=S+Math.imul(he,ht)|0,E=E+Math.imul(Y,lt)|0,d=d+Math.imul(Y,dt)|0,d=d+Math.imul(W,lt)|0,S=S+Math.imul(W,dt)|0;var Kf=(I+E|0)+((d&8191)<<13)|0;I=(S+(d>>>13)|0)+(Kf>>>26)|0,Kf&=67108863,E=Math.imul(ie,it),d=Math.imul(ie,at),d=d+Math.imul(ae,it)|0,S=Math.imul(ae,at),E=E+Math.imul(N,st)|0,d=d+Math.imul(N,ot)|0,d=d+Math.imul(D,st)|0,S=S+Math.imul(D,ot)|0,E=E+Math.imul(ge,ft)|0,d=d+Math.imul(ge,ut)|0,d=d+Math.imul(R,ft)|0,S=S+Math.imul(R,ut)|0,E=E+Math.imul(le,ct)|0,d=d+Math.imul(le,ht)|0,d=d+Math.imul(ce,ct)|0,S=S+Math.imul(ce,ht)|0,E=E+Math.imul(oe,lt)|0,d=d+Math.imul(oe,dt)|0,d=d+Math.imul(he,lt)|0,S=S+Math.imul(he,dt)|0,E=E+Math.imul(Y,pt)|0,d=d+Math.imul(Y,yt)|0,d=d+Math.imul(W,pt)|0,S=S+Math.imul(W,yt)|0;var Ff=(I+E|0)+((d&8191)<<13)|0;I=(S+(d>>>13)|0)+(Ff>>>26)|0,Ff&=67108863,E=Math.imul(fe,it),d=Math.imul(fe,at),d=d+Math.imul(ue,it)|0,S=Math.imul(ue,at),E=E+Math.imul(ie,st)|0,d=d+Math.imul(ie,ot)|0,d=d+Math.imul(ae,st)|0,S=S+Math.imul(ae,ot)|0,E=E+Math.imul(N,ft)|0,d=d+Math.imul(N,ut)|0,d=d+Math.imul(D,ft)|0,S=S+Math.imul(D,ut)|0,E=E+Math.imul(ge,ct)|0,d=d+Math.imul(ge,ht)|0,d=d+Math.imul(R,ct)|0,S=S+Math.imul(R,ht)|0,E=E+Math.imul(le,lt)|0,d=d+Math.imul(le,dt)|0,d=d+Math.imul(ce,lt)|0,S=S+Math.imul(ce,dt)|0,E=E+Math.imul(oe,pt)|0,d=d+Math.imul(oe,yt)|0,d=d+Math.imul(he,pt)|0,S=S+Math.imul(he,yt)|0,E=E+Math.imul(Y,bt)|0,d=d+Math.imul(Y,vt)|0,d=d+Math.imul(W,bt)|0,S=S+Math.imul(W,vt)|0;var Uf=(I+E|0)+((d&8191)<<13)|0;I=(S+(d>>>13)|0)+(Uf>>>26)|0,Uf&=67108863,E=Math.imul(te,it),d=Math.imul(te,at),d=d+Math.imul(be,it)|0,S=Math.imul(be,at),E=E+Math.imul(fe,st)|0,d=d+Math.imul(fe,ot)|0,d=d+Math.imul(ue,st)|0,S=S+Math.imul(ue,ot)|0,E=E+Math.imul(ie,ft)|0,d=d+Math.imul(ie,ut)|0,d=d+Math.imul(ae,ft)|0,S=S+Math.imul(ae,ut)|0,E=E+Math.imul(N,ct)|0,d=d+Math.imul(N,ht)|0,d=d+Math.imul(D,ct)|0,S=S+Math.imul(D,ht)|0,E=E+Math.imul(ge,lt)|0,d=d+Math.imul(ge,dt)|0,d=d+Math.imul(R,lt)|0,S=S+Math.imul(R,dt)|0,E=E+Math.imul(le,pt)|0,d=d+Math.imul(le,yt)|0,d=d+Math.imul(ce,pt)|0,S=S+Math.imul(ce,yt)|0,E=E+Math.imul(oe,bt)|0,d=d+Math.imul(oe,vt)|0,d=d+Math.imul(he,bt)|0,S=S+Math.imul(he,vt)|0,E=E+Math.imul(Y,gt)|0,d=d+Math.imul(Y,mt)|0,d=d+Math.imul(W,gt)|0,S=S+Math.imul(W,mt)|0;var zf=(I+E|0)+((d&8191)<<13)|0;I=(S+(d>>>13)|0)+(zf>>>26)|0,zf&=67108863,E=Math.imul(Re,it),d=Math.imul(Re,at),d=d+Math.imul(de,it)|0,S=Math.imul(de,at),E=E+Math.imul(te,st)|0,d=d+Math.imul(te,ot)|0,d=d+Math.imul(be,st)|0,S=S+Math.imul(be,ot)|0,E=E+Math.imul(fe,ft)|0,d=d+Math.imul(fe,ut)|0,d=d+Math.imul(ue,ft)|0,S=S+Math.imul(ue,ut)|0,E=E+Math.imul(ie,ct)|0,d=d+Math.imul(ie,ht)|0,d=d+Math.imul(ae,ct)|0,S=S+Math.imul(ae,ht)|0,E=E+Math.imul(N,lt)|0,d=d+Math.imul(N,dt)|0,d=d+Math.imul(D,lt)|0,S=S+Math.imul(D,dt)|0,E=E+Math.imul(ge,pt)|0,d=d+Math.imul(ge,yt)|0,d=d+Math.imul(R,pt)|0,S=S+Math.imul(R,yt)|0,E=E+Math.imul(le,bt)|0,d=d+Math.imul(le,vt)|0,d=d+Math.imul(ce,bt)|0,S=S+Math.imul(ce,vt)|0,E=E+Math.imul(oe,gt)|0,d=d+Math.imul(oe,mt)|0,d=d+Math.imul(he,gt)|0,S=S+Math.imul(he,mt)|0,E=E+Math.imul(Y,xt)|0,d=d+Math.imul(Y,wt)|0,d=d+Math.imul(W,xt)|0,S=S+Math.imul(W,wt)|0;var Vf=(I+E|0)+((d&8191)<<13)|0;I=(S+(d>>>13)|0)+(Vf>>>26)|0,Vf&=67108863,E=Math.imul($e,it),d=Math.imul($e,at),d=d+Math.imul(nt,it)|0,S=Math.imul(nt,at),E=E+Math.imul(Re,st)|0,d=d+Math.imul(Re,ot)|0,d=d+Math.imul(de,st)|0,S=S+Math.imul(de,ot)|0,E=E+Math.imul(te,ft)|0,d=d+Math.imul(te,ut)|0,d=d+Math.imul(be,ft)|0,S=S+Math.imul(be,ut)|0,E=E+Math.imul(fe,ct)|0,d=d+Math.imul(fe,ht)|0,d=d+Math.imul(ue,ct)|0,S=S+Math.imul(ue,ht)|0,E=E+Math.imul(ie,lt)|0,d=d+Math.imul(ie,dt)|0,d=d+Math.imul(ae,lt)|0,S=S+Math.imul(ae,dt)|0,E=E+Math.imul(N,pt)|0,d=d+Math.imul(N,yt)|0,d=d+Math.imul(D,pt)|0,S=S+Math.imul(D,yt)|0,E=E+Math.imul(ge,bt)|0,d=d+Math.imul(ge,vt)|0,d=d+Math.imul(R,bt)|0,S=S+Math.imul(R,vt)|0,E=E+Math.imul(le,gt)|0,d=d+Math.imul(le,mt)|0,d=d+Math.imul(ce,gt)|0,S=S+Math.imul(ce,mt)|0,E=E+Math.imul(oe,xt)|0,d=d+Math.imul(oe,wt)|0,d=d+Math.imul(he,xt)|0,S=S+Math.imul(he,wt)|0,E=E+Math.imul(Y,Et)|0,d=d+Math.imul(Y,St)|0,d=d+Math.imul(W,Et)|0,S=S+Math.imul(W,St)|0;var Hf=(I+E|0)+((d&8191)<<13)|0;I=(S+(d>>>13)|0)+(Hf>>>26)|0,Hf&=67108863,E=Math.imul($e,st),d=Math.imul($e,ot),d=d+Math.imul(nt,st)|0,S=Math.imul(nt,ot),E=E+Math.imul(Re,ft)|0,d=d+Math.imul(Re,ut)|0,d=d+Math.imul(de,ft)|0,S=S+Math.imul(de,ut)|0,E=E+Math.imul(te,ct)|0,d=d+Math.imul(te,ht)|0,d=d+Math.imul(be,ct)|0,S=S+Math.imul(be,ht)|0,E=E+Math.imul(fe,lt)|0,d=d+Math.imul(fe,dt)|0,d=d+Math.imul(ue,lt)|0,S=S+Math.imul(ue,dt)|0,E=E+Math.imul(ie,pt)|0,d=d+Math.imul(ie,yt)|0,d=d+Math.imul(ae,pt)|0,S=S+Math.imul(ae,yt)|0,E=E+Math.imul(N,bt)|0,d=d+Math.imul(N,vt)|0,d=d+Math.imul(D,bt)|0,S=S+Math.imul(D,vt)|0,E=E+Math.imul(ge,gt)|0,d=d+Math.imul(ge,mt)|0,d=d+Math.imul(R,gt)|0,S=S+Math.imul(R,mt)|0,E=E+Math.imul(le,xt)|0,d=d+Math.imul(le,wt)|0,d=d+Math.imul(ce,xt)|0,S=S+Math.imul(ce,wt)|0,E=E+Math.imul(oe,Et)|0,d=d+Math.imul(oe,St)|0,d=d+Math.imul(he,Et)|0,S=S+Math.imul(he,St)|0;var jf=(I+E|0)+((d&8191)<<13)|0;I=(S+(d>>>13)|0)+(jf>>>26)|0,jf&=67108863,E=Math.imul($e,ft),d=Math.imul($e,ut),d=d+Math.imul(nt,ft)|0,S=Math.imul(nt,ut),E=E+Math.imul(Re,ct)|0,d=d+Math.imul(Re,ht)|0,d=d+Math.imul(de,ct)|0,S=S+Math.imul(de,ht)|0,E=E+Math.imul(te,lt)|0,d=d+Math.imul(te,dt)|0,d=d+Math.imul(be,lt)|0,S=S+Math.imul(be,dt)|0,E=E+Math.imul(fe,pt)|0,d=d+Math.imul(fe,yt)|0,d=d+Math.imul(ue,pt)|0,S=S+Math.imul(ue,yt)|0,E=E+Math.imul(ie,bt)|0,d=d+Math.imul(ie,vt)|0,d=d+Math.imul(ae,bt)|0,S=S+Math.imul(ae,vt)|0,E=E+Math.imul(N,gt)|0,d=d+Math.imul(N,mt)|0,d=d+Math.imul(D,gt)|0,S=S+Math.imul(D,mt)|0,E=E+Math.imul(ge,xt)|0,d=d+Math.imul(ge,wt)|0,d=d+Math.imul(R,xt)|0,S=S+Math.imul(R,wt)|0,E=E+Math.imul(le,Et)|0,d=d+Math.imul(le,St)|0,d=d+Math.imul(ce,Et)|0,S=S+Math.imul(ce,St)|0;var Gf=(I+E|0)+((d&8191)<<13)|0;I=(S+(d>>>13)|0)+(Gf>>>26)|0,Gf&=67108863,E=Math.imul($e,ct),d=Math.imul($e,ht),d=d+Math.imul(nt,ct)|0,S=Math.imul(nt,ht),E=E+Math.imul(Re,lt)|0,d=d+Math.imul(Re,dt)|0,d=d+Math.imul(de,lt)|0,S=S+Math.imul(de,dt)|0,E=E+Math.imul(te,pt)|0,d=d+Math.imul(te,yt)|0,d=d+Math.imul(be,pt)|0,S=S+Math.imul(be,yt)|0,E=E+Math.imul(fe,bt)|0,d=d+Math.imul(fe,vt)|0,d=d+Math.imul(ue,bt)|0,S=S+Math.imul(ue,vt)|0,E=E+Math.imul(ie,gt)|0,d=d+Math.imul(ie,mt)|0,d=d+Math.imul(ae,gt)|0,S=S+Math.imul(ae,mt)|0,E=E+Math.imul(N,xt)|0,d=d+Math.imul(N,wt)|0,d=d+Math.imul(D,xt)|0,S=S+Math.imul(D,wt)|0,E=E+Math.imul(ge,Et)|0,d=d+Math.imul(ge,St)|0,d=d+Math.imul(R,Et)|0,S=S+Math.imul(R,St)|0;var $f=(I+E|0)+((d&8191)<<13)|0;I=(S+(d>>>13)|0)+($f>>>26)|0,$f&=67108863,E=Math.imul($e,lt),d=Math.imul($e,dt),d=d+Math.imul(nt,lt)|0,S=Math.imul(nt,dt),E=E+Math.imul(Re,pt)|0,d=d+Math.imul(Re,yt)|0,d=d+Math.imul(de,pt)|0,S=S+Math.imul(de,yt)|0,E=E+Math.imul(te,bt)|0,d=d+Math.imul(te,vt)|0,d=d+Math.imul(be,bt)|0,S=S+Math.imul(be,vt)|0,E=E+Math.imul(fe,gt)|0,d=d+Math.imul(fe,mt)|0,d=d+Math.imul(ue,gt)|0,S=S+Math.imul(ue,mt)|0,E=E+Math.imul(ie,xt)|0,d=d+Math.imul(ie,wt)|0,d=d+Math.imul(ae,xt)|0,S=S+Math.imul(ae,wt)|0,E=E+Math.imul(N,Et)|0,d=d+Math.imul(N,St)|0,d=d+Math.imul(D,Et)|0,S=S+Math.imul(D,St)|0;var Yf=(I+E|0)+((d&8191)<<13)|0;I=(S+(d>>>13)|0)+(Yf>>>26)|0,Yf&=67108863,E=Math.imul($e,pt),d=Math.imul($e,yt),d=d+Math.imul(nt,pt)|0,S=Math.imul(nt,yt),E=E+Math.imul(Re,bt)|0,d=d+Math.imul(Re,vt)|0,d=d+Math.imul(de,bt)|0,S=S+Math.imul(de,vt)|0,E=E+Math.imul(te,gt)|0,d=d+Math.imul(te,mt)|0,d=d+Math.imul(be,gt)|0,S=S+Math.imul(be,mt)|0,E=E+Math.imul(fe,xt)|0,d=d+Math.imul(fe,wt)|0,d=d+Math.imul(ue,xt)|0,S=S+Math.imul(ue,wt)|0,E=E+Math.imul(ie,Et)|0,d=d+Math.imul(ie,St)|0,d=d+Math.imul(ae,Et)|0,S=S+Math.imul(ae,St)|0;var Wf=(I+E|0)+((d&8191)<<13)|0;I=(S+(d>>>13)|0)+(Wf>>>26)|0,Wf&=67108863,E=Math.imul($e,bt),d=Math.imul($e,vt),d=d+Math.imul(nt,bt)|0,S=Math.imul(nt,vt),E=E+Math.imul(Re,gt)|0,d=d+Math.imul(Re,mt)|0,d=d+Math.imul(de,gt)|0,S=S+Math.imul(de,mt)|0,E=E+Math.imul(te,xt)|0,d=d+Math.imul(te,wt)|0,d=d+Math.imul(be,xt)|0,S=S+Math.imul(be,wt)|0,E=E+Math.imul(fe,Et)|0,d=d+Math.imul(fe,St)|0,d=d+Math.imul(ue,Et)|0,S=S+Math.imul(ue,St)|0;var Qf=(I+E|0)+((d&8191)<<13)|0;I=(S+(d>>>13)|0)+(Qf>>>26)|0,Qf&=67108863,E=Math.imul($e,gt),d=Math.imul($e,mt),d=d+Math.imul(nt,gt)|0,S=Math.imul(nt,mt),E=E+Math.imul(Re,xt)|0,d=d+Math.imul(Re,wt)|0,d=d+Math.imul(de,xt)|0,S=S+Math.imul(de,wt)|0,E=E+Math.imul(te,Et)|0,d=d+Math.imul(te,St)|0,d=d+Math.imul(be,Et)|0,S=S+Math.imul(be,St)|0;var Jf=(I+E|0)+((d&8191)<<13)|0;I=(S+(d>>>13)|0)+(Jf>>>26)|0,Jf&=67108863,E=Math.imul($e,xt),d=Math.imul($e,wt),d=d+Math.imul(nt,xt)|0,S=Math.imul(nt,wt),E=E+Math.imul(Re,Et)|0,d=d+Math.imul(Re,St)|0,d=d+Math.imul(de,Et)|0,S=S+Math.imul(de,St)|0;var Zf=(I+E|0)+((d&8191)<<13)|0;I=(S+(d>>>13)|0)+(Zf>>>26)|0,Zf&=67108863,E=Math.imul($e,Et),d=Math.imul($e,St),d=d+Math.imul(nt,Et)|0,S=Math.imul(nt,St);var Xf=(I+E|0)+((d&8191)<<13)|0;return I=(S+(d>>>13)|0)+(Xf>>>26)|0,Xf&=67108863,C[0]=Nf,C[1]=Lf,C[2]=Df,C[3]=Of,C[4]=Kf,C[5]=Ff,C[6]=Uf,C[7]=zf,C[8]=Vf,C[9]=Hf,C[10]=jf,C[11]=Gf,C[12]=$f,C[13]=Yf,C[14]=Wf,C[15]=Qf,C[16]=Jf,C[17]=Zf,C[18]=Xf,I!==0&&(C[19]=I,g.length++),g};Math.imul||(v=x);function b(B,h,p){p.negative=h.negative^B.negative,p.length=B.length+h.length;for(var g=0,m=0,w=0;w<p.length-1;w++){var C=m;m=0;for(var I=g&67108863,E=Math.min(w,h.length-1),d=Math.max(0,w-B.length+1);d<=E;d++){var S=w-d,G=B.words[S]|0,Y=h.words[d]|0,W=G*Y,ee=W&67108863;C=C+(W/67108864|0)|0,ee=ee+I|0,I=ee&67108863,C=C+(ee>>>26)|0,m+=C>>>26,C&=67108863}p.words[w]=I,g=C,C=m}return g!==0?p.words[w]=g:p.length--,p.strip()}function _(B,h,p){var g=new A;return g.mulp(B,h,p)}i.prototype.mulTo=function(h,p){var g,m=this.length+h.length;return this.length===10&&h.length===10?g=v(this,h,p):m<63?g=x(this,h,p):m<1024?g=b(this,h,p):g=_(this,h,p),g};function A(B,h){this.x=B,this.y=h}A.prototype.makeRBT=function(h){for(var p=new Array(h),g=i.prototype._countBits(h)-1,m=0;m<h;m++)p[m]=this.revBin(m,g,h);return p},A.prototype.revBin=function(h,p,g){if(h===0||h===g-1)return h;for(var m=0,w=0;w<p;w++)m|=(h&1)<<p-w-1,h>>=1;return m},A.prototype.permute=function(h,p,g,m,w,C){for(var I=0;I<C;I++)m[I]=p[h[I]],w[I]=g[h[I]]},A.prototype.transform=function(h,p,g,m,w,C){this.permute(C,h,p,g,m,w);for(var I=1;I<w;I<<=1)for(var E=I<<1,d=Math.cos(2*Math.PI/E),S=Math.sin(2*Math.PI/E),G=0;G<w;G+=E)for(var Y=d,W=S,ee=0;ee<I;ee++){var oe=g[G+ee],he=m[G+ee],Me=g[G+ee+I],le=m[G+ee+I],ce=Y*Me-W*le;le=Y*le+W*Me,Me=ce,g[G+ee]=oe+Me,m[G+ee]=he+le,g[G+ee+I]=oe-Me,m[G+ee+I]=he-le,ee!==E&&(ce=d*Y-S*W,W=d*W+S*Y,Y=ce)}},A.prototype.guessLen13b=function(h,p){var g=Math.max(p,h)|1,m=g&1,w=0;for(g=g/2|0;g;g=g>>>1)w++;return 1<<w+1+m},A.prototype.conjugate=function(h,p,g){if(!(g<=1))for(var m=0;m<g/2;m++){var w=h[m];h[m]=h[g-m-1],h[g-m-1]=w,w=p[m],p[m]=-p[g-m-1],p[g-m-1]=-w}},A.prototype.normalize13b=function(h,p){for(var g=0,m=0;m<p/2;m++){var w=Math.round(h[2*m+1]/p)*8192+Math.round(h[2*m]/p)+g;h[m]=w&67108863,w<67108864?g=0:g=w/67108864|0}return h},A.prototype.convert13b=function(h,p,g,m){for(var w=0,C=0;C<p;C++)w=w+(h[C]|0),g[2*C]=w&8191,w=w>>>13,g[2*C+1]=w&8191,w=w>>>13;for(C=2*p;C<m;++C)g[C]=0;r(w===0),r((w&~8191)==0)},A.prototype.stub=function(h){for(var p=new Array(h),g=0;g<h;g++)p[g]=0;return p},A.prototype.mulp=function(h,p,g){var m=2*this.guessLen13b(h.length,p.length),w=this.makeRBT(m),C=this.stub(m),I=new Array(m),E=new Array(m),d=new Array(m),S=new Array(m),G=new Array(m),Y=new Array(m),W=g.words;W.length=m,this.convert13b(h.words,h.length,I,m),this.convert13b(p.words,p.length,S,m),this.transform(I,C,E,d,m,w),this.transform(S,C,G,Y,m,w);for(var ee=0;ee<m;ee++){var oe=E[ee]*G[ee]-d[ee]*Y[ee];d[ee]=E[ee]*Y[ee]+d[ee]*G[ee],E[ee]=oe}return this.conjugate(E,d,m),this.transform(E,d,W,C,m,w),this.conjugate(W,C,m),this.normalize13b(W,m),g.negative=h.negative^p.negative,g.length=h.length+p.length,g.strip()},i.prototype.mul=function(h){var p=new i(null);return p.words=new Array(this.length+h.length),this.mulTo(h,p)},i.prototype.mulf=function(h){var p=new i(null);return p.words=new Array(this.length+h.length),_(this,h,p)},i.prototype.imul=function(h){return this.clone().mulTo(h,this)},i.prototype.imuln=function(h){r(typeof h=="number"),r(h<67108864);for(var p=0,g=0;g<this.length;g++){var m=(this.words[g]|0)*h,w=(m&67108863)+(p&67108863);p>>=26,p+=m/67108864|0,p+=w>>>26,this.words[g]=w&67108863}return p!==0&&(this.words[g]=p,this.length++),this},i.prototype.muln=function(h){return this.clone().imuln(h)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(h){var p=y(h);if(p.length===0)return new i(1);for(var g=this,m=0;m<p.length&&p[m]===0;m++,g=g.sqr());if(++m<p.length)for(var w=g.sqr();m<p.length;m++,w=w.sqr())p[m]!==0&&(g=g.mul(w));return g},i.prototype.iushln=function(h){r(typeof h=="number"&&h>=0);var p=h%26,g=(h-p)/26,m=67108863>>>26-p<<26-p,w;if(p!==0){var C=0;for(w=0;w<this.length;w++){var I=this.words[w]&m,E=(this.words[w]|0)-I<<p;this.words[w]=E|C,C=I>>>26-p}C&&(this.words[w]=C,this.length++)}if(g!==0){for(w=this.length-1;w>=0;w--)this.words[w+g]=this.words[w];for(w=0;w<g;w++)this.words[w]=0;this.length+=g}return this.strip()},i.prototype.ishln=function(h){return r(this.negative===0),this.iushln(h)},i.prototype.iushrn=function(h,p,g){r(typeof h=="number"&&h>=0);var m;p?m=(p-p%26)/26:m=0;var w=h%26,C=Math.min((h-w)/26,this.length),I=67108863^67108863>>>w<<w,E=g;if(m-=C,m=Math.max(0,m),E){for(var d=0;d<C;d++)E.words[d]=this.words[d];E.length=C}if(C!==0)if(this.length>C)for(this.length-=C,d=0;d<this.length;d++)this.words[d]=this.words[d+C];else this.words[0]=0,this.length=1;var S=0;for(d=this.length-1;d>=0&&(S!==0||d>=m);d--){var G=this.words[d]|0;this.words[d]=S<<26-w|G>>>w,S=G&I}return E&&S!==0&&(E.words[E.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(h,p,g){return r(this.negative===0),this.iushrn(h,p,g)},i.prototype.shln=function(h){return this.clone().ishln(h)},i.prototype.ushln=function(h){return this.clone().iushln(h)},i.prototype.shrn=function(h){return this.clone().ishrn(h)},i.prototype.ushrn=function(h){return this.clone().iushrn(h)},i.prototype.testn=function(h){r(typeof h=="number"&&h>=0);var p=h%26,g=(h-p)/26,m=1<<p;if(this.length<=g)return!1;var w=this.words[g];return!!(w&m)},i.prototype.imaskn=function(h){r(typeof h=="number"&&h>=0);var p=h%26,g=(h-p)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(p!==0&&g++,this.length=Math.min(g,this.length),p!==0){var m=67108863^67108863>>>p<<p;this.words[this.length-1]&=m}return this.strip()},i.prototype.maskn=function(h){return this.clone().imaskn(h)},i.prototype.iaddn=function(h){return r(typeof h=="number"),r(h<67108864),h<0?this.isubn(-h):this.negative!==0?this.length===1&&(this.words[0]|0)<h?(this.words[0]=h-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(h),this.negative=1,this):this._iaddn(h)},i.prototype._iaddn=function(h){this.words[0]+=h;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},i.prototype.isubn=function(h){if(r(typeof h=="number"),r(h<67108864),h<0)return this.iaddn(-h);if(this.negative!==0)return this.negative=0,this.iaddn(h),this.negative=1,this;if(this.words[0]-=h,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this.strip()},i.prototype.addn=function(h){return this.clone().iaddn(h)},i.prototype.subn=function(h){return this.clone().isubn(h)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(h,p,g){var m=h.length+g,w;this._expand(m);var C,I=0;for(w=0;w<h.length;w++){C=(this.words[w+g]|0)+I;var E=(h.words[w]|0)*p;C-=E&67108863,I=(C>>26)-(E/67108864|0),this.words[w+g]=C&67108863}for(;w<this.length-g;w++)C=(this.words[w+g]|0)+I,I=C>>26,this.words[w+g]=C&67108863;if(I===0)return this.strip();for(r(I===-1),I=0,w=0;w<this.length;w++)C=-(this.words[w]|0)+I,I=C>>26,this.words[w]=C&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(h,p){var g=this.length-h.length,m=this.clone(),w=h,C=w.words[w.length-1]|0,I=this._countBits(C);g=26-I,g!==0&&(w=w.ushln(g),m.iushln(g),C=w.words[w.length-1]|0);var E=m.length-w.length,d;if(p!=="mod"){d=new i(null),d.length=E+1,d.words=new Array(d.length);for(var S=0;S<d.length;S++)d.words[S]=0}var G=m.clone()._ishlnsubmul(w,1,E);G.negative===0&&(m=G,d&&(d.words[E]=1));for(var Y=E-1;Y>=0;Y--){var W=(m.words[w.length+Y]|0)*67108864+(m.words[w.length+Y-1]|0);for(W=Math.min(W/C|0,67108863),m._ishlnsubmul(w,W,Y);m.negative!==0;)W--,m.negative=0,m._ishlnsubmul(w,1,Y),m.isZero()||(m.negative^=1);d&&(d.words[Y]=W)}return d&&d.strip(),m.strip(),p!=="div"&&g!==0&&m.iushrn(g),{div:d||null,mod:m}},i.prototype.divmod=function(h,p,g){if(r(!h.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var m,w,C;return this.negative!==0&&h.negative===0?(C=this.neg().divmod(h,p),p!=="mod"&&(m=C.div.neg()),p!=="div"&&(w=C.mod.neg(),g&&w.negative!==0&&w.iadd(h)),{div:m,mod:w}):this.negative===0&&h.negative!==0?(C=this.divmod(h.neg(),p),p!=="mod"&&(m=C.div.neg()),{div:m,mod:C.mod}):(this.negative&h.negative)!=0?(C=this.neg().divmod(h.neg(),p),p!=="div"&&(w=C.mod.neg(),g&&w.negative!==0&&w.isub(h)),{div:C.div,mod:w}):h.length>this.length||this.cmp(h)<0?{div:new i(0),mod:this}:h.length===1?p==="div"?{div:this.divn(h.words[0]),mod:null}:p==="mod"?{div:null,mod:new i(this.modn(h.words[0]))}:{div:this.divn(h.words[0]),mod:new i(this.modn(h.words[0]))}:this._wordDiv(h,p)},i.prototype.div=function(h){return this.divmod(h,"div",!1).div},i.prototype.mod=function(h){return this.divmod(h,"mod",!1).mod},i.prototype.umod=function(h){return this.divmod(h,"mod",!0).mod},i.prototype.divRound=function(h){var p=this.divmod(h);if(p.mod.isZero())return p.div;var g=p.div.negative!==0?p.mod.isub(h):p.mod,m=h.ushrn(1),w=h.andln(1),C=g.cmp(m);return C<0||w===1&&C===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},i.prototype.modn=function(h){r(h<=67108863);for(var p=(1<<26)%h,g=0,m=this.length-1;m>=0;m--)g=(p*g+(this.words[m]|0))%h;return g},i.prototype.idivn=function(h){r(h<=67108863);for(var p=0,g=this.length-1;g>=0;g--){var m=(this.words[g]|0)+p*67108864;this.words[g]=m/h|0,p=m%h}return this.strip()},i.prototype.divn=function(h){return this.clone().idivn(h)},i.prototype.egcd=function(h){r(h.negative===0),r(!h.isZero());var p=this,g=h.clone();p.negative!==0?p=p.umod(h):p=p.clone();for(var m=new i(1),w=new i(0),C=new i(0),I=new i(1),E=0;p.isEven()&&g.isEven();)p.iushrn(1),g.iushrn(1),++E;for(var d=g.clone(),S=p.clone();!p.isZero();){for(var G=0,Y=1;(p.words[0]&Y)==0&&G<26;++G,Y<<=1);if(G>0)for(p.iushrn(G);G-- >0;)(m.isOdd()||w.isOdd())&&(m.iadd(d),w.isub(S)),m.iushrn(1),w.iushrn(1);for(var W=0,ee=1;(g.words[0]&ee)==0&&W<26;++W,ee<<=1);if(W>0)for(g.iushrn(W);W-- >0;)(C.isOdd()||I.isOdd())&&(C.iadd(d),I.isub(S)),C.iushrn(1),I.iushrn(1);p.cmp(g)>=0?(p.isub(g),m.isub(C),w.isub(I)):(g.isub(p),C.isub(m),I.isub(w))}return{a:C,b:I,gcd:g.iushln(E)}},i.prototype._invmp=function(h){r(h.negative===0),r(!h.isZero());var p=this,g=h.clone();p.negative!==0?p=p.umod(h):p=p.clone();for(var m=new i(1),w=new i(0),C=g.clone();p.cmpn(1)>0&&g.cmpn(1)>0;){for(var I=0,E=1;(p.words[0]&E)==0&&I<26;++I,E<<=1);if(I>0)for(p.iushrn(I);I-- >0;)m.isOdd()&&m.iadd(C),m.iushrn(1);for(var d=0,S=1;(g.words[0]&S)==0&&d<26;++d,S<<=1);if(d>0)for(g.iushrn(d);d-- >0;)w.isOdd()&&w.iadd(C),w.iushrn(1);p.cmp(g)>=0?(p.isub(g),m.isub(w)):(g.isub(p),w.isub(m))}var G;return p.cmpn(1)===0?G=m:G=w,G.cmpn(0)<0&&G.iadd(h),G},i.prototype.gcd=function(h){if(this.isZero())return h.abs();if(h.isZero())return this.abs();var p=this.clone(),g=h.clone();p.negative=0,g.negative=0;for(var m=0;p.isEven()&&g.isEven();m++)p.iushrn(1),g.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;g.isEven();)g.iushrn(1);var w=p.cmp(g);if(w<0){var C=p;p=g,g=C}else if(w===0||g.cmpn(1)===0)break;p.isub(g)}while(!0);return g.iushln(m)},i.prototype.invm=function(h){return this.egcd(h).a.umod(h)},i.prototype.isEven=function(){return(this.words[0]&1)==0},i.prototype.isOdd=function(){return(this.words[0]&1)==1},i.prototype.andln=function(h){return this.words[0]&h},i.prototype.bincn=function(h){r(typeof h=="number");var p=h%26,g=(h-p)/26,m=1<<p;if(this.length<=g)return this._expand(g+1),this.words[g]|=m,this;for(var w=m,C=g;w!==0&&C<this.length;C++){var I=this.words[C]|0;I+=w,w=I>>>26,I&=67108863,this.words[C]=I}return w!==0&&(this.words[C]=w,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(h){var p=h<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this.strip();var g;if(this.length>1)g=1;else{p&&(h=-h),r(h<=67108863,"Number is too big");var m=this.words[0]|0;g=m===h?0:m<h?-1:1}return this.negative!==0?-g|0:g},i.prototype.cmp=function(h){if(this.negative!==0&&h.negative===0)return-1;if(this.negative===0&&h.negative!==0)return 1;var p=this.ucmp(h);return this.negative!==0?-p|0:p},i.prototype.ucmp=function(h){if(this.length>h.length)return 1;if(this.length<h.length)return-1;for(var p=0,g=this.length-1;g>=0;g--){var m=this.words[g]|0,w=h.words[g]|0;if(m!==w){m<w?p=-1:m>w&&(p=1);break}}return p},i.prototype.gtn=function(h){return this.cmpn(h)===1},i.prototype.gt=function(h){return this.cmp(h)===1},i.prototype.gten=function(h){return this.cmpn(h)>=0},i.prototype.gte=function(h){return this.cmp(h)>=0},i.prototype.ltn=function(h){return this.cmpn(h)===-1},i.prototype.lt=function(h){return this.cmp(h)===-1},i.prototype.lten=function(h){return this.cmpn(h)<=0},i.prototype.lte=function(h){return this.cmp(h)<=0},i.prototype.eqn=function(h){return this.cmpn(h)===0},i.prototype.eq=function(h){return this.cmp(h)===0},i.red=function(h){return new H(h)},i.prototype.toRed=function(h){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),h.convertTo(this)._forceRed(h)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(h){return this.red=h,this},i.prototype.forceRed=function(h){return r(!this.red,"Already a number in reduction context"),this._forceRed(h)},i.prototype.redAdd=function(h){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,h)},i.prototype.redIAdd=function(h){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,h)},i.prototype.redSub=function(h){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,h)},i.prototype.redISub=function(h){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,h)},i.prototype.redShl=function(h){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,h)},i.prototype.redMul=function(h){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.mul(this,h)},i.prototype.redIMul=function(h){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,h),this.red.imul(this,h)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(h){return r(this.red&&!h.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,h)};var M={k256:null,p224:null,p192:null,p25519:null};function q(B,h){this.name=B,this.p=new i(h,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}q.prototype._tmp=function(){var h=new i(null);return h.words=new Array(Math.ceil(this.n/13)),h},q.prototype.ireduce=function(h){var p=h,g;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),g=p.bitLength();while(g>this.n);var m=g<this.n?-1:p.ucmp(this.p);return m===0?(p.words[0]=0,p.length=1):m>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},q.prototype.split=function(h,p){h.iushrn(this.n,0,p)},q.prototype.imulK=function(h){return h.imul(this.k)};function z(){q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(z,q),z.prototype.split=function(h,p){for(var g=4194303,m=Math.min(h.length,9),w=0;w<m;w++)p.words[w]=h.words[w];if(p.length=m,h.length<=9){h.words[0]=0,h.length=1;return}var C=h.words[9];for(p.words[p.length++]=C&g,w=10;w<h.length;w++){var I=h.words[w]|0;h.words[w-10]=(I&g)<<4|C>>>22,C=I}C>>>=22,h.words[w-10]=C,C===0&&h.length>10?h.length-=10:h.length-=9},z.prototype.imulK=function(h){h.words[h.length]=0,h.words[h.length+1]=0,h.length+=2;for(var p=0,g=0;g<h.length;g++){var m=h.words[g]|0;p+=m*977,h.words[g]=p&67108863,p=m*64+(p/67108864|0)}return h.words[h.length-1]===0&&(h.length--,h.words[h.length-1]===0&&h.length--),h};function O(){q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(O,q);function U(){q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(U,q);function $(){q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n($,q),$.prototype.imulK=function(h){for(var p=0,g=0;g<h.length;g++){var m=(h.words[g]|0)*19+p,w=m&67108863;m>>>=26,h.words[g]=w,p=m}return p!==0&&(h.words[h.length++]=p),h},i._prime=function(h){if(M[h])return M[h];var p;if(h==="k256")p=new z;else if(h==="p224")p=new O;else if(h==="p192")p=new U;else if(h==="p25519")p=new $;else throw new Error("Unknown prime "+h);return M[h]=p,p};function H(B){if(typeof B=="string"){var h=i._prime(B);this.m=h.p,this.prime=h}else r(B.gtn(1),"modulus must be greater than 1"),this.m=B,this.prime=null}H.prototype._verify1=function(h){r(h.negative===0,"red works only with positives"),r(h.red,"red works only with red numbers")},H.prototype._verify2=function(h,p){r((h.negative|p.negative)==0,"red works only with positives"),r(h.red&&h.red===p.red,"red works only with red numbers")},H.prototype.imod=function(h){return this.prime?this.prime.ireduce(h)._forceRed(this):h.umod(this.m)._forceRed(this)},H.prototype.neg=function(h){return h.isZero()?h.clone():this.m.sub(h)._forceRed(this)},H.prototype.add=function(h,p){this._verify2(h,p);var g=h.add(p);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},H.prototype.iadd=function(h,p){this._verify2(h,p);var g=h.iadd(p);return g.cmp(this.m)>=0&&g.isub(this.m),g},H.prototype.sub=function(h,p){this._verify2(h,p);var g=h.sub(p);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},H.prototype.isub=function(h,p){this._verify2(h,p);var g=h.isub(p);return g.cmpn(0)<0&&g.iadd(this.m),g},H.prototype.shl=function(h,p){return this._verify1(h),this.imod(h.ushln(p))},H.prototype.imul=function(h,p){return this._verify2(h,p),this.imod(h.imul(p))},H.prototype.mul=function(h,p){return this._verify2(h,p),this.imod(h.mul(p))},H.prototype.isqr=function(h){return this.imul(h,h.clone())},H.prototype.sqr=function(h){return this.mul(h,h)},H.prototype.sqrt=function(h){if(h.isZero())return h.clone();var p=this.m.andln(3);if(r(p%2==1),p===3){var g=this.m.add(new i(1)).iushrn(2);return this.pow(h,g)}for(var m=this.m.subn(1),w=0;!m.isZero()&&m.andln(1)===0;)w++,m.iushrn(1);r(!m.isZero());var C=new i(1).toRed(this),I=C.redNeg(),E=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new i(2*d*d).toRed(this);this.pow(d,E).cmp(I)!==0;)d.redIAdd(I);for(var S=this.pow(d,m),G=this.pow(h,m.addn(1).iushrn(1)),Y=this.pow(h,m),W=w;Y.cmp(C)!==0;){for(var ee=Y,oe=0;ee.cmp(C)!==0;oe++)ee=ee.redSqr();r(oe<W);var he=this.pow(S,new i(1).iushln(W-oe-1));G=G.redMul(he),S=he.redSqr(),Y=Y.redMul(S),W=oe}return G},H.prototype.invm=function(h){var p=h._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},H.prototype.pow=function(h,p){if(p.isZero())return new i(1).toRed(this);if(p.cmpn(1)===0)return h.clone();var g=4,m=new Array(1<<g);m[0]=new i(1).toRed(this),m[1]=h;for(var w=2;w<m.length;w++)m[w]=this.mul(m[w-1],h);var C=m[0],I=0,E=0,d=p.bitLength()%26;for(d===0&&(d=26),w=p.length-1;w>=0;w--){for(var S=p.words[w],G=d-1;G>=0;G--){var Y=S>>G&1;if(C!==m[0]&&(C=this.sqr(C)),Y===0&&I===0){E=0;continue}I<<=1,I|=Y,E++,!(E!==g&&(w!==0||G!==0))&&(C=this.mul(C,m[I]),E=0,I=0)}d=26}return C},H.prototype.convertTo=function(h){var p=h.umod(this.m);return p===h?p.clone():p},H.prototype.convertFrom=function(h){var p=h.clone();return p.red=null,p},i.mont=function(h){return new X(h)};function X(B){H.call(this,B),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(X,H),X.prototype.convertTo=function(h){return this.imod(h.ushln(this.shift))},X.prototype.convertFrom=function(h){var p=this.imod(h.mul(this.rinv));return p.red=null,p},X.prototype.imul=function(h,p){if(h.isZero()||p.isZero())return h.words[0]=0,h.length=1,h;var g=h.imul(p),m=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=g.isub(m).iushrn(this.shift),C=w;return w.cmp(this.m)>=0?C=w.isub(this.m):w.cmpn(0)<0&&(C=w.iadd(this.m)),C._forceRed(this)},X.prototype.mul=function(h,p){if(h.isZero()||p.isZero())return new i(0)._forceRed(this);var g=h.mul(p),m=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=g.isub(m).iushrn(this.shift),C=w;return w.cmp(this.m)>=0?C=w.isub(this.m):w.cmpn(0)<0&&(C=w.iadd(this.m)),C._forceRed(this)},X.prototype.invm=function(h){var p=this.imod(h._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(typeof Ru=="undefined"||Ru,Yy)});var jn=T((HC,Qy)=>{Qy.exports=Wy;function Wy(t,e){if(!t)throw new Error(e||"Assertion failed")}Wy.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)}});var qu=T(Xy=>{"use strict";var zo=Xy;function k7(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t!="string"){for(var n=0;n<t.length;n++)r[n]=t[n]|0;return r}if(e==="hex"){t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!=0&&(t="0"+t);for(var n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(var n=0;n<t.length;n++){var i=t.charCodeAt(n),a=i>>8,s=i&255;a?r.push(a,s):r.push(s)}return r}zo.toArray=k7;function Jy(t){return t.length===1?"0"+t:t}zo.zero2=Jy;function Zy(t){for(var e="",r=0;r<t.length;r++)e+=Jy(t[r].toString(16));return e}zo.toHex=Zy;zo.encode=function(e,r){return r==="hex"?Zy(e):e}});var ir=T(e2=>{"use strict";var Tr=e2,N7=en(),L7=jn(),Vo=qu();Tr.assert=L7;Tr.toArray=Vo.toArray;Tr.zero2=Vo.zero2;Tr.toHex=Vo.toHex;Tr.encode=Vo.encode;function D7(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);for(var i=1<<e+1,a=t.clone(),s=0;s<n.length;s++){var o,f=a.andln(i-1);a.isOdd()?(f>(i>>1)-1?o=(i>>1)-f:o=f,a.isubn(o)):o=0,n[s]=o,a.iushrn(1)}return n}Tr.getNAF=D7;function O7(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var n=0,i=0,a;t.cmpn(-n)>0||e.cmpn(-i)>0;){var s=t.andln(3)+n&3,o=e.andln(3)+i&3;s===3&&(s=-1),o===3&&(o=-1);var f;(s&1)==0?f=0:(a=t.andln(7)+n&7,(a===3||a===5)&&o===2?f=-s:f=s),r[0].push(f);var u;(o&1)==0?u=0:(a=e.andln(7)+i&7,(a===3||a===5)&&s===2?u=-o:u=o),r[1].push(u),2*n===f+1&&(n=1-n),2*i===u+1&&(i=1-i),t.iushrn(1),e.iushrn(1)}return r}Tr.getJSF=O7;function K7(t,e,r){var n="_"+e;t.prototype[e]=function(){return this[n]!==void 0?this[n]:this[n]=r.call(this)}}Tr.cachedProperty=K7;function F7(t){return typeof t=="string"?Tr.toArray(t,"hex"):t}Tr.parseBytes=F7;function U7(t){return new N7(t,"hex","le")}Tr.intFromLE=U7});var Du=T(($C,Lu)=>{var ku;Lu.exports=function(e){return ku||(ku=new Gn(null)),ku.generate(e)};function Gn(t){this.rand=t}Lu.exports.Rand=Gn;Gn.prototype.generate=function(e){return this._rand(e)};Gn.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Gn.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?Gn.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(Gn.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if(Nu=rs(),typeof Nu.randomBytes!="function")throw new Error("Not supported");Gn.prototype._rand=function(e){return Nu.randomBytes(e)}}catch(t){}var Nu});var ls=T((YC,t2)=>{"use strict";var mi=en(),hs=ir(),Ho=hs.getNAF,z7=hs.getJSF,jo=hs.assert;function $n(t,e){this.type=t,this.p=new mi(e.p,16),this.red=e.prime?mi.red(e.prime):mi.mont(this.p),this.zero=new mi(0).toRed(this.red),this.one=new mi(1).toRed(this.red),this.two=new mi(2).toRed(this.red),this.n=e.n&&new mi(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}t2.exports=$n;$n.prototype.point=function(){throw new Error("Not implemented")};$n.prototype.validate=function(){throw new Error("Not implemented")};$n.prototype._fixedNafMul=function(e,r){jo(e.precomputed);var n=e._getDoubles(),i=Ho(r,1,this._bitLength),a=(1<<n.step+1)-(n.step%2==0?2:1);a/=3;var s=[],o,f;for(o=0;o<i.length;o+=n.step){f=0;for(var u=o+n.step-1;u>=o;u--)f=(f<<1)+i[u];s.push(f)}for(var c=this.jpoint(null,null,null),l=this.jpoint(null,null,null),y=a;y>0;y--){for(o=0;o<s.length;o++)f=s[o],f===y?l=l.mixedAdd(n.points[o]):f===-y&&(l=l.mixedAdd(n.points[o].neg()));c=c.add(l)}return c.toP()};$n.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var a=i.points,s=Ho(r,n,this._bitLength),o=this.jpoint(null,null,null),f=s.length-1;f>=0;f--){for(var u=0;f>=0&&s[f]===0;f--)u++;if(f>=0&&u++,o=o.dblp(u),f<0)break;var c=s[f];jo(c!==0),e.type==="affine"?c>0?o=o.mixedAdd(a[c-1>>1]):o=o.mixedAdd(a[-c-1>>1].neg()):c>0?o=o.add(a[c-1>>1]):o=o.add(a[-c-1>>1].neg())}return e.type==="affine"?o.toP():o};$n.prototype._wnafMulAdd=function(e,r,n,i,a){var s=this._wnafT1,o=this._wnafT2,f=this._wnafT3,u=0,c,l,y;for(c=0;c<i;c++){y=r[c];var x=y._getNAFPoints(e);s[c]=x.wnd,o[c]=x.points}for(c=i-1;c>=1;c-=2){var v=c-1,b=c;if(s[v]!==1||s[b]!==1){f[v]=Ho(n[v],s[v],this._bitLength),f[b]=Ho(n[b],s[b],this._bitLength),u=Math.max(f[v].length,u),u=Math.max(f[b].length,u);continue}var _=[r[v],null,null,r[b]];r[v].y.cmp(r[b].y)===0?(_[1]=r[v].add(r[b]),_[2]=r[v].toJ().mixedAdd(r[b].neg())):r[v].y.cmp(r[b].y.redNeg())===0?(_[1]=r[v].toJ().mixedAdd(r[b]),_[2]=r[v].add(r[b].neg())):(_[1]=r[v].toJ().mixedAdd(r[b]),_[2]=r[v].toJ().mixedAdd(r[b].neg()));var A=[-3,-1,-5,-7,0,7,5,1,3],M=z7(n[v],n[b]);for(u=Math.max(M[0].length,u),f[v]=new Array(u),f[b]=new Array(u),l=0;l<u;l++){var q=M[0][l]|0,z=M[1][l]|0;f[v][l]=A[(q+1)*3+(z+1)],f[b][l]=0,o[v]=_}}var O=this.jpoint(null,null,null),U=this._wnafT4;for(c=u;c>=0;c--){for(var $=0;c>=0;){var H=!0;for(l=0;l<i;l++)U[l]=f[l][c]|0,U[l]!==0&&(H=!1);if(!H)break;$++,c--}if(c>=0&&$++,O=O.dblp($),c<0)break;for(l=0;l<i;l++){var X=U[l];X!==0&&(X>0?y=o[l][X-1>>1]:X<0&&(y=o[l][-X-1>>1].neg()),y.type==="affine"?O=O.mixedAdd(y):O=O.add(y))}}for(c=0;c<i;c++)o[c]=null;return a?O:O.toP()};function mr(t,e){this.curve=t,this.type=e,this.precomputed=null}$n.BasePoint=mr;mr.prototype.eq=function(){throw new Error("Not implemented")};mr.prototype.validate=function(){return this.curve.validate(this)};$n.prototype.decodePoint=function(e,r){e=hs.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1==2*n){e[0]===6?jo(e[e.length-1]%2==0):e[0]===7&&jo(e[e.length-1]%2==1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};mr.prototype.encodeCompressed=function(e){return this.encode(e,!0)};mr.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};mr.prototype.encode=function(e,r){return hs.encode(this._encode(r),e)};mr.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};mr.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};mr.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,a=0;a<r;a+=e){for(var s=0;s<e;s++)i=i.dbl();n.push(i)}return{step:e,points:n}};mr.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),a=1;a<n;a++)r[a]=r[a-1].add(i);return{wnd:e,points:r}};mr.prototype._getBeta=function(){return null};mr.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r}});var ds=T((WC,Ou)=>{typeof Object.create=="function"?Ou.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Ou.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var n2=T((QC,r2)=>{"use strict";var V7=ir(),Qe=en(),Ku=ds(),ca=ls(),H7=V7.assert;function xr(t){ca.call(this,"short",t),this.a=new Qe(t.a,16).toRed(this.red),this.b=new Qe(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Ku(xr,ca);r2.exports=xr;xr.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new Qe(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new Qe(e.lambda,16);else{var a=this._getEndoRoots(this.n);this.g.mul(a[0]).x.cmp(this.g.x.redMul(r))===0?n=a[0]:(n=a[1],H7(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var s;return e.basis?s=e.basis.map(function(o){return{a:new Qe(o.a,16),b:new Qe(o.b,16)}}):s=this._getEndoBasis(n),{beta:r,lambda:n,basis:s}}};xr.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Qe.mont(e),n=new Qe(2).toRed(r).redInvm(),i=n.redNeg(),a=new Qe(3).toRed(r).redNeg().redSqrt().redMul(n),s=i.redAdd(a).fromRed(),o=i.redSub(a).fromRed();return[s,o]};xr.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),a=new Qe(1),s=new Qe(0),o=new Qe(0),f=new Qe(1),u,c,l,y,x,v,b,_=0,A,M;n.cmpn(0)!==0;){var q=i.div(n);A=i.sub(q.mul(n)),M=o.sub(q.mul(a));var z=f.sub(q.mul(s));if(!l&&A.cmp(r)<0)u=b.neg(),c=a,l=A.neg(),y=M;else if(l&&++_==2)break;b=A,i=n,n=A,o=a,a=M,f=s,s=z}x=A.neg(),v=M;var O=l.sqr().add(y.sqr()),U=x.sqr().add(v.sqr());return U.cmp(O)>=0&&(x=u,v=c),l.negative&&(l=l.neg(),y=y.neg()),x.negative&&(x=x.neg(),v=v.neg()),[{a:l,b:y},{a:x,b:v}]};xr.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],a=i.b.mul(e).divRound(this.n),s=n.b.neg().mul(e).divRound(this.n),o=a.mul(n.a),f=s.mul(i.a),u=a.mul(n.b),c=s.mul(i.b),l=e.sub(o).sub(f),y=u.add(c).neg();return{k1:l,k2:y}};xr.prototype.pointFromX=function(e,r){e=new Qe(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var a=i.fromRed().isOdd();return(r&&!a||!r&&a)&&(i=i.redNeg()),this.point(e,i)};xr.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),a=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(a).cmpn(0)===0};xr.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,a=this._endoWnafT2,s=0;s<e.length;s++){var o=this._endoSplit(r[s]),f=e[s],u=f._getBeta();o.k1.negative&&(o.k1.ineg(),f=f.neg(!0)),o.k2.negative&&(o.k2.ineg(),u=u.neg(!0)),i[s*2]=f,i[s*2+1]=u,a[s*2]=o.k1,a[s*2+1]=o.k2}for(var c=this._wnafMulAdd(1,i,a,s*2,n),l=0;l<s*2;l++)i[l]=null,a[l]=null;return c};function kt(t,e,r,n){ca.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Qe(e,16),this.y=new Qe(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Ku(kt,ca.BasePoint);xr.prototype.point=function(e,r,n){return new kt(this,e,r,n)};xr.prototype.pointFromJSON=function(e,r){return kt.fromJSON(this,e,r)};kt.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(a){return n.point(a.x.redMul(n.endo.beta),a.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};kt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};kt.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function a(o){return e.point(o[0],o[1],n)}var s=r[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(a))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(a))}},i};kt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};kt.prototype.isInfinity=function(){return this.inf};kt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};kt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),a=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),s=a.redSqr().redISub(this.x.redAdd(this.x)),o=a.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)};kt.prototype.getX=function(){return this.x.fromRed()};kt.prototype.getY=function(){return this.y.fromRed()};kt.prototype.mul=function(e){return e=new Qe(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};kt.prototype.mulAdd=function(e,r,n){var i=[this,r],a=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,a):this.curve._wnafMulAdd(1,i,a,2)};kt.prototype.jmulAdd=function(e,r,n){var i=[this,r],a=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,a,!0):this.curve._wnafMulAdd(1,i,a,2,!0)};kt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};kt.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(a){return a.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};kt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Ot(t,e,r,n){ca.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Qe(0)):(this.x=new Qe(e,16),this.y=new Qe(r,16),this.z=new Qe(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Ku(Ot,ca.BasePoint);xr.prototype.jpoint=function(e,r,n){return new Ot(this,e,r,n)};Ot.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};Ot.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Ot.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),a=e.x.redMul(n),s=this.y.redMul(r.redMul(e.z)),o=e.y.redMul(n.redMul(this.z)),f=i.redSub(a),u=s.redSub(o);if(f.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=f.redSqr(),l=c.redMul(f),y=i.redMul(c),x=u.redSqr().redIAdd(l).redISub(y).redISub(y),v=u.redMul(y.redISub(x)).redISub(s.redMul(l)),b=this.z.redMul(e.z).redMul(f);return this.curve.jpoint(x,v,b)};Ot.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),a=this.y,s=e.y.redMul(r).redMul(this.z),o=n.redSub(i),f=a.redSub(s);if(o.cmpn(0)===0)return f.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=o.redSqr(),c=u.redMul(o),l=n.redMul(u),y=f.redSqr().redIAdd(c).redISub(l).redISub(l),x=f.redMul(l.redISub(y)).redISub(a.redMul(c)),v=this.z.redMul(o);return this.curve.jpoint(y,x,v)};Ot.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,a=this.curve.tinv,s=this.x,o=this.y,f=this.z,u=f.redSqr().redSqr(),c=o.redAdd(o);for(r=0;r<e;r++){var l=s.redSqr(),y=c.redSqr(),x=y.redSqr(),v=l.redAdd(l).redIAdd(l).redIAdd(i.redMul(u)),b=s.redMul(y),_=v.redSqr().redISub(b.redAdd(b)),A=b.redISub(_),M=v.redMul(A);M=M.redIAdd(M).redISub(x);var q=c.redMul(f);r+1<e&&(u=u.redMul(x)),s=_,f=q,c=M}return this.curve.jpoint(s,c.redMul(a),f)};Ot.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Ot.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),a=this.y.redSqr(),s=a.redSqr(),o=this.x.redAdd(a).redSqr().redISub(i).redISub(s);o=o.redIAdd(o);var f=i.redAdd(i).redIAdd(i),u=f.redSqr().redISub(o).redISub(o),c=s.redIAdd(s);c=c.redIAdd(c),c=c.redIAdd(c),e=u,r=f.redMul(o.redISub(u)).redISub(c),n=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),y=this.y.redSqr(),x=y.redSqr(),v=this.x.redAdd(y).redSqr().redISub(l).redISub(x);v=v.redIAdd(v);var b=l.redAdd(l).redIAdd(l),_=b.redSqr(),A=x.redIAdd(x);A=A.redIAdd(A),A=A.redIAdd(A),e=_.redISub(v).redISub(v),r=b.redMul(v.redISub(e)).redISub(A),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};Ot.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),a=this.y.redSqr(),s=a.redSqr(),o=this.x.redAdd(a).redSqr().redISub(i).redISub(s);o=o.redIAdd(o);var f=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=f.redSqr().redISub(o).redISub(o);e=u;var c=s.redIAdd(s);c=c.redIAdd(c),c=c.redIAdd(c),r=f.redMul(o.redISub(u)).redISub(c),n=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),y=this.y.redSqr(),x=this.x.redMul(y),v=this.x.redSub(l).redMul(this.x.redAdd(l));v=v.redAdd(v).redIAdd(v);var b=x.redIAdd(x);b=b.redIAdd(b);var _=b.redAdd(b);e=v.redSqr().redISub(_),n=this.y.redAdd(this.z).redSqr().redISub(y).redISub(l);var A=y.redSqr();A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A),r=v.redMul(b.redISub(e)).redISub(A)}return this.curve.jpoint(e,r,n)};Ot.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,a=i.redSqr().redSqr(),s=r.redSqr(),o=n.redSqr(),f=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(a)),u=r.redAdd(r);u=u.redIAdd(u);var c=u.redMul(o),l=f.redSqr().redISub(c.redAdd(c)),y=c.redISub(l),x=o.redSqr();x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var v=f.redMul(y).redISub(x),b=n.redAdd(n).redMul(i);return this.curve.jpoint(l,v,b)};Ot.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),a=e.redAdd(e).redIAdd(e),s=a.redSqr(),o=this.x.redAdd(r).redSqr().redISub(e).redISub(i);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(s);var f=o.redSqr(),u=i.redIAdd(i);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var c=a.redIAdd(o).redSqr().redISub(s).redISub(f).redISub(u),l=r.redMul(c);l=l.redIAdd(l),l=l.redIAdd(l);var y=this.x.redMul(f).redISub(l);y=y.redIAdd(y),y=y.redIAdd(y);var x=this.y.redMul(c.redMul(u.redISub(c)).redISub(o.redMul(f)));x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var v=this.z.redAdd(o).redSqr().redISub(n).redISub(f);return this.curve.jpoint(y,x,v)};Ot.prototype.mul=function(e,r){return e=new Qe(e,r),this.curve._wnafMul(this,e)};Ot.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),a=n.redMul(e.z);return this.y.redMul(a).redISub(e.y.redMul(i)).cmpn(0)===0};Ot.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),a=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(a),this.x.cmp(n)===0)return!0}};Ot.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Ot.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var s2=T((JC,a2)=>{"use strict";var ha=en(),i2=ds(),Go=ls(),j7=ir();function la(t){Go.call(this,"mont",t),this.a=new ha(t.a,16).toRed(this.red),this.b=new ha(t.b,16).toRed(this.red),this.i4=new ha(4).toRed(this.red).redInvm(),this.two=new ha(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}i2(la,Go);a2.exports=la;la.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),a=i.redSqrt();return a.redSqr().cmp(i)===0};function Nt(t,e,r){Go.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new ha(e,16),this.z=new ha(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i2(Nt,Go.BasePoint);la.prototype.decodePoint=function(e,r){return this.point(j7.toArray(e,r),1)};la.prototype.point=function(e,r){return new Nt(this,e,r)};la.prototype.pointFromJSON=function(e){return Nt.fromJSON(this,e)};Nt.prototype.precompute=function(){};Nt.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Nt.fromJSON=function(e,r){return new Nt(e,r[0],r[1]||e.one)};Nt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Nt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Nt.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),a=r.redSub(i),s=r.redMul(i),o=a.redMul(i.redAdd(this.curve.a24.redMul(a)));return this.curve.point(s,o)};Nt.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Nt.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),a=e.x.redAdd(e.z),s=e.x.redSub(e.z),o=s.redMul(n),f=a.redMul(i),u=r.z.redMul(o.redAdd(f).redSqr()),c=r.x.redMul(o.redISub(f).redSqr());return this.curve.point(u,c)};Nt.prototype.mul=function(e){for(var r=e.clone(),n=this,i=this.curve.point(null,null),a=this,s=[];r.cmpn(0)!==0;r.iushrn(1))s.push(r.andln(1));for(var o=s.length-1;o>=0;o--)s[o]===0?(n=n.diffAdd(i,a),i=i.dbl()):(i=n.diffAdd(i,a),n=n.dbl());return i};Nt.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Nt.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Nt.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Nt.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Nt.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var u2=T((ZC,f2)=>{"use strict";var G7=ir(),An=en(),o2=ds(),$o=ls(),$7=G7.assert;function tn(t){this.twisted=(t.a|0)!=1,this.mOneA=this.twisted&&(t.a|0)==-1,this.extended=this.mOneA,$o.call(this,"edwards",t),this.a=new An(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new An(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new An(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),$7(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)==1}o2(tn,$o);f2.exports=tn;tn.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};tn.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};tn.prototype.jpoint=function(e,r,n,i){return this.point(e,r,n,i)};tn.prototype.pointFromX=function(e,r){e=new An(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),a=this.one.redSub(this.c2.redMul(this.d).redMul(n)),s=i.redMul(a.redInvm()),o=s.redSqrt();if(o.redSqr().redSub(s).cmp(this.zero)!==0)throw new Error("invalid point");var f=o.fromRed().isOdd();return(r&&!f||!r&&f)&&(o=o.redNeg()),this.point(e,o)};tn.prototype.pointFromY=function(e,r){e=new An(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),a=n.redMul(this.d).redMul(this.c2).redSub(this.a),s=i.redMul(a.redInvm());if(s.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var o=s.redSqrt();if(o.redSqr().redSub(s).cmp(this.zero)!==0)throw new Error("invalid point");return o.fromRed().isOdd()!==r&&(o=o.redNeg()),this.point(o,e)};tn.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),i=r.redMul(this.a).redAdd(n),a=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(a)===0};function Ke(t,e,r,n,i){$o.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new An(e,16),this.y=new An(r,16),this.z=n?new An(n,16):this.curve.one,this.t=i&&new An(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o2(Ke,$o.BasePoint);tn.prototype.pointFromJSON=function(e){return Ke.fromJSON(this,e)};tn.prototype.point=function(e,r,n,i){return new Ke(this,e,r,n,i)};Ke.fromJSON=function(e,r){return new Ke(e,r[0],r[1],r[2])};Ke.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Ke.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Ke.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),a=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),s=i.redAdd(r),o=s.redSub(n),f=i.redSub(r),u=a.redMul(o),c=s.redMul(f),l=a.redMul(f),y=o.redMul(s);return this.curve.point(u,c,y,l)};Ke.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,a,s,o,f,u;if(this.curve.twisted){o=this.curve._mulA(r);var c=o.redAdd(n);this.zOne?(i=e.redSub(r).redSub(n).redMul(c.redSub(this.curve.two)),a=c.redMul(o.redSub(n)),s=c.redSqr().redSub(c).redSub(c)):(f=this.z.redSqr(),u=c.redSub(f).redISub(f),i=e.redSub(r).redISub(n).redMul(u),a=c.redMul(o.redSub(n)),s=c.redMul(u))}else o=r.redAdd(n),f=this.curve._mulC(this.z).redSqr(),u=o.redSub(f).redSub(f),i=this.curve._mulC(e.redISub(o)).redMul(u),a=this.curve._mulC(o).redMul(r.redISub(n)),s=o.redMul(u);return this.curve.point(i,a,s)};Ke.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Ke.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),a=this.z.redMul(e.z.redAdd(e.z)),s=n.redSub(r),o=a.redSub(i),f=a.redAdd(i),u=n.redAdd(r),c=s.redMul(o),l=f.redMul(u),y=s.redMul(u),x=o.redMul(f);return this.curve.point(c,l,x,y)};Ke.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),a=this.y.redMul(e.y),s=this.curve.d.redMul(i).redMul(a),o=n.redSub(s),f=n.redAdd(s),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(a),c=r.redMul(o).redMul(u),l,y;return this.curve.twisted?(l=r.redMul(f).redMul(a.redSub(this.curve._mulA(i))),y=o.redMul(f)):(l=r.redMul(f).redMul(a.redSub(i)),y=this.curve._mulC(o).redMul(f)),this.curve.point(c,l,y)};Ke.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Ke.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Ke.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)};Ke.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)};Ke.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Ke.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Ke.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Ke.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Ke.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Ke.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};Ke.prototype.toP=Ke.prototype.normalize;Ke.prototype.mixedAdd=Ke.prototype.add});var Fu=T(c2=>{"use strict";var Yo=c2;Yo.base=ls();Yo.short=n2();Yo.mont=s2();Yo.edwards=u2()});var Pr=T(Le=>{"use strict";var Y7=jn(),W7=ds();Le.inherits=W7;function Q7(t,e){return(t.charCodeAt(e)&64512)!=55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)==56320}function J7(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!=0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var a=t.charCodeAt(i);a<128?r[n++]=a:a<2048?(r[n++]=a>>6|192,r[n++]=a&63|128):Q7(t,i)?(a=65536+((a&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=a>>18|240,r[n++]=a>>12&63|128,r[n++]=a>>6&63|128,r[n++]=a&63|128):(r[n++]=a>>12|224,r[n++]=a>>6&63|128,r[n++]=a&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}Le.toArray=J7;function Z7(t){for(var e="",r=0;r<t.length;r++)e+=l2(t[r].toString(16));return e}Le.toHex=Z7;function h2(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Le.htonl=h2;function X7(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=h2(i)),r+=d2(i.toString(16))}return r}Le.toHex32=X7;function l2(t){return t.length===1?"0"+t:t}Le.zero2=l2;function d2(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Le.zero8=d2;function e9(t,e,r,n){var i=r-e;Y7(i%4==0);for(var a=new Array(i/4),s=0,o=e;s<a.length;s++,o+=4){var f;n==="big"?f=t[o]<<24|t[o+1]<<16|t[o+2]<<8|t[o+3]:f=t[o+3]<<24|t[o+2]<<16|t[o+1]<<8|t[o],a[s]=f>>>0}return a}Le.join32=e9;function t9(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var a=t[n];e==="big"?(r[i]=a>>>24,r[i+1]=a>>>16&255,r[i+2]=a>>>8&255,r[i+3]=a&255):(r[i+3]=a>>>24,r[i+2]=a>>>16&255,r[i+1]=a>>>8&255,r[i]=a&255)}return r}Le.split32=t9;function r9(t,e){return t>>>e|t<<32-e}Le.rotr32=r9;function n9(t,e){return t<<e|t>>>32-e}Le.rotl32=n9;function i9(t,e){return t+e>>>0}Le.sum32=i9;function a9(t,e,r){return t+e+r>>>0}Le.sum32_3=a9;function s9(t,e,r,n){return t+e+r+n>>>0}Le.sum32_4=s9;function o9(t,e,r,n,i){return t+e+r+n+i>>>0}Le.sum32_5=o9;function f9(t,e,r,n){var i=t[e],a=t[e+1],s=n+a>>>0,o=(s<n?1:0)+r+i;t[e]=o>>>0,t[e+1]=s}Le.sum64=f9;function u9(t,e,r,n){var i=e+n>>>0,a=(i<e?1:0)+t+r;return a>>>0}Le.sum64_hi=u9;function c9(t,e,r,n){var i=e+n;return i>>>0}Le.sum64_lo=c9;function h9(t,e,r,n,i,a,s,o){var f=0,u=e;u=u+n>>>0,f+=u<e?1:0,u=u+a>>>0,f+=u<a?1:0,u=u+o>>>0,f+=u<o?1:0;var c=t+r+i+s+f;return c>>>0}Le.sum64_4_hi=h9;function l9(t,e,r,n,i,a,s,o){var f=e+n+a+o;return f>>>0}Le.sum64_4_lo=l9;function d9(t,e,r,n,i,a,s,o,f,u){var c=0,l=e;l=l+n>>>0,c+=l<e?1:0,l=l+a>>>0,c+=l<a?1:0,l=l+o>>>0,c+=l<o?1:0,l=l+u>>>0,c+=l<u?1:0;var y=t+r+i+s+f+c;return y>>>0}Le.sum64_5_hi=d9;function p9(t,e,r,n,i,a,s,o,f,u){var c=e+n+a+o+u;return c>>>0}Le.sum64_5_lo=p9;function y9(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}Le.rotr64_hi=y9;function b9(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Le.rotr64_lo=b9;function v9(t,e,r){return t>>>r}Le.shr64_hi=v9;function g9(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Le.shr64_lo=g9});var da=T(y2=>{"use strict";var p2=Pr(),m9=jn();function Wo(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}y2.BlockHash=Wo;Wo.prototype.update=function(e,r){if(e=p2.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=p2.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};Wo.prototype.digest=function(e){return this.update(this._pad()),m9(this.pending===null),this._digest(e)};Wo.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var a=1;a<n;a++)i[a]=0;if(e<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)i[a++]=0;i[a++]=0,i[a++]=0,i[a++]=0,i[a++]=0,i[a++]=e>>>24&255,i[a++]=e>>>16&255,i[a++]=e>>>8&255,i[a++]=e&255}else for(i[a++]=e&255,i[a++]=e>>>8&255,i[a++]=e>>>16&255,i[a++]=e>>>24&255,i[a++]=0,i[a++]=0,i[a++]=0,i[a++]=0,s=8;s<this.padLength;s++)i[a++]=0;return i}});var Uu=T(Bn=>{"use strict";var x9=Pr(),rn=x9.rotr32;function w9(t,e,r,n){if(t===0)return b2(e,r,n);if(t===1||t===3)return g2(e,r,n);if(t===2)return v2(e,r,n)}Bn.ft_1=w9;function b2(t,e,r){return t&e^~t&r}Bn.ch32=b2;function v2(t,e,r){return t&e^t&r^e&r}Bn.maj32=v2;function g2(t,e,r){return t^e^r}Bn.p32=g2;function E9(t){return rn(t,2)^rn(t,13)^rn(t,22)}Bn.s0_256=E9;function S9(t){return rn(t,6)^rn(t,11)^rn(t,25)}Bn.s1_256=S9;function _9(t){return rn(t,7)^rn(t,18)^t>>>3}Bn.g0_256=_9;function A9(t){return rn(t,17)^rn(t,19)^t>>>10}Bn.g1_256=A9});var w2=T((nT,x2)=>{"use strict";var pa=Pr(),B9=da(),I9=Uu(),zu=pa.rotl32,ps=pa.sum32,C9=pa.sum32_5,T9=I9.ft_1,m2=B9.BlockHash,P9=[1518500249,1859775393,2400959708,3395469782];function nn(){if(!(this instanceof nn))return new nn;m2.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}pa.inherits(nn,m2);x2.exports=nn;nn.blockSize=512;nn.outSize=160;nn.hmacStrength=80;nn.padLength=64;nn.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=zu(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var a=this.h[0],s=this.h[1],o=this.h[2],f=this.h[3],u=this.h[4];for(i=0;i<n.length;i++){var c=~~(i/20),l=C9(zu(a,5),T9(c,s,o,f),u,n[i],P9[c]);u=f,f=o,o=zu(s,30),s=a,a=l}this.h[0]=ps(this.h[0],a),this.h[1]=ps(this.h[1],s),this.h[2]=ps(this.h[2],o),this.h[3]=ps(this.h[3],f),this.h[4]=ps(this.h[4],u)};nn.prototype._digest=function(e){return e==="hex"?pa.toHex32(this.h,"big"):pa.split32(this.h,"big")}});var Vu=T((iT,S2)=>{"use strict";var ya=Pr(),M9=da(),ba=Uu(),R9=jn(),Mr=ya.sum32,q9=ya.sum32_4,k9=ya.sum32_5,N9=ba.ch32,L9=ba.maj32,D9=ba.s0_256,O9=ba.s1_256,K9=ba.g0_256,F9=ba.g1_256,E2=M9.BlockHash,U9=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function an(){if(!(this instanceof an))return new an;E2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=U9,this.W=new Array(64)}ya.inherits(an,E2);S2.exports=an;an.blockSize=512;an.outSize=256;an.hmacStrength=192;an.padLength=64;an.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=q9(F9(n[i-2]),n[i-7],K9(n[i-15]),n[i-16]);var a=this.h[0],s=this.h[1],o=this.h[2],f=this.h[3],u=this.h[4],c=this.h[5],l=this.h[6],y=this.h[7];for(R9(this.k.length===n.length),i=0;i<n.length;i++){var x=k9(y,O9(u),N9(u,c,l),this.k[i],n[i]),v=Mr(D9(a),L9(a,s,o));y=l,l=c,c=u,u=Mr(f,x),f=o,o=s,s=a,a=Mr(x,v)}this.h[0]=Mr(this.h[0],a),this.h[1]=Mr(this.h[1],s),this.h[2]=Mr(this.h[2],o),this.h[3]=Mr(this.h[3],f),this.h[4]=Mr(this.h[4],u),this.h[5]=Mr(this.h[5],c),this.h[6]=Mr(this.h[6],l),this.h[7]=Mr(this.h[7],y)};an.prototype._digest=function(e){return e==="hex"?ya.toHex32(this.h,"big"):ya.split32(this.h,"big")}});var B2=T((aT,A2)=>{"use strict";var Hu=Pr(),_2=Vu();function In(){if(!(this instanceof In))return new In;_2.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Hu.inherits(In,_2);A2.exports=In;In.blockSize=512;In.outSize=224;In.hmacStrength=192;In.padLength=64;In.prototype._digest=function(e){return e==="hex"?Hu.toHex32(this.h.slice(0,7),"big"):Hu.split32(this.h.slice(0,7),"big")}});var $u=T((sT,P2)=>{"use strict";var er=Pr(),z9=da(),V9=jn(),sn=er.rotr64_hi,on=er.rotr64_lo,I2=er.shr64_hi,C2=er.shr64_lo,Yn=er.sum64,ju=er.sum64_hi,Gu=er.sum64_lo,H9=er.sum64_4_hi,j9=er.sum64_4_lo,G9=er.sum64_5_hi,$9=er.sum64_5_lo,T2=z9.BlockHash,Y9=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Rr(){if(!(this instanceof Rr))return new Rr;T2.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Y9,this.W=new Array(160)}er.inherits(Rr,T2);P2.exports=Rr;Rr.blockSize=1024;Rr.outSize=512;Rr.hmacStrength=192;Rr.padLength=128;Rr.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var a=aE(n[i-4],n[i-3]),s=sE(n[i-4],n[i-3]),o=n[i-14],f=n[i-13],u=nE(n[i-30],n[i-29]),c=iE(n[i-30],n[i-29]),l=n[i-32],y=n[i-31];n[i]=H9(a,s,o,f,u,c,l,y),n[i+1]=j9(a,s,o,f,u,c,l,y)}};Rr.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],a=this.h[1],s=this.h[2],o=this.h[3],f=this.h[4],u=this.h[5],c=this.h[6],l=this.h[7],y=this.h[8],x=this.h[9],v=this.h[10],b=this.h[11],_=this.h[12],A=this.h[13],M=this.h[14],q=this.h[15];V9(this.k.length===n.length);for(var z=0;z<n.length;z+=2){var O=M,U=q,$=tE(y,x),H=rE(y,x),X=W9(y,x,v,b,_,A),B=Q9(y,x,v,b,_,A),h=this.k[z],p=this.k[z+1],g=n[z],m=n[z+1],w=G9(O,U,$,H,X,B,h,p,g,m),C=$9(O,U,$,H,X,B,h,p,g,m);O=X9(i,a),U=eE(i,a),$=J9(i,a,s,o,f,u),H=Z9(i,a,s,o,f,u);var I=ju(O,U,$,H),E=Gu(O,U,$,H);M=_,q=A,_=v,A=b,v=y,b=x,y=ju(c,l,w,C),x=Gu(l,l,w,C),c=f,l=u,f=s,u=o,s=i,o=a,i=ju(w,C,I,E),a=Gu(w,C,I,E)}Yn(this.h,0,i,a),Yn(this.h,2,s,o),Yn(this.h,4,f,u),Yn(this.h,6,c,l),Yn(this.h,8,y,x),Yn(this.h,10,v,b),Yn(this.h,12,_,A),Yn(this.h,14,M,q)};Rr.prototype._digest=function(e){return e==="hex"?er.toHex32(this.h,"big"):er.split32(this.h,"big")};function W9(t,e,r,n,i){var a=t&r^~t&i;return a<0&&(a+=4294967296),a}function Q9(t,e,r,n,i,a){var s=e&n^~e&a;return s<0&&(s+=4294967296),s}function J9(t,e,r,n,i){var a=t&r^t&i^r&i;return a<0&&(a+=4294967296),a}function Z9(t,e,r,n,i,a){var s=e&n^e&a^n&a;return s<0&&(s+=4294967296),s}function X9(t,e){var r=sn(t,e,28),n=sn(e,t,2),i=sn(e,t,7),a=r^n^i;return a<0&&(a+=4294967296),a}function eE(t,e){var r=on(t,e,28),n=on(e,t,2),i=on(e,t,7),a=r^n^i;return a<0&&(a+=4294967296),a}function tE(t,e){var r=sn(t,e,14),n=sn(t,e,18),i=sn(e,t,9),a=r^n^i;return a<0&&(a+=4294967296),a}function rE(t,e){var r=on(t,e,14),n=on(t,e,18),i=on(e,t,9),a=r^n^i;return a<0&&(a+=4294967296),a}function nE(t,e){var r=sn(t,e,1),n=sn(t,e,8),i=I2(t,e,7),a=r^n^i;return a<0&&(a+=4294967296),a}function iE(t,e){var r=on(t,e,1),n=on(t,e,8),i=C2(t,e,7),a=r^n^i;return a<0&&(a+=4294967296),a}function aE(t,e){var r=sn(t,e,19),n=sn(e,t,29),i=I2(t,e,6),a=r^n^i;return a<0&&(a+=4294967296),a}function sE(t,e){var r=on(t,e,19),n=on(e,t,29),i=C2(t,e,6),a=r^n^i;return a<0&&(a+=4294967296),a}});var q2=T((oT,R2)=>{"use strict";var Yu=Pr(),M2=$u();function Cn(){if(!(this instanceof Cn))return new Cn;M2.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Yu.inherits(Cn,M2);R2.exports=Cn;Cn.blockSize=1024;Cn.outSize=384;Cn.hmacStrength=192;Cn.padLength=128;Cn.prototype._digest=function(e){return e==="hex"?Yu.toHex32(this.h.slice(0,12),"big"):Yu.split32(this.h.slice(0,12),"big")}});var k2=T(va=>{"use strict";va.sha1=w2();va.sha224=B2();va.sha256=Vu();va.sha384=q2();va.sha512=$u()});var F2=T(K2=>{"use strict";var xi=Pr(),oE=da(),Qo=xi.rotl32,N2=xi.sum32,ys=xi.sum32_3,L2=xi.sum32_4,D2=oE.BlockHash;function fn(){if(!(this instanceof fn))return new fn;D2.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}xi.inherits(fn,D2);K2.ripemd160=fn;fn.blockSize=512;fn.outSize=160;fn.hmacStrength=192;fn.padLength=64;fn.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],a=this.h[2],s=this.h[3],o=this.h[4],f=n,u=i,c=a,l=s,y=o,x=0;x<80;x++){var v=N2(Qo(L2(n,O2(x,i,a,s),e[cE[x]+r],fE(x)),lE[x]),o);n=o,o=s,s=Qo(a,10),a=i,i=v,v=N2(Qo(L2(f,O2(79-x,u,c,l),e[hE[x]+r],uE(x)),dE[x]),y),f=y,y=l,l=Qo(c,10),c=u,u=v}v=ys(this.h[1],a,l),this.h[1]=ys(this.h[2],s,y),this.h[2]=ys(this.h[3],o,f),this.h[3]=ys(this.h[4],n,u),this.h[4]=ys(this.h[0],i,c),this.h[0]=v};fn.prototype._digest=function(e){return e==="hex"?xi.toHex32(this.h,"little"):xi.split32(this.h,"little")};function O2(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function fE(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function uE(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var cE=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],hE=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],lE=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],dE=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var z2=T((cT,U2)=>{"use strict";var pE=Pr(),yE=jn();function ga(t,e,r){if(!(this instanceof ga))return new ga(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(pE.toArray(e,r))}U2.exports=ga;ga.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),yE(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};ga.prototype.update=function(e,r){return this.inner.update(e,r),this};ga.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}});var Jo=T(V2=>{var Kt=V2;Kt.utils=Pr();Kt.common=da();Kt.sha=k2();Kt.ripemd=F2();Kt.hmac=z2();Kt.sha1=Kt.sha.sha1;Kt.sha256=Kt.sha.sha256;Kt.sha224=Kt.sha.sha224;Kt.sha384=Kt.sha.sha384;Kt.sha512=Kt.sha.sha512;Kt.ripemd160=Kt.ripemd.ripemd160});var j2=T((lT,H2)=>{H2.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var Zo=T(Y2=>{"use strict";var Wu=Y2,Wn=Jo(),Qu=Fu(),bE=ir(),G2=bE.assert;function $2(t){t.type==="short"?this.curve=new Qu.short(t):t.type==="edwards"?this.curve=new Qu.edwards(t):this.curve=new Qu.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,G2(this.g.validate(),"Invalid curve"),G2(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}Wu.PresetCurve=$2;function Qn(t,e){Object.defineProperty(Wu,t,{configurable:!0,enumerable:!0,get:function(){var r=new $2(e);return Object.defineProperty(Wu,t,{configurable:!0,enumerable:!0,value:r}),r}})}Qn("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Wn.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});Qn("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Wn.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});Qn("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Wn.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});Qn("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Wn.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});Qn("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Wn.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});Qn("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Wn.sha256,gRed:!1,g:["9"]});Qn("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Wn.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var Ju;try{Ju=j2()}catch(t){Ju=void 0}Qn("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Wn.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",Ju]})});var J2=T((pT,Q2)=>{"use strict";var vE=Jo(),wi=qu(),W2=jn();function Jn(t){if(!(this instanceof Jn))return new Jn(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=wi.toArray(t.entropy,t.entropyEnc||"hex"),r=wi.toArray(t.nonce,t.nonceEnc||"hex"),n=wi.toArray(t.pers,t.persEnc||"hex");W2(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}Q2.exports=Jn;Jn.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var a=0;a<this.V.length;a++)this.K[a]=0,this.V[a]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Jn.prototype._hmac=function(){return new vE.hmac(this.hash,this.K)};Jn.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),!!e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Jn.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=wi.toArray(e,r),n=wi.toArray(n,i),W2(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};Jn.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=wi.toArray(n,i||"hex"),this._update(n));for(var a=[];a.length<e;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);var s=a.slice(0,e);return this._update(n),this._reseed++,wi.encode(s,r)}});var X2=T((yT,Z2)=>{"use strict";var gE=en(),mE=ir(),Zu=mE.assert;function zt(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}Z2.exports=zt;zt.fromPublic=function(e,r,n){return r instanceof zt?r:new zt(e,{pub:r,pubEnc:n})};zt.fromPrivate=function(e,r,n){return r instanceof zt?r:new zt(e,{priv:r,privEnc:n})};zt.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};zt.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};zt.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};zt.prototype._importPrivate=function(e,r){this.priv=new gE(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};zt.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?Zu(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Zu(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};zt.prototype.derive=function(e){return e.validate()||Zu(e.validate(),"public point not validated"),e.mul(this.priv).getX()};zt.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};zt.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};zt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var rb=T((bT,tb)=>{"use strict";var Xo=en(),Xu=ir(),xE=Xu.assert;function ef(t,e){if(t instanceof ef)return t;this._importDER(t,e)||(xE(t.r&&t.s,"Signature without r or s"),this.r=new Xo(t.r,16),this.s=new Xo(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}tb.exports=ef;function wE(){this.place=0}function ec(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,a=0,s=e.place;a<n;a++,s++)i<<=8,i|=t[s],i>>>=0;return i<=127?!1:(e.place=s,i)}function eb(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}ef.prototype._importDER=function(e,r){e=Xu.toArray(e,r);var n=new wE;if(e[n.place++]!==48)return!1;var i=ec(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var a=ec(e,n);if(a===!1)return!1;var s=e.slice(n.place,a+n.place);if(n.place+=a,e[n.place++]!==2)return!1;var o=ec(e,n);if(o===!1||e.length!==o+n.place)return!1;var f=e.slice(n.place,o+n.place);if(s[0]===0)if(s[1]&128)s=s.slice(1);else return!1;if(f[0]===0)if(f[1]&128)f=f.slice(1);else return!1;return this.r=new Xo(s),this.s=new Xo(f),this.recoveryParam=null,!0};function tc(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}ef.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=eb(r),n=eb(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];tc(i,r.length),i=i.concat(r),i.push(2),tc(i,n.length);var a=i.concat(n),s=[48];return tc(s,a.length),s=s.concat(a),Xu.encode(s,e)}});var sb=T((vT,ab)=>{"use strict";var Ei=en(),nb=J2(),EE=ir(),rc=Zo(),SE=Du(),ib=EE.assert,nc=X2(),tf=rb();function wr(t){if(!(this instanceof wr))return new wr(t);typeof t=="string"&&(ib(Object.prototype.hasOwnProperty.call(rc,t),"Unknown curve "+t),t=rc[t]),t instanceof rc.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}ab.exports=wr;wr.prototype.keyPair=function(e){return new nc(this,e)};wr.prototype.keyFromPrivate=function(e,r){return nc.fromPrivate(this,e,r)};wr.prototype.keyFromPublic=function(e,r){return nc.fromPublic(this,e,r)};wr.prototype.genKeyPair=function(e){e||(e={});for(var r=new nb({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||SE(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Ei(2));;){var a=new Ei(r.generate(n));if(!(a.cmp(i)>0))return a.iaddn(1),this.keyFromPrivate(a)}};wr.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};wr.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new Ei(e,16));for(var a=this.n.byteLength(),s=r.getPrivate().toArray("be",a),o=e.toArray("be",a),f=new nb({hash:this.hash,entropy:s,nonce:o,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new Ei(1)),c=0;;c++){var l=i.k?i.k(c):new Ei(f.generate(this.n.byteLength()));if(l=this._truncateToN(l,!0),!(l.cmpn(1)<=0||l.cmp(u)>=0)){var y=this.g.mul(l);if(!y.isInfinity()){var x=y.getX(),v=x.umod(this.n);if(v.cmpn(0)!==0){var b=l.invm(this.n).mul(v.mul(r.getPrivate()).iadd(e));if(b=b.umod(this.n),b.cmpn(0)!==0){var _=(y.getY().isOdd()?1:0)|(x.cmp(v)!==0?2:0);return i.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b),_^=1),new tf({r:v,s:b,recoveryParam:_})}}}}}};wr.prototype.verify=function(e,r,n,i){e=this._truncateToN(new Ei(e,16)),n=this.keyFromPublic(n,i),r=new tf(r,"hex");var a=r.r,s=r.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0||s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o=s.invm(this.n),f=o.mul(e).umod(this.n),u=o.mul(a).umod(this.n),c;return this.curve._maxwellTrick?(c=this.g.jmulAdd(f,n.getPublic(),u),c.isInfinity()?!1:c.eqXToP(a)):(c=this.g.mulAdd(f,n.getPublic(),u),c.isInfinity()?!1:c.getX().umod(this.n).cmp(a)===0)};wr.prototype.recoverPubKey=function(t,e,r,n){ib((3&r)===r,"The recovery param is more than two bits"),e=new tf(e,n);var i=this.n,a=new Ei(t),s=e.r,o=e.s,f=r&1,u=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?s=this.curve.pointFromX(s.add(this.curve.n),f):s=this.curve.pointFromX(s,f);var c=e.r.invm(i),l=i.sub(a).mul(c).umod(i),y=o.mul(c).umod(i);return this.g.mulAdd(l,s,y)};wr.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new tf(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var a;try{a=this.recoverPubKey(t,e,i)}catch(s){continue}if(a.eq(r))return i}throw new Error("Unable to find valid recovery factor")}});var cb=T((gT,ub)=>{"use strict";var bs=ir(),ob=bs.assert,fb=bs.parseBytes,ma=bs.cachedProperty;function Lt(t,e){this.eddsa=t,this._secret=fb(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=fb(e.pub)}Lt.fromPublic=function(e,r){return r instanceof Lt?r:new Lt(e,{pub:r})};Lt.fromSecret=function(e,r){return r instanceof Lt?r:new Lt(e,{secret:r})};Lt.prototype.secret=function(){return this._secret};ma(Lt,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});ma(Lt,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});ma(Lt,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,i=r.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});ma(Lt,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});ma(Lt,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});ma(Lt,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Lt.prototype.sign=function(e){return ob(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Lt.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};Lt.prototype.getSecret=function(e){return ob(this._secret,"KeyPair is public only"),bs.encode(this.secret(),e)};Lt.prototype.getPublic=function(e){return bs.encode(this.pubBytes(),e)};ub.exports=Lt});var lb=T((mT,hb)=>{"use strict";var _E=en(),rf=ir(),AE=rf.assert,nf=rf.cachedProperty,BE=rf.parseBytes;function Si(t,e){this.eddsa=t,typeof e!="object"&&(e=BE(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),AE(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof _E&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}nf(Si,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});nf(Si,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});nf(Si,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});nf(Si,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Si.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Si.prototype.toHex=function(){return rf.encode(this.toBytes(),"hex").toUpperCase()};hb.exports=Si});var vb=T((xT,bb)=>{"use strict";var IE=Jo(),CE=Zo(),xa=ir(),TE=xa.assert,db=xa.parseBytes,pb=cb(),yb=lb();function tr(t){if(TE(t==="ed25519","only tested with ed25519 so far"),!(this instanceof tr))return new tr(t);t=CE[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=IE.sha512}bb.exports=tr;tr.prototype.sign=function(e,r){e=db(e);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),e),a=this.g.mul(i),s=this.encodePoint(a),o=this.hashInt(s,n.pubBytes(),e).mul(n.priv()),f=i.add(o).umod(this.curve.n);return this.makeSignature({R:a,S:f,Rencoded:s})};tr.prototype.verify=function(e,r,n){e=db(e),r=this.makeSignature(r);var i=this.keyFromPublic(n),a=this.hashInt(r.Rencoded(),i.pubBytes(),e),s=this.g.mul(r.S()),o=r.R().add(i.pub().mul(a));return o.eq(s)};tr.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return xa.intFromLE(e.digest()).umod(this.curve.n)};tr.prototype.keyFromPublic=function(e){return pb.fromPublic(this,e)};tr.prototype.keyFromSecret=function(e){return pb.fromSecret(this,e)};tr.prototype.makeSignature=function(e){return e instanceof yb?e:new yb(this,e)};tr.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};tr.prototype.decodePoint=function(e){e=xa.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&~128),i=(e[r]&128)!=0,a=xa.intFromLE(n);return this.curve.pointFromY(a,i)};tr.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};tr.prototype.decodeInt=function(e){return xa.intFromLE(e)};tr.prototype.isPoint=function(e){return e instanceof this.pointClass}});var mb=T(gb=>{"use strict";var _i=gb;_i.version=Gy().version;_i.utils=ir();_i.rand=Du();_i.curve=Fu();_i.curves=Zo();_i.ec=sb();_i.eddsa=vb()});var wb=T((ET,xb)=>{var PE=mb().ec,un=new PE("secp256k1"),we=un.curve,De=we.n.constructor;function ME(t,e){let r=new De(e);if(r.cmp(we.p)>=0)return null;r=r.toRed(we.red);let n=r.redSqr().redIMul(r).redIAdd(we.b).redSqrt();return t===3!==n.isOdd()&&(n=n.redNeg()),un.keyPair({pub:{x:r,y:n}})}function RE(t,e,r){let n=new De(e),i=new De(r);if(n.cmp(we.p)>=0||i.cmp(we.p)>=0||(n=n.toRed(we.red),i=i.toRed(we.red),(t===6||t===7)&&i.isOdd()!==(t===7)))return null;let a=n.redSqr().redIMul(n);return i.redSqr().redISub(a.redIAdd(we.b)).isZero()?un.keyPair({pub:{x:n,y:i}}):null}function Zn(t){let e=t[0];switch(e){case 2:case 3:return t.length!==33?null:ME(e,t.subarray(1,33));case 4:case 6:case 7:return t.length!==65?null:RE(e,t.subarray(1,33),t.subarray(33,65));default:return null}}function Ai(t,e){let r=e.encode(null,t.length===33);for(let n=0;n<t.length;++n)t[n]=r[n]}xb.exports={contextRandomize(){return 0},privateKeyVerify(t){let e=new De(t);return e.cmp(we.n)<0&&!e.isZero()?0:1},privateKeyNegate(t){let e=new De(t),r=we.n.sub(e).umod(we.n).toArrayLike(Uint8Array,"be",32);return t.set(r),0},privateKeyTweakAdd(t,e){let r=new De(e);if(r.cmp(we.n)>=0||(r.iadd(new De(t)),r.cmp(we.n)>=0&&r.isub(we.n),r.isZero()))return 1;let n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},privateKeyTweakMul(t,e){let r=new De(e);if(r.cmp(we.n)>=0||r.isZero())return 1;r.imul(new De(t)),r.cmp(we.n)>=0&&(r=r.umod(we.n));let n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},publicKeyVerify(t){return Zn(t)===null?1:0},publicKeyCreate(t,e){let r=new De(e);if(r.cmp(we.n)>=0||r.isZero())return 1;let n=un.keyFromPrivate(e).getPublic();return Ai(t,n),0},publicKeyConvert(t,e){let r=Zn(e);if(r===null)return 1;let n=r.getPublic();return Ai(t,n),0},publicKeyNegate(t,e){let r=Zn(e);if(r===null)return 1;let n=r.getPublic();return n.y=n.y.redNeg(),Ai(t,n),0},publicKeyCombine(t,e){let r=new Array(e.length);for(let i=0;i<e.length;++i)if(r[i]=Zn(e[i]),r[i]===null)return 1;let n=r[0].getPublic();for(let i=1;i<r.length;++i)n=n.add(r[i].pub);return n.isInfinity()?2:(Ai(t,n),0)},publicKeyTweakAdd(t,e,r){let n=Zn(e);if(n===null)return 1;if(r=new De(r),r.cmp(we.n)>=0)return 2;let i=n.getPublic().add(we.g.mul(r));return i.isInfinity()?2:(Ai(t,i),0)},publicKeyTweakMul(t,e,r){let n=Zn(e);if(n===null)return 1;if(r=new De(r),r.cmp(we.n)>=0||r.isZero())return 2;let i=n.getPublic().mul(r);return Ai(t,i),0},signatureNormalize(t){let e=new De(t.subarray(0,32)),r=new De(t.subarray(32,64));return e.cmp(we.n)>=0||r.cmp(we.n)>=0?1:(r.cmp(un.nh)===1&&t.set(we.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(t,e){let r=e.subarray(0,32),n=e.subarray(32,64);if(new De(r).cmp(we.n)>=0||new De(n).cmp(we.n)>=0)return 1;let{output:i}=t,a=i.subarray(4,4+33);a[0]=0,a.set(r,1);let s=33,o=0;for(;s>1&&a[o]===0&&!(a[o+1]&128);--s,++o);if(a=a.subarray(o),a[0]&128||s>1&&a[0]===0&&!(a[1]&128))return 1;let f=i.subarray(6+33,6+33+33);f[0]=0,f.set(n,1);let u=33,c=0;for(;u>1&&f[c]===0&&!(f[c+1]&128);--u,++c);return f=f.subarray(c),f[0]&128||u>1&&f[0]===0&&!(f[1]&128)?1:(t.outputlen=6+s+u,i[0]=48,i[1]=t.outputlen-2,i[2]=2,i[3]=a.length,i.set(a,4),i[4+s]=2,i[5+s]=f.length,i.set(f,6+s),0)},signatureImport(t,e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return 1;let r=e[3];if(r===0||5+r>=e.length||e[4+r]!==2)return 1;let n=e[5+r];if(n===0||6+r+n!==e.length||e[4]&128||r>1&&e[4]===0&&!(e[5]&128)||e[r+6]&128||n>1&&e[r+6]===0&&!(e[r+7]&128))return 1;let i=e.subarray(4,4+r);if(i.length===33&&i[0]===0&&(i=i.subarray(1)),i.length>32)return 1;let a=e.subarray(6+r);if(a.length===33&&a[0]===0&&(a=a.slice(1)),a.length>32)throw new Error("S length is too long");let s=new De(i);s.cmp(we.n)>=0&&(s=new De(0));let o=new De(e.subarray(6+r));return o.cmp(we.n)>=0&&(o=new De(0)),t.set(s.toArrayLike(Uint8Array,"be",32),0),t.set(o.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(t,e,r,n,i){if(i){let o=i;i=f=>{let u=o(e,r,null,n,f);if(!(u instanceof Uint8Array&&u.length===32))throw new Error("This is the way");return new De(u)}}let a=new De(r);if(a.cmp(we.n)>=0||a.isZero())return 1;let s;try{s=un.sign(e,r,{canonical:!0,k:i,pers:n})}catch(o){return 1}return t.signature.set(s.r.toArrayLike(Uint8Array,"be",32),0),t.signature.set(s.s.toArrayLike(Uint8Array,"be",32),32),t.recid=s.recoveryParam,0},ecdsaVerify(t,e,r){let n={r:t.subarray(0,32),s:t.subarray(32,64)},i=new De(n.r),a=new De(n.s);if(i.cmp(we.n)>=0||a.cmp(we.n)>=0)return 1;if(a.cmp(un.nh)===1||i.isZero()||a.isZero())return 3;let s=Zn(r);if(s===null)return 2;let o=s.getPublic();return un.verify(e,n,o)?0:3},ecdsaRecover(t,e,r,n){let i={r:e.slice(0,32),s:e.slice(32,64)},a=new De(i.r),s=new De(i.s);if(a.cmp(we.n)>=0||s.cmp(we.n)>=0)return 1;if(a.isZero()||s.isZero())return 2;let o;try{o=un.recoverPubKey(n,i,r)}catch(f){return 2}return Ai(t,o),0},ecdh(t,e,r,n,i,a,s){let o=Zn(e);if(o===null)return 1;let f=new De(r);if(f.cmp(we.n)>=0||f.isZero())return 2;let u=o.getPublic().mul(f);if(i===void 0){let c=u.encode(null,!0),l=un.hash().update(c).digest();for(let y=0;y<32;++y)t[y]=l[y]}else{a||(a=new Uint8Array(32));let c=u.getX().toArray("be",32);for(let v=0;v<32;++v)a[v]=c[v];s||(s=new Uint8Array(32));let l=u.getY().toArray("be",32);for(let v=0;v<32;++v)s[v]=l[v];let y=i(a,s,n);if(!(y instanceof Uint8Array&&y.length===t.length))return 2;t.set(y)}return 0}}});var Sb=T((ST,Eb)=>{Eb.exports=jy()(wb())});var Bb=T((_T,Ab)=>{"use strict";var qr=Sb(),{sha256:_b}=(yn(),Vr);Ab.exports=t=>{let e=32;function r(){let c;do c=t(32);while(!qr.privateKeyVerify(c));return c}async function n(c,l){let{digest:y}=await _b.digest(l),x=qr.ecdsaSign(y,c);return qr.signatureExport(x.signature)}async function i(c,l,y){let{digest:x}=await _b.digest(y);return l=qr.signatureImport(l),qr.ecdsaVerify(l,x,c)}function a(c){if(!qr.publicKeyVerify(c))throw new Error("Invalid public key");return qr.publicKeyConvert(c,!0)}function s(c){return qr.publicKeyConvert(c,!1)}function o(c){if(!qr.privateKeyVerify(c))throw new Error("Invalid private key")}function f(c){if(!qr.publicKeyVerify(c))throw new Error("Invalid public key")}function u(c){return o(c),qr.publicKeyCreate(c)}return{generateKey:r,privateKeyLength:e,hashAndSign:n,hashAndVerify:i,compressPublicKey:a,decompressPublicKey:s,validatePrivateKey:o,validatePublicKey:f,computePublicKey:u}}});var Pb=T((AT,Tb)=>{"use strict";var{sha256:Ib}=(yn(),Vr),qE=ke(),{equals:Cb}=(ur(),fr),{toString:kE}=(et(),Xe),NE=Lo();Tb.exports=(t,e,r)=>{r=r||Bb()(e);class n{constructor(u){r.validatePublicKey(u),this._key=u}verify(u,c){return r.hashAndVerify(this._key,c,u)}marshal(){return r.compressPublicKey(this._key)}get bytes(){return t.PublicKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return Cb(this.bytes,u.bytes)}async hash(){let{bytes:u}=await Ib.digest(this.bytes);return u}}class i{constructor(u,c){this._key=u,this._publicKey=c||r.computePublicKey(u),r.validatePrivateKey(this._key),r.validatePublicKey(this._publicKey)}sign(u){return r.hashAndSign(this._key,u)}get public(){return new n(this._publicKey)}marshal(){return this._key}get bytes(){return t.PrivateKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return Cb(this.bytes,u.bytes)}async hash(){let{bytes:u}=await Ib.digest(this.bytes);return u}async id(){let u=await this.public.hash();return kE(u,"base58btc")}async export(u,c="libp2p-key"){if(c==="libp2p-key")return NE.export(this.bytes,u);throw qE(new Error(`export format '${c}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function a(f){return new i(f)}function s(f){return new n(f)}async function o(){let f=await r.generateKey();return new i(f)}return{Secp256k1PublicKey:n,Secp256k1PrivateKey:i,unmarshalSecp256k1PrivateKey:a,unmarshalSecp256k1PublicKey:s,generateKeyPair:o}}});var Rb=T((BT,Mb)=>{"use strict";Mb.exports={SHA1:20,SHA256:32,SHA512:64}});var ic=T(kb=>{"use strict";var qb=as(),LE=Rb(),DE={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},OE=async(t,e)=>{let r=await qb.get().subtle.sign({name:"HMAC"},t,e);return new Uint8Array(r,r.byteOffset,r.byteLength)};kb.create=async function(t,e){let r=DE[t],n=await qb.get().subtle.importKey("raw",e,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(i){return OE(n,i)},length:LE[t]}}});var Kb=T((CT,Ob)=>{"use strict";var Nb=ke(),{concat:Lb}=(zn(),Un),{fromString:KE}=(hr(),cr),FE=ic(),Db={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};Ob.exports=async(t,e,r)=>{let n=Db[t];if(!n){let M=Object.keys(Db).join(" / ");throw Nb(new Error(`unknown cipher type '${t}'. Must be ${M}`),"ERR_INVALID_CIPHER_TYPE")}if(!e)throw Nb(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");let i=n.keySize,a=n.ivSize,s=20,o=KE("key expansion"),f=2*(a+i+s),u=await FE.create(e,r),c=await u.digest(o),l=[],y=0;for(;y<f;){let M=await u.digest(Lb([c,o])),q=M.length;y+q>f&&(q=f-y),l.push(M),y+=q,c=await u.digest(c)}let x=f/2,v=Lb(l),b=v.slice(0,x),_=v.slice(x,f),A=M=>({iv:M.slice(0,a),cipherKey:M.slice(a,a+i),macKey:M.slice(a+i)});return{k1:A(b),k2:A(_)}}});var Ub=T((TT,Fb)=>{"use strict";var UE=ke();Fb.exports=function(t,e){if(!t.includes(e)){let r=t.join(" / ");throw UE(new Error(`Unknown curve: ${e}. Must be ${r}`),"ERR_INVALID_CURVE")}}});var $b=T(Gb=>{"use strict";var zE=ke(),vs=as(),{base64urlToBuffer:zb}=No(),VE=Ub(),{toString:ac}=(et(),Xe),{concat:HE}=(zn(),Un),{equals:jE}=(ur(),fr),Vb={"P-256":256,"P-384":384,"P-521":521};Gb.generateEphmeralKeyPair=async function(t){VE(Object.keys(Vb),t);let e=await vs.get().subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]),r=async(i,a)=>{let s;a?s=await vs.get().subtle.importKey("jwk",$E(t,a),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):s=e.privateKey;let o=[await vs.get().subtle.importKey("jwk",jb(t,i),{name:"ECDH",namedCurve:t},!1,[]),s],f=await vs.get().subtle.deriveBits({name:"ECDH",namedCurve:t,public:o[0]},o[1],Vb[t]);return new Uint8Array(f,f.byteOffset,f.byteLength)},n=await vs.get().subtle.exportKey("jwk",e.publicKey);return{key:GE(n),genSharedKey:r}};var Hb={"P-256":32,"P-384":48,"P-521":66};function GE(t){let e=Hb[t.crv];return HE([Uint8Array.from([4]),zb(t.x,e),zb(t.y,e)],1+e*2)}function jb(t,e){let r=Hb[t];if(jE(!e.slice(0,1),Uint8Array.from([4])))throw zE(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:t,x:ac(e.slice(1,r+1),"base64url"),y:ac(e.slice(1+r),"base64url"),ext:!0}}var $E=(t,e)=>({...jb(t,e.public),d:ac(e.private,"base64url")})});var Wb=T((MT,Yb)=>{"use strict";var YE=$b();Yb.exports=async t=>YE.generateEphmeralKeyPair(t)});var oc=T((RT,Jb)=>{"use strict";var cn=ho();Zi();Y1();var sc=Be(),gs=ke(),{fromString:WE}=(hr(),cr),QE=X1(),Er={rsa:Dy(),ed25519:Vy(),secp256k1:Pb()(cn,ko())},af={message:"secp256k1 support requires libp2p-crypto-secp256k1 package",code:"ERR_MISSING_PACKAGE"};function wa(t){let e=Er[t.toLowerCase()];if(!e){let r=Object.keys(Er).join(" / ");throw gs(new Error(`invalid or unsupported key type ${t}. Must be ${r}`),"ERR_UNSUPPORTED_KEY_TYPE")}return e}var JE=async(t,e)=>wa(t).generateKeyPair(e),ZE=async(t,e,r)=>{let n=wa(t);if(t.toLowerCase()!=="ed25519")throw gs(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return n.generateKeyPairFromSeed(e,r)},XE=t=>{let e=cn.PublicKey.decode(t),r=e.Data;switch(e.Type){case cn.KeyType.RSA:return Er.rsa.unmarshalRsaPublicKey(r);case cn.KeyType.Ed25519:return Er.ed25519.unmarshalEd25519PublicKey(r);case cn.KeyType.Secp256k1:if(Er.secp256k1)return Er.secp256k1.unmarshalSecp256k1PublicKey(r);throw gs(new Error(af.message),af.code);default:wa(e.Type)}},eS=(t,e)=>(e=(e||"rsa").toLowerCase(),wa(e),t.bytes),Qb=async t=>{let e=cn.PrivateKey.decode(t),r=e.Data;switch(e.Type){case cn.KeyType.RSA:return Er.rsa.unmarshalRsaPrivateKey(r);case cn.KeyType.Ed25519:return Er.ed25519.unmarshalEd25519PrivateKey(r);case cn.KeyType.Secp256k1:if(Er.secp256k1)return Er.secp256k1.unmarshalSecp256k1PrivateKey(r);throw gs(new Error(af.message),af.code);default:wa(e.Type)}},tS=(t,e)=>(e=(e||"rsa").toLowerCase(),wa(e),t.bytes),rS=async(t,e)=>{try{let i=await QE.import(t,e);return Qb(i)}catch(i){}let r=sc.pki.decryptRsaPrivateKey(t,e);if(r===null)throw gs(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let n=sc.asn1.toDer(sc.pki.privateKeyToAsn1(r));return n=WE(n.getBytes(),"ascii"),Er.rsa.unmarshalRsaPrivateKey(n)};Jb.exports={supportedKeys:Er,keysPBM:cn,keyStretcher:Kb(),generateEphemeralKeyPair:Wb(),generateKeyPair:JE,generateKeyPairFromSeed:ZE,unmarshalPublicKey:XE,marshalPublicKey:eS,unmarshalPrivateKey:Qb,marshalPrivateKey:tS,import:rS}});var Zb=T((qT,fc)=>{"use strict";function nS(t,{className:e,symbolName:r}){let n=Symbol.for(r),i={[e]:class extends t{constructor(...a){super(...a);Object.defineProperty(this,n,{value:!0})}get[Symbol.toStringTag](){return e}}}[e];return i[`is${e}`]=a=>!!(a&&a[n]),i}function iS(t,{className:e,symbolName:r,withoutNew:n}){let i=Symbol.for(r),a={[e]:function(...s){if(n&&!(this instanceof a))return new a(...s);let o=t.call(this,...s)||this;return o&&!o[i]&&Object.defineProperty(o,i,{value:!0}),o}}[e];return a.prototype=Object.create(t.prototype),a.prototype.constructor=a,Object.defineProperty(a.prototype,Symbol.toStringTag,{get(){return e}}),a[`is${e}`]=s=>!!(s&&s[i]),a}fc.exports=nS;fc.exports.proto=iS});var tv=T((kT,ev)=>{"use strict";var Ea=Oa(),Xb=Ea.Reader,aS=Ea.Writer,Bt=Ea.util,ms=Ea.roots["libp2p-peer-id"]||(Ea.roots["libp2p-peer-id"]={});ms.PeerIdProto=function(){function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.id=Bt.newBuffer([]),t.prototype.pubKey=Bt.newBuffer([]),t.prototype.privKey=Bt.newBuffer([]),t.encode=function(r,n){return n||(n=aS.create()),n.uint32(10).bytes(r.id),r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&n.uint32(18).bytes(r.pubKey),r.privKey!=null&&Object.hasOwnProperty.call(r,"privKey")&&n.uint32(26).bytes(r.privKey),n},t.decode=function(r,n){r instanceof Xb||(r=Xb.create(r));for(var i=n===void 0?r.len:r.pos+n,a=new ms.PeerIdProto;r.pos<i;){var s=r.uint32();switch(s>>>3){case 1:a.id=r.bytes();break;case 2:a.pubKey=r.bytes();break;case 3:a.privKey=r.bytes();break;default:r.skipType(s&7);break}}if(!a.hasOwnProperty("id"))throw Bt.ProtocolError("missing required 'id'",{instance:a});return a},t.fromObject=function(r){if(r instanceof ms.PeerIdProto)return r;var n=new ms.PeerIdProto;return r.id!=null&&(typeof r.id=="string"?Bt.base64.decode(r.id,n.id=Bt.newBuffer(Bt.base64.length(r.id)),0):r.id.length&&(n.id=r.id)),r.pubKey!=null&&(typeof r.pubKey=="string"?Bt.base64.decode(r.pubKey,n.pubKey=Bt.newBuffer(Bt.base64.length(r.pubKey)),0):r.pubKey.length&&(n.pubKey=r.pubKey)),r.privKey!=null&&(typeof r.privKey=="string"?Bt.base64.decode(r.privKey,n.privKey=Bt.newBuffer(Bt.base64.length(r.privKey)),0):r.privKey.length&&(n.privKey=r.privKey)),n},t.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.id="":(i.id=[],n.bytes!==Array&&(i.id=Bt.newBuffer(i.id))),n.bytes===String?i.pubKey="":(i.pubKey=[],n.bytes!==Array&&(i.pubKey=Bt.newBuffer(i.pubKey))),n.bytes===String?i.privKey="":(i.privKey=[],n.bytes!==Array&&(i.privKey=Bt.newBuffer(i.privKey)))),r.id!=null&&r.hasOwnProperty("id")&&(i.id=n.bytes===String?Bt.base64.encode(r.id,0,r.id.length):n.bytes===Array?Array.prototype.slice.call(r.id):r.id),r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(i.pubKey=n.bytes===String?Bt.base64.encode(r.pubKey,0,r.pubKey.length):n.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey),r.privKey!=null&&r.hasOwnProperty("privKey")&&(i.privKey=n.bytes===String?Bt.base64.encode(r.privKey,0,r.privKey.length):n.bytes===Array?Array.prototype.slice.call(r.privKey):r.privKey),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ea.util.toJSONOptions)},t}();ev.exports=ms});var Sa=T((Vt,uv)=>{"use strict";var{CID:uc}=(ai(),Ui),sS=(Ni(),ki),oS=(w0(),js),fS=(zr(),Ur),uS=(Ua(),Li),{base58btc:cc}=(zr(),Ur),{base32:cS}=(Ni(),ki),{base16:rv}=(x0(),Hs),xs=(Fi(),ja),hn=oc(),hS=Zb(),{PeerIdProto:nv}=tv(),{equals:Bi}=(ur(),fr),{fromString:ws}=(hr(),cr),{toString:lS}=(et(),Xe),{identity:sf}=(Ys(),$a),iv={...sS,...oS,...fS,...uS},dS=Object.keys(iv).reduce((t,e)=>t.or(iv[e]),cS.decoder),pS=112,av=114,sv=class{constructor(e,r,n){if(!(e instanceof Uint8Array))throw new Error("invalid id provided");if(r&&n&&!Bi(r.public.bytes,n.bytes))throw new Error("inconsistent arguments");this._id=e,this._idB58String=cc.encode(this.id).substring(1),this._privKey=r,this._pubKey=n}get id(){return this._id}set id(e){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(e){this._privKey=e}get pubKey(){if(this._pubKey)return this._pubKey;if(this._privKey)return this._privKey.public;try{let e=xs.decode(this.id);e.code===sf.code&&(this._pubKey=hn.unmarshalPublicKey(e.digest))}catch(e){}return this._pubKey}set pubKey(e){this._pubKey=e}marshalPubKey(){if(this.pubKey)return hn.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return hn.marshalPrivateKey(this.privKey)}marshal(e){return nv.encode({id:this.toBytes(),pubKey:this.marshalPubKey(),privKey:e?null:this.marshalPrivKey()}).finish()}toPrint(){let e=this.toB58String();e.startsWith("Qm")&&(e=e.slice(2));let r=6;return e.length<r&&(r=e.length),"<peer.ID "+e.substr(0,r)+">"}toJSON(){return{id:this.toB58String(),privKey:fv(this.marshalPrivKey()),pubKey:fv(this.marshalPubKey())}}toHexString(){return rv.encode(this.id).substring(1)}toBytes(){return this.id}toB58String(){return this._idB58String}toString(){if(!this._idCIDString){let e=uc.createV1(av,xs.decode(this.id));Object.defineProperty(this,"_idCIDString",{value:e.toString(),enumerable:!1})}return this._idCIDString}equals(e){if(e instanceof Uint8Array)return Bi(this.id,e);if(e.id)return Bi(this.id,e.id);throw new Error("not valid Id")}isEqual(e){return this.equals(e)}isValid(){return Boolean(this.privKey&&this.privKey.public&&this.privKey.public.bytes&&this.pubKey.bytes instanceof Uint8Array&&Bi(this.privKey.public.bytes,this.pubKey.bytes))}hasInlinePublicKey(){try{if(xs.decode(this.id).code===sf.code)return!0}catch(e){}return!1}},ln=hS(sv,{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});Vt=uv.exports=ln;var Es=t=>t.bytes.length<=42?xs.create(sf.code,t.bytes).bytes:t.hash(),hc=async(t,e)=>{let r=await Es(e);return new ln(r,t,e)};Vt.create=async t=>{t=t||{},t.bits=t.bits||2048,t.keyType=t.keyType||"RSA";let e=await hn.generateKeyPair(t.keyType,t.bits);return hc(e,e.public)};Vt.createFromHexString=t=>new ln(rv.decode("f"+t));Vt.createFromBytes=t=>{try{let e=uc.decode(t);if(!ov(e))throw new Error("Supplied PeerID CID is invalid");return Vt.createFromCID(e)}catch{if(xs.decode(t).code!==sf.code)throw new Error("Supplied PeerID CID is invalid");return new ln(t)}};Vt.createFromB58String=t=>Vt.createFromBytes(cc.decode("z"+t));var ov=t=>t.code===av||t.code===pS;Vt.createFromCID=t=>{if(t=uc.asCID(t),!t||!ov(t))throw new Error("Supplied PeerID CID is invalid");return new ln(t.multihash.bytes)};Vt.createFromPubKey=async t=>{let e=t;if(typeof e=="string"&&(e=ws(t,"base64pad")),!(e instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let r=await hn.unmarshalPublicKey(e);return hc(void 0,r)};Vt.createFromPrivKey=async t=>{if(typeof t=="string"&&(t=ws(t,"base64pad")),!(t instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let e=await hn.unmarshalPrivateKey(t);return hc(e,e.public)};Vt.createFromJSON=async t=>{let e=cc.decode("z"+t.id),r=t.privKey&&ws(t.privKey,"base64pad"),n=t.pubKey&&ws(t.pubKey,"base64pad"),i=n&&await hn.unmarshalPublicKey(n);if(!r)return new ln(e,void 0,i);let a=await hn.unmarshalPrivateKey(r),s=await Es(a.public),o;if(i&&(o=await Es(i)),i&&!Bi(s,o))throw new Error("Public and private key do not match");if(e&&!Bi(s,e))throw new Error("Id and private key do not match");return new ln(e,a,i)};Vt.createFromProtobuf=async t=>{typeof t=="string"&&(t=ws(t,"base16"));let{id:e,privKey:r,pubKey:n}=nv.decode(t);r=r?await hn.unmarshalPrivateKey(r):!1,n=n?await hn.unmarshalPublicKey(n):!1;let i,a;if(r&&(a=await Es(r.public)),n&&(i=await Es(n)),r){if(n&&!Bi(a,i))throw new Error("Public and private key do not match");return new ln(a,r,r.public)}if(n)return new ln(i,void 0,n);if(e)return new ln(e);throw new Error("Protobuf did not contain any usable key material")};Vt.parse=t=>((t.charAt(0)==="1"||t.charAt(0)==="Q")&&(t=`z${t}`),Vt.createFromBytes(dS.decode(t)));Vt.isPeerId=t=>Boolean(typeof t=="object"&&t._id&&t._idB58String);function fv(t){if(t)return lS(t,"base64pad")}});var _a=T((NT,of)=>{"use strict";var lc=class extends Error{constructor(e){super(e);this.name="TimeoutError"}},cv=(t,e,r,n)=>{let i,a=new Promise((s,o)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){s(t);return}n={customTimers:{setTimeout,clearTimeout},...n},i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{s(r())}catch(c){o(c)}return}let f=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,u=r instanceof Error?r:new lc(f);typeof t.cancel=="function"&&t.cancel(),o(u)},e),(async()=>{try{s(await t)}catch(f){o(f)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return a.clear=()=>{clearTimeout(i),i=void 0},a};of.exports=cv;of.exports.default=cv;of.exports.TimeoutError=lc});var rt=T(tt=>{"use strict";var dc=W0(),{sha256:hv}=(yn(),Vr),{base58btc:yS}=(zr(),Ur),{Key:bS}=eo(),lv=fo(),vS=uo(),{Record:gS}=zi(),mS=Sa(),xS=ke(),{fromString:dv}=(hr(),cr),{toString:pv}=(et(),Xe),{concat:wS}=(zn(),Un),yv=_a();tt.convertBuffer=async t=>(await hv.digest(t)).digest;tt.convertPeerId=async t=>(await hv.digest(t.id)).digest;tt.bufferToKey=t=>new bS("/"+tt.encodeBase32(t),!1);tt.keyForPublicKey=t=>wS([dv("/pk/"),t.id]);tt.isPublicKeyKey=t=>pv(t.slice(0,4))==="/pk/";tt.fromPublicKeyKey=t=>new mS(t.slice(4));tt.now=()=>Date.now();tt.encodeBase32=t=>pv(t,"base32");tt.decodeBase32=t=>dv(t,"base32");tt.sortClosestPeers=async(t,e)=>(await vS(t,async n=>{let i=await tt.convertPeerId(n);return{peer:n,distance:lv(i,e)}})).sort(tt.xorCompare).map(n=>n.peer);tt.xorCompare=(t,e)=>lv.compare(t.distance,e.distance);tt.pathSize=(t,e)=>Math.ceil(t/e);tt.createPutRecord=(t,e)=>{let r=new Date;return new gS(t,e,r).serialize()};tt.logger=(t,e)=>{let r=["libp2p","dht"];return e&&r.push(e),t&&r.push(`${t.toB58String().slice(0,8)}`),dc.formatters.b=i=>yS.baseEncode(i),Object.assign(dc(r.join(":")),{error:dc(r.concat(["error"]).join(":"))})};tt.TimeoutError=class extends Error{get code(){return"ETIMEDOUT"}};tt.withTimeout=(t,e)=>{async function r(...n){if(!e)return t(...n);let i;try{i=await yv(t(...n),e)}catch(a){throw a instanceof yv.TimeoutError?xS(a,"ETIMEDOUT"):a}return i}return r};tt.mapParallel=async function(t,e){let r=[];for await(let n of t)r.push(e(n));return Promise.all(r)}});var gv=T((OT,vv)=>{"use strict";var ES=yp(),ff=rt(),bv=class{constructor(e,r){this.self=e,this._onPing=this._onPing.bind(this),this._onInit(r)}async _onInit(e){let r=await ff.convertPeerId(this.self);this.kb=new ES({localNodeId:r,numberOfNodesPerKBucket:e,numberOfNodesToPing:1}),this.kb.on("ping",this._onPing)}_onPing(e,r){let n=e[0];n&&this.kb.remove(n.id),this.kb.add(r)}get size(){return this.kb.count()}async find(e){let r=await ff.convertPeerId(e),n=this.closestPeer(r);if(n&&e.equals(n))return n}closestPeer(e){let r=this.closestPeers(e,1);if(r.length>0)return r[0]}closestPeers(e,r){return this.kb.closest(e,r).map(i=>i.peer)}async add(e){let r=await ff.convertPeerId(e);this.kb.add({id:r,peer:e})}async remove(e){let r=await ff.convertPeerId(e);this.kb.remove(r)}};vv.exports=bv});var Xn=T($t=>{"use strict";var uf=$t.second=1e3,mv=$t.minute=60*uf,pc=$t.hour=60*mv;$t.MAX_RECORD_AGE=36*pc;$t.PROTOCOL_DHT="/kad/1.0.0";$t.PROVIDERS_KEY_PREFIX="/providers/";$t.PROVIDERS_LRU_CACHE_SIZE=256;$t.PROVIDERS_VALIDITY=24*pc;$t.PROVIDERS_CLEANUP_INTERVAL=pc;$t.READ_MESSAGE_TIMEOUT=10*uf;$t.GET_MANY_RECORD_COUNT=16;$t.K=20;$t.ALPHA=3;$t.defaultRandomWalk={enabled:!0,queriesPerPeriod:1,interval:5*mv,timeout:10*uf,delay:10*uf}});var bc=T((FT,Aa)=>{var xv=(...t)=>{let e;for(;t.length;)e=t.shift()(e);return e},yc=t=>t&&(typeof t[Symbol.asyncIterator]=="function"||typeof t[Symbol.iterator]=="function"||typeof t.next=="function"),cf=t=>t&&typeof t.sink=="function"&&yc(t.source),SS=t=>e=>(t.sink(e),t.source),wv=(...t)=>{if(cf(t[0])){let e=t[0];t[0]=()=>e.source}else if(yc(t[0])){let e=t[0];t[0]=()=>e}if(t.length>1&&cf(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let e=1;e<t.length-1;e++)cf(t[e])&&(t[e]=SS(t[e]));return xv(...t)};Aa.exports=wv;Aa.exports.pipe=wv;Aa.exports.rawPipe=xv;Aa.exports.isIterable=yc;Aa.exports.isDuplex=cf});var vc=T((UT,Sv)=>{"use strict";var{Buffer:kr}=Nn(),Ev=Symbol.for("BufferList");function Fe(t){if(!(this instanceof Fe))return new Fe(t);Fe._init.call(this,t)}Fe._init=function(e){Object.defineProperty(this,Ev,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};Fe.prototype._new=function(e){return new Fe(e)};Fe.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let n=0;n<this._bufs.length;n++){let i=r+this._bufs[n].length;if(e<i||n===this._bufs.length-1)return[n,e-r];r=i}};Fe.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r};Fe.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};Fe.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};Fe.prototype.copy=function(e,r,n,i){if((typeof n!="number"||n<0)&&(n=0),(typeof i!="number"||i>this.length)&&(i=this.length),n>=this.length||i<=0)return e||kr.alloc(0);let a=!!e,s=this._offset(n),o=i-n,f=o,u=a&&r||0,c=s[1];if(n===0&&i===this.length){if(!a)return this._bufs.length===1?this._bufs[0]:kr.concat(this._bufs,this.length);for(let l=0;l<this._bufs.length;l++)this._bufs[l].copy(e,u),u+=this._bufs[l].length;return e}if(f<=this._bufs[s[0]].length-c)return a?this._bufs[s[0]].copy(e,r,c,c+f):this._bufs[s[0]].slice(c,c+f);a||(e=kr.allocUnsafe(o));for(let l=s[0];l<this._bufs.length;l++){let y=this._bufs[l].length-c;if(f>y)this._bufs[l].copy(e,u,c),u+=y;else{this._bufs[l].copy(e,u,c,c+f),u+=y;break}f-=y,c&&(c=0)}return e.length>u?e.slice(0,u):e};Fe.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let n=this._offset(e),i=this._offset(r),a=this._bufs.slice(n[0],i[0]+1);return i[1]===0?a.pop():a[a.length-1]=a[a.length-1].slice(0,i[1]),n[1]!==0&&(a[0]=a[0].slice(n[1])),this._new(a)};Fe.prototype.toString=function(e,r,n){return this.slice(r,n).toString(e)};Fe.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};Fe.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};Fe.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(kr.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(kr.from(e));return this};Fe.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};Fe.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=kr.from([t]):typeof t=="string"?t=kr.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=kr.from(t.buffer,t.byteOffset,t.byteLength):kr.isBuffer(t)||(t=kr.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let n=this._offset(e),i=n[0],a=n[1];for(;i<this._bufs.length;i++){let s=this._bufs[i];for(;a<s.length;)if(s.length-a>=t.length){let f=s.indexOf(t,a);if(f!==-1)return this._reverseOffset([i,f]);a=s.length-t.length+1}else{let f=this._reverseOffset([i,a]);if(this._match(f,t))return f;a++}a=0}return-1};Fe.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?Fe.prototype[r]=function(n,i){return this.slice(n,n+i)[r](0,i)}:Fe.prototype[r]=function(n=0){return this.slice(n,n+t[r])[r](0)}})(e)})();Fe.prototype._isBufferList=function(e){return e instanceof Fe||Fe.isBufferList(e)};Fe.isBufferList=function(e){return e!=null&&e[Ev]};Sv.exports=Fe});var Bv=T((zT,Av)=>{Av.exports=gc;var _v=128,_S=127,AS=~_S,BS=Math.pow(2,31);function gc(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw gc.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var n=r;t>=BS;)e[r++]=t&255|_v,t/=128;for(;t&AS;)e[r++]=t&255|_v,t>>>=7;return e[r]=t|0,gc.bytes=r-n+1,e}});var Tv=T((VT,Cv)=>{Cv.exports=mc;var IS=128,Iv=127;function mc(t,e){var r=0,e=e||0,n=0,i=e,a,s=t.length;do{if(i>=s||n>49)throw mc.bytes=0,new RangeError("Could not decode varint");a=t[i++],r+=n<28?(a&Iv)<<n:(a&Iv)*Math.pow(2,n),n+=7}while(a>=IS);return mc.bytes=i-e,r}});var Mv=T((HT,Pv)=>{var CS=Math.pow(2,7),TS=Math.pow(2,14),PS=Math.pow(2,21),MS=Math.pow(2,28),RS=Math.pow(2,35),qS=Math.pow(2,42),kS=Math.pow(2,49),NS=Math.pow(2,56),LS=Math.pow(2,63);Pv.exports=function(t){return t<CS?1:t<TS?2:t<PS?3:t<MS?4:t<RS?5:t<qS?6:t<kS?7:t<NS?8:t<LS?9:10}});var Ii=T((jT,Rv)=>{Rv.exports={encode:Bv(),decode:Tv(),encodingLength:Mv()}});var xc=T((GT,Nv)=>{"use strict";var qv=Ii(),{Buffer:DS}=Nn(),kv=(t,e,r)=>{let n=qv.encode(t,e,r);return kv.bytes=qv.encode.bytes,e||DS.from(n)};Nv.exports=kv});var Uv=T(($T,hf)=>{"use strict";var{Buffer:Lv}=Nn(),Dv=vc(),Ov=xc(),wc=8,Kv=10*1024;function Fv(t){t=t||{};let e=Math.max(t.poolSize||Kv,t.minPoolSize||wc),r=t.lengthEncoder||Ov;return async function*(i){let a=Lv.alloc(e),s=0;for await(let o of i){r(o.length,a,s);let f=a.slice(s,s+r.bytes);s+=r.bytes,a.length-s<wc&&(a=Lv.alloc(e),s=0),yield new Dv().append(f).append(o)}}}Fv.single=(t,e)=>{e=e||{};let r=e.lengthEncoder||Ov;return new Dv([r(t.length),t.slice()])};hf.exports=Fv;hf.exports.MIN_POOL_SIZE=wc;hf.exports.DEFAULT_POOL_SIZE=Kv});var Ec=T((YT,Hv)=>{"use strict";var zv=Ii(),{Buffer:OS}=Nn(),KS=t=>new Proxy({},{get:(e,r)=>r[0]==="l"?t[r]:t.get(parseInt(r))}),Vv=t=>{let e=zv.decode(OS.isBuffer(t)?t:KS(t));return Vv.bytes=zv.decode.bytes,e};Hv.exports=Vv});var Yv=T((WT,lf)=>{"use strict";var{Buffer:FS}=Nn(),Sc=vc(),US=Ec(),jv=8,Gv=1024*1024*4,$v=FS.alloc(0),ei={LENGTH:"readLength",DATA:"readData"},zS={[ei.LENGTH]:(t,e,r,n)=>{e=e.append(t);let i;try{i=n.lengthDecoder(e)}catch(a){if(e.length>n.maxLengthLength)throw Object.assign(a,{message:"message length too long",code:"ERR_MSG_LENGTH_TOO_LONG"});if(a instanceof RangeError)return{mode:ei.LENGTH,buffer:e,chunk:void 0,state:void 0,data:void 0};throw a}if(i>n.maxDataLength)throw Object.assign(new Error("message data too long"),{code:"ERR_MSG_DATA_TOO_LONG"});return t=e.shallowSlice(n.lengthDecoder.bytes),e=new Sc,n.onLength&&n.onLength(i),i<=0?(n.onData&&n.onData($v),{mode:ei.LENGTH,chunk:t,buffer:e,data:$v}):{mode:ei.DATA,chunk:t,buffer:e,state:{dataLength:i},data:void 0}},[ei.DATA]:(t,e,r,n)=>{if(e=e.append(t),!r)throw new Error("state is required");if(e.length<r.dataLength)return{mode:ei.DATA,buffer:e,state:r,chunk:void 0,data:void 0};let{dataLength:i}=r,a=e.shallowSlice(0,i),s=e.length>i?e.shallowSlice(i):void 0;return e=new Sc,n.onData&&n.onData(a),{mode:ei.LENGTH,chunk:s,buffer:e,state:void 0,data:a}}};function _c(t){t=t||{};let e={lengthDecoder:t.lengthDecoder||US,maxLengthLength:t.maxLengthLength||jv,maxDataLength:t.maxDataLength||Gv,onLength:t.onLength,onData:t.onData};return async function*(n){let i=new Sc,a=ei.LENGTH,s;for await(let o of n){let f=o;for(;f;){let u=zS[a](f,i,s,e);a=u.mode,f=u.chunk,i=u.buffer,s=u.state,u.data&&(yield u.data)}}if(i.length)throw Object.assign(new Error("unexpected end of input"),{code:"ERR_UNEXPECTED_EOF"})}}_c.fromReader=(t,e)=>{let r=1,n={[Symbol.asyncIterator](){return this},next:async()=>{try{return await t.next(r)}catch(a){if(a.code==="ERR_UNDER_READ")return{done:!0,value:null};throw a}finally{r=1}}};return _c({...e||{},onLength:a=>{r=a}})(n)};lf.exports=_c;lf.exports.MAX_LENGTH_LENGTH=jv;lf.exports.MAX_DATA_LENGTH=Gv});var Jv=T((QT,Qv)=>{"use strict";var{Buffer:VS}=Nn(),Wv=(t,e,r)=>(e=e||VS.allocUnsafe(4),e.writeInt32BE(t,r),e);Wv.bytes=4;Qv.exports=Wv});var eg=T((JT,Xv)=>{"use strict";var Zv=t=>{if(t.length<4)throw RangeError("Could not decode int32BE");return t.readInt32BE(0)};Zv.bytes=4;Xv.exports=Zv});var Ac=T(Ci=>{"use strict";Ci.encode=Uv();Ci.decode=Yv();Ci.varintEncode=xc();Ci.varintDecode=Ec();Ci.int32BEEncode=Jv();Ci.int32BEDecode=eg()});var rg=T((df,tg)=>{(function(t,e){typeof df=="object"&&typeof tg!="undefined"?e(df):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.streamingIterables={}))})(df,function(t){"use strict";async function*e(R,L){let N=[];for await(let D of L)N.push(D),N.length===R&&(yield N,N=[]);N.length>0&&(yield N)}function*r(R,L){let N=[];for(let D of L)N.push(D),N.length===R&&(yield N,N=[]);N.length>0&&(yield N)}function n(R,L){return L===void 0?N=>n(R,N):L[Symbol.asyncIterator]?e(R,L):r(R,L)}function i(R){if(typeof R.next=="function")return R;if(typeof R[Symbol.iterator]=="function")return R[Symbol.iterator]();if(typeof R[Symbol.asyncIterator]=="function")return R[Symbol.asyncIterator]();throw new TypeError('"values" does not to conform to any of the iterator or iterable protocols')}function a(){let R,L;return{promise:new Promise((D,Z)=>{L=D,R=Z}),reject:R,resolve:L}}function s(R,L){let N=i(L),D=[],Z=[],ie=!1,ae=!1;function Ve(){for(;Z.length>0&&D.length>0;){let te=Z.shift(),{error:be,value:ar}=D.shift();be?te.reject(be):te.resolve({done:!1,value:ar})}for(;Z.length>0&&ae;){let{resolve:te}=Z.shift();te({done:!0,value:void 0})}}async function fe(){if(!ae&&!ie&&!(D.length>=R)){ie=!0;try{let{done:te,value:be}=await N.next();te?ae=!0:D.push({value:be})}catch(te){ae=!0,D.push({error:te})}Ve(),ie=!1,fe()}}async function ue(){if(D.length>0){let{error:be,value:ar}=D.shift();if(be)throw be;return fe(),{done:!1,value:ar}}if(ae)return{done:!0,value:void 0};let te=a();return Z.push(te),fe(),te.promise}let Ue={next:ue,[Symbol.asyncIterator]:()=>Ue};return Ue}function*o(R,L){let N=[],D;try{for(let Z of L)N.push(Z),!(N.length<=R)&&(yield N.shift())}catch(Z){D=Z}for(let Z of N)yield Z;if(D)throw D}function f(R,L){return L===void 0?N=>f(R,N):R===0?L:L[Symbol.asyncIterator]?s(R,L):o(R,L)}async function u(R){let L=[];for await(let N of R)L.push(N);return L}function c(R){return R[Symbol.asyncIterator]?u(R):Array.from(R)}async function*l(R){for await(let L of R)yield*L}function*y(R){for(let L of R)yield*L}function x(...R){return R.find(N=>N[Symbol.asyncIterator]!==void 0)?l(R):y(R)}async function v(R){for await(let L of R);}function b(R){if(R[Symbol.asyncIterator])return v(R);for(let L of R);}async function*_(R,L){for await(let N of L)await R(N)&&(yield N)}function A(R,L){return L===void 0?N=>_(R,N):_(R,L)}async function*M(R){for await(let L of R)L&&typeof L!="string"&&(L[Symbol.iterator]||L[Symbol.asyncIterator])?yield*M(L):yield L}async function*q(R,L){for await(let N of L)yield await R(N)}function z(R,L){return L===void 0?N=>q(R,N):q(R,L)}function O(R,L){return L===void 0?N=>O(R,N):A(N=>N!=null,M(z(R,L)))}function U(R,L,N){let D=i(N),Z=[],ie=[],ae=!1,Ve=!1,fe=0,ue=null;function Ue(){for(;ie.length>0&&Z.length>0;){let{resolve:de}=ie.shift(),Ce=Z.shift();de({done:!1,value:Ce})}for(;ie.length>0&&fe===0&&ae;){let{resolve:de,reject:Ce}=ie.shift();ue?(Ce(ue),ue=null):de({done:!0,value:void 0})}}async function te(){if(ae){Ue();return}if(!Ve&&!(fe+Z.length>=R)){Ve=!0,fe++;try{let{done:de,value:Ce}=await D.next();de?(ae=!0,fe--,Ue()):be(Ce)}catch(de){ae=!0,fe--,ue=de,Ue()}Ve=!1,te()}}async function be(de){try{let Ce=await L(de);if(Ce&&Ce[Symbol.asyncIterator])for await(let $e of Ce)Z.push($e);else Z.push(Ce)}catch(Ce){ae=!0,ue=Ce}fe--,Ue(),te()}async function ar(){if(Z.length===0){let Ce=a();return ie.push(Ce),te(),Ce.promise}let de=Z.shift();return te(),{done:!1,value:de}}let Re={next:ar,[Symbol.asyncIterator]:()=>Re};return Re}function $(R,L,N){return L===void 0?(D,Z)=>Z?$(R,D,Z):$(R,D):N===void 0?D=>$(R,L,D):A(D=>D!=null,M(U(R,L,N)))}async function H(R){return new Promise(L=>{R.once("readable",()=>{L()})})}async function*X(R){for(;;){let L=R.read();if(L!==null){yield L;continue}if(R._readableState.ended)break;await H(R)}}function B(R){return typeof R[Symbol.asyncIterator]=="function"?R:X(R)}async function*h(...R){let L=new Set(R.map(i));for(;L.size>0;)for(let N of L){let D=await N.next();D.done?L.delete(N):yield D.value}}function p(R,...L){let N=R();for(let D of L)N=D(N);return N}async function*g(R,L,N){let D=null,Z=fe=>({value:L(fe)}),ie=async function*(fe){for await(let ue of fe){if(D)return;yield ue}},ae=p(()=>N,f(1),ie,z(Z),f(R-1)),Ve=i(ae);for(;;){let{value:fe,done:ue}=await Ve.next();if(ue)break;try{let Ue=await fe.value;D||(yield Ue)}catch(Ue){D=Ue}}if(D)throw D}function m(R,L,N){return L===void 0?(D,Z)=>m(R,D,Z):N===void 0?D=>m(R,L,D):R===1?z(L,N):g(R,L,N)}function w(R,L,N){return L===void 0?(D,Z)=>Z?w(R,D,Z):w(R,D):N===void 0?D=>w(R,L,D):A(D=>D!=null,M(m(R,L,N)))}async function*C(...R){let L=R.map(i),N=new Set,D=new Map,Z=null,ie=null,ae=null,Ve=te=>{Z=te,ie&&ie(te)},fe=te=>{ae&&ae(te)},ue=()=>new Promise((te,be)=>{if(Z&&be(Z),D.size>0)return te();ae=te,ie=be}),Ue=te=>{let be=Promise.resolve(te.next()).then(async({done:ar,value:Re})=>{ar||D.set(te,Re),N.delete(be)});N.add(be),be.then(fe,Ve)};for(let te of L)Ue(te);for(;;){if(N.size===0&&D.size===0)return;await ue();for(let[te,be]of D)D.delete(te),yield be,Ue(te)}}async function I(R,L,N){let D=L;for await(let Z of N)D=await R(D,Z);return D}function E(R,L,N){return L===void 0?(D,Z)=>Z?I(R,D,Z):E(R,D):N===void 0?D=>E(R,L,D):I(R,L,N)}async function*d(R,L){let N=0;for await(let D of L)if(yield await D,N++,N>=R)break}function*S(R,L){let N=0;for(let D of L)if(yield D,N++,N>=R)break}function G(R,L){return L===void 0?N=>G(R,N):L[Symbol.asyncIterator]?d(R,L):S(R,L)}async function*Y(R,L){for await(let N of L)await R(N),yield N}function W(R,L){return L===void 0?N=>Y(R,N):Y(R,L)}function ee(R,L){let N=R[0]+L[0],D=R[1]+L[1];if(D>=1e9){let Z=D%1e9;N+=(D-Z)/1e9,D=Z}return[N,D]}async function*oe(R,L){let N=L[Symbol.asyncIterator](),D=[0,0];for(;;){let Z=process.hrtime(),{value:ie,done:ae}=await N.next(),Ve=process.hrtime(Z);if(D=ee(D,Ve),R.progress&&R.progress(Ve,D),ae)return R.total&&R.total(D),ie;yield ie}}function*he(R,L){let N=L[Symbol.iterator](),D=[0,0];for(;;){let Z=process.hrtime(),{value:ie,done:ae}=N.next(),Ve=process.hrtime(Z);if(D=ee(D,Ve),R.progress&&R.progress(Ve,D),ae)return R.total&&R.total(D),ie;yield ie}}function Me(R={},L){return L===void 0?N=>Me(R,N):L[Symbol.asyncIterator]!==void 0?oe(R,L):he(R,L)}function le(R,L,N){let D=i(N),Z=[],ie=[],ae=!1,Ve=!1,fe=0,ue=null;function Ue(){for(;ie.length>0&&Z.length>0;){let{resolve:de}=ie.shift(),Ce=Z.shift();de({done:!1,value:Ce})}for(;ie.length>0&&fe===0&&ae;){let{resolve:de,reject:Ce}=ie.shift();ue?(Ce(ue),ue=null):de({done:!0,value:void 0})}}async function te(){if(ae){Ue();return}if(!Ve&&!(fe+Z.length>=R)){Ve=!0,fe++;try{let{done:de,value:Ce}=await D.next();de?(ae=!0,fe--,Ue()):be(Ce)}catch(de){ae=!0,fe--,ue=de,Ue()}Ve=!1,te()}}async function be(de){try{let Ce=await L(de);Z.push(Ce)}catch(Ce){ae=!0,ue=Ce}fe--,Ue(),te()}async function ar(){if(Z.length===0){let Ce=a();return ie.push(Ce),te(),Ce.promise}let de=Z.shift();return te(),{done:!1,value:de}}let Re={next:ar,[Symbol.asyncIterator]:()=>Re};return Re}function ce(R,L,N){return L===void 0?(D,Z)=>Z?ce(R,D,Z):ce(R,D):N===void 0?D=>ce(R,L,D):le(R,L,N)}async function Ge(R,L){let N=null,D=null,Z=null,ie=ue=>{N=ue,D&&D(ue)},ae=()=>{Z&&Z()},Ve=()=>{R.removeListener("error",ie),R.removeListener("drain",ae)};R.once("error",ie);let fe=()=>new Promise((ue,Ue)=>{if(N)return Ue(N);R.once("drain",ae),Z=ue,D=Ue});for await(let ue of L)if(R.write(ue)===!1&&await fe(),N)break;if(Ve(),N)throw N}function ge(R,L){return L===void 0?N=>Ge(R,N):Ge(R,L)}t.batch=n,t.buffer=f,t.collect=c,t.concat=x,t.consume=b,t.filter=A,t.flatMap=O,t.flatTransform=$,t.flatten=M,t.fromStream=B,t.getIterator=i,t.map=z,t.merge=h,t.parallelFlatMap=w,t.parallelMap=m,t.parallelMerge=C,t.pipeline=p,t.reduce=E,t.take=G,t.tap=W,t.time=Me,t.transform=ce,t.writeToStream=ge,Object.defineProperty(t,"__esModule",{value:!0})})});var ig=T((XT,ng)=>{"use strict";var HS=async t=>{for await(let e of t)return e};ng.exports=HS});var ug=T((eP,fg)=>{"use strict";var ag=()=>{},sg=Symbol.for("@libp2p/js-interfaces/topology"),og=class{constructor({min:e=0,max:r=1/0,handlers:n={}}){this.min=e,this.max=r,this._onConnect=n.onConnect||ag,this._onDisconnect=n.onDisconnect||ag,this.peers=new Set}get[Symbol.toStringTag](){return"Topology"}get[sg](){return!0}static isTopology(e){return Boolean(e&&e[sg])}set registrar(e){this._registrar=e}disconnect(e){this._onDisconnect(e)}};fg.exports=og});var dg=T((tP,lg)=>{"use strict";var jS=ug(),cg=Symbol.for("@libp2p/js-interfaces/topology/multicodec-topology"),hg=class extends jS{constructor({min:e,max:r,multicodecs:n,handlers:i}){super({min:e,max:r,handlers:i});if(!n)throw new Error("one or more multicodec should be provided");if(!i)throw new Error("the handlers should be provided");if(typeof i.onConnect!="function")throw new Error("the 'onConnect' handler must be provided");if(typeof i.onDisconnect!="function")throw new Error("the 'onDisconnect' handler must be provided");this.multicodecs=Array.isArray(n)?n:[n],this._registrar=void 0,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerConnect=this._onPeerConnect.bind(this)}get[Symbol.toStringTag](){return"Topology"}get[cg](){return!0}static isMulticodecTopology(e){return Boolean(e&&e[cg])}set registrar(e){this._registrar=e,this._registrar.peerStore.on("change:protocols",this._onProtocolChange),this._registrar.connectionManager.on("peer:connect",this._onPeerConnect),this._updatePeers(this._registrar.peerStore.peers.values())}_updatePeers(e){for(let{id:r,protocols:n}of e)if(this.multicodecs.filter(i=>n.includes(i)).length){this.peers.add(r.toB58String());let i=this._registrar.getConnection(r);i&&this._onConnect(r,i)}else this.peers.delete(r.toB58String())}_onProtocolChange({peerId:e,protocols:r}){let n=this.peers.has(e.toB58String()),i=r.filter(a=>this.multicodecs.includes(a));n&&i.length===0&&this._onDisconnect(e);for(let a of r)if(this.multicodecs.includes(a)){let s=this._registrar.peerStore.get(e);this._updatePeers([s]);return}}_onPeerConnect(e){let r=e.remotePeer,n=this._registrar.peerStore.protoBook.get(r);!n||this.multicodecs.find(i=>n.includes(i))&&(this.peers.add(r.toB58String()),this._onConnect(r,e))}};lg.exports=hg});var bg=T((rP,yg)=>{"use strict";var pg="[a-fA-F\\d:]",ti=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${pg})|(?<=${pg})(?=\\s|$))`:"",Nr="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",_t="[a-fA-F\\d]{1,4}",pf=`
(?:
(?:${_t}:){7}(?:${_t}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${_t}:){6}(?:${Nr}|:${_t}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${_t}:){5}(?::${Nr}|(?::${_t}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${_t}:){4}(?:(?::${_t}){0,1}:${Nr}|(?::${_t}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${_t}:){3}(?:(?::${_t}){0,2}:${Nr}|(?::${_t}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${_t}:){2}(?:(?::${_t}){0,3}:${Nr}|(?::${_t}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${_t}:){1}(?:(?::${_t}){0,4}:${Nr}|(?::${_t}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${_t}){0,5}:${Nr}|(?::${_t}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),GS=new RegExp(`(?:^${Nr}$)|(?:^${pf}$)`),$S=new RegExp(`^${Nr}$`),YS=new RegExp(`^${pf}$`),Bc=t=>t&&t.exact?GS:new RegExp(`(?:${ti(t)}${Nr}${ti(t)})|(?:${ti(t)}${pf}${ti(t)})`,"g");Bc.v4=t=>t&&t.exact?$S:new RegExp(`${ti(t)}${Nr}${ti(t)}`,"g");Bc.v6=t=>t&&t.exact?YS:new RegExp(`${ti(t)}${pf}${ti(t)}`,"g");yg.exports=Bc});var gg=T((nP,vg)=>{"use strict";var Ic=bg(),Ba=t=>Ic({exact:!0}).test(t);Ba.v4=t=>Ic.v4({exact:!0}).test(t);Ba.v6=t=>Ic.v6({exact:!0}).test(t);Ba.version=t=>Ba(t)?Ba.v4(t)?4:6:void 0;vg.exports=Ba});var Sg=T((iP,Eg)=>{"use strict";var Cc=gg(),{toString:mg}=(et(),Xe),WS=Cc,Tc=Cc.v4,xg=Cc.v6,wg=function(t,e,r){r=~~r;let n;if(Tc(t))n=e||new Uint8Array(r+4),t.split(/\./g).map(function(i){n[r++]=parseInt(i,10)&255});else if(xg(t)){let i=t.split(":",8),a;for(a=0;a<i.length;a++){let s=Tc(i[a]),o;s&&(o=wg(i[a]),i[a]=mg(o.slice(0,2),"base16")),o&&++a<8&&i.splice(a,0,mg(o.slice(2,4),"base16"))}if(i[0]==="")for(;i.length<8;)i.unshift("0");else if(i[i.length-1]==="")for(;i.length<8;)i.push("0");else if(i.length<8){for(a=0;a<i.length&&i[a]!=="";a++);let s=[a,"1"];for(a=9-i.length;a>0;a--)s.push("0");i.splice.apply(i,s)}for(n=e||new Uint8Array(r+16),a=0;a<i.length;a++){let s=parseInt(i[a],16);n[r++]=s>>8&255,n[r++]=s&255}}if(!n)throw Error("Invalid ip address: "+t);return n},QS=function(t,e,r){e=~~e,r=r||t.length-e;let n=[],i,a=new DataView(t.buffer);if(r===4){for(let s=0;s<r;s++)n.push(t[e+s]);i=n.join(".")}else if(r===16){for(let s=0;s<r;s+=2)n.push(a.getUint16(e+s).toString(16));i=n.join(":"),i=i.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),i=i.replace(/:{3,4}/,"::")}return i};Eg.exports={isIP:WS,isV4:Tc,isV6:xg,toBytes:wg,toString:QS}});var yf=T((aP,Ag)=>{"use strict";function rr(t){if(typeof t=="number"){if(rr.codes[t])return rr.codes[t];throw new Error("no protocol with code: "+t)}else if(typeof t=="string"){if(rr.names[t])return rr.names[t];throw new Error("no protocol with name: "+t)}throw new Error("invalid protocol id type: "+t)}var Sr=-1;rr.lengthPrefixedVarSize=Sr;rr.V=Sr;rr.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,Sr,"ip6zone"],[53,Sr,"dns","resolvable"],[54,Sr,"dns4","resolvable"],[55,Sr,"dns6","resolvable"],[56,Sr,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,Sr,"unix",!1,"path"],[421,Sr,"ipfs"],[421,Sr,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,Sr,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,Sr,"memory"]];rr.names={};rr.codes={};rr.table.map(t=>{let e=_g.apply(null,t);return rr.codes[e.code]=e,rr.names[e.name]=e,null});rr.object=_g;function _g(t,e,r,n,i){return{code:t,size:e,name:r,resolvable:Boolean(n),path:Boolean(i)}}Ag.exports=rr});var qg=T((sP,Rg)=>{"use strict";var bf=Sg(),Bg=yf(),{CID:JS}=(ai(),Ui),{base32:Ig}=(Ni(),ki),{base58btc:ZS}=(zr(),Ur),XS=(Fi(),ja),Ia=Ii(),{toString:vf}=(et(),Xe),{fromString:Cg}=(hr(),cr),{concat:gf}=(zn(),Un);Rg.exports=Ss;function Ss(t,e){return e instanceof Uint8Array?Ss.toString(t,e):Ss.toBytes(t,e)}Ss.toString=function(e,r){switch(Bg(e).code){case 4:case 41:return e_(r);case 6:case 273:case 33:case 132:return Pg(r).toString();case 53:case 54:case 55:case 56:case 400:case 777:return r_(r);case 421:return i_(r);case 444:return Mg(r);case 445:return Mg(r);default:return vf(r,"base16")}};Ss.toBytes=function(e,r){switch(Bg(e).code){case 4:return Tg(r);case 41:return Tg(r);case 6:case 273:case 33:case 132:return Pc(parseInt(r,10));case 53:case 54:case 55:case 56:case 400:case 777:return t_(r);case 421:return n_(r);case 444:return a_(r);case 445:return s_(r);default:return Cg(r,"base16")}};function Tg(t){if(!bf.isIP(t))throw new Error("invalid ip address");return bf.toBytes(t)}function e_(t){let e=bf.toString(t);if(!e||!bf.isIP(e))throw new Error("invalid ip address");return e}function Pc(t){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function Pg(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function t_(t){let e=Cg(t),r=Uint8Array.from(Ia.encode(e.length));return gf([r,e],r.length+e.length)}function r_(t){let e=Ia.decode(t);if(t=t.slice(Ia.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return vf(t)}function n_(t){let e;t[0]==="Q"||t[0]==="1"?e=XS.decode(ZS.decode(`z${t}`)).bytes:e=JS.parse(t).multihash.bytes;let r=Uint8Array.from(Ia.encode(e.length));return gf([r,e],r.length+e.length)}function i_(t){let e=Ia.decode(t),r=t.slice(Ia.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return vf(r,"base58btc")}function a_(t){let e=t.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==16)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion address.");let r=Ig.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=Pc(n);return gf([r,i],r.length+i.length)}function s_(t){let e=t.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==56)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion3 address.");let r=Ig.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=Pc(n);return gf([r,i],r.length+i.length)}function Mg(t){let e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=vf(e,"base32"),i=Pg(r);return n+":"+i}});var jg=T((oP,Hg)=>{"use strict";var kg=qg(),Mc=yf(),_s=Ii(),{concat:Ng}=(zn(),Un),{toString:o_}=(et(),Xe);Hg.exports={stringToStringTuples:Lg,stringTuplesToString:Dg,tuplesToStringTuples:Kg,stringTuplesToTuples:Og,bytesToTuples:Rc,tuplesToBytes:Fg,bytesToString:f_,stringToBytes:zg,fromString:u_,fromBytes:Vg,validateBytes:qc,isValidBytes:c_,cleanPath:mf,ParseError:kc,protoFromTuple:As,sizeForAddr:Ug};function Lg(t){let e=[],r=t.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let i=r[n],a=Mc(i);if(a.size===0){e.push([i]);continue}if(n++,n>=r.length)throw kc("invalid address: "+t);if(a.path){e.push([i,mf(r.slice(n).join("/"))]);break}e.push([i,r[n]])}return e}function Dg(t){let e=[];return t.map(r=>{let n=As(r);return e.push(n.name),r.length>1&&e.push(r[1]),null}),mf(e.join("/"))}function Og(t){return t.map(e=>{Array.isArray(e)||(e=[e]);let r=As(e);return e.length>1?[r.code,kg.toBytes(r.code,e[1])]:[r.code]})}function Kg(t){return t.map(e=>{let r=As(e);return e[1]?[r.code,kg.toString(r.code,e[1])]:[r.code]})}function Fg(t){return Vg(Ng(t.map(e=>{let r=As(e),n=Uint8Array.from(_s.encode(r.code));return e.length>1&&(n=Ng([n,e[1]])),n})))}function Ug(t,e){return t.size>0?t.size/8:t.size===0?0:_s.decode(e)+_s.decode.bytes}function Rc(t){let e=[],r=0;for(;r<t.length;){let n=_s.decode(t,r),i=_s.decode.bytes,a=Mc(n),s=Ug(a,t.slice(r+i));if(s===0){e.push([n]),r+=i;continue}let o=t.slice(r+i,r+i+s);if(r+=s+i,r>t.length)throw kc("Invalid address Uint8Array: "+o_(t,"base16"));e.push([n,o])}return e}function f_(t){let e=Rc(t),r=Kg(e);return Dg(r)}function zg(t){t=mf(t);let e=Lg(t),r=Og(e);return Fg(r)}function u_(t){return zg(t)}function Vg(t){let e=qc(t);if(e)throw e;return Uint8Array.from(t)}function qc(t){try{Rc(t)}catch(e){return e}}function c_(t){return qc(t)===void 0}function mf(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function kc(t){return new Error("Error parsing address: "+t)}function As(t){return Mc(t[0])}});var Wg=T((fP,Yg)=>{"use strict";var Lr=jg(),Ca=yf(),Gg=Ii(),{CID:h_}=(ai(),Ui),{base58btc:l_}=(zr(),Ur),d_=ke(),p_=Symbol.for("nodejs.util.inspect.custom"),{toString:xf}=(et(),Xe),{equals:y_}=(ur(),fr),Nc=new Map,$g=Symbol.for("@multiformats/js-multiaddr/multiaddr"),Yt=class{constructor(e){if(e==null&&(e=""),Object.defineProperty(this,$g,{value:!0}),e instanceof Uint8Array)this.bytes=Lr.fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=Lr.fromString(e)}else if(Yt.isMultiaddr(e))this.bytes=Lr.fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return Lr.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let e={},r=this.toString().split("/");return e.family=r[1]==="ip4"?4:6,e.host=r[2],e.transport=r[3],e.port=parseInt(r[4]),e}protos(){return this.protoCodes().map(e=>Object.assign({},Ca(e)))}protoCodes(){let e=[],r=this.bytes,n=0;for(;n<r.length;){let i=Gg.decode(r,n),a=Gg.decode.bytes,s=Ca(i);n+=Lr.sizeForAddr(s,r.slice(n+a))+a,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return Lr.bytesToTuples(this.bytes)}stringTuples(){let e=Lr.bytesToTuples(this.bytes);return Lr.tuplesToStringTuples(e)}encapsulate(e){return e=new Yt(e),new Yt(this.toString()+e.toString())}decapsulate(e){let r=e.toString(),n=this.toString(),i=n.lastIndexOf(r);if(i<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return new Yt(n.slice(0,i))}decapsulateCode(e){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new Yt(Lr.tuplesToBytes(r.slice(0,n)));return this}getPeerId(){try{let r=this.stringTuples().filter(n=>n[0]===Ca.names.ipfs.code).pop();if(r&&r[1]){let n=r[1];return n[0]==="Q"||n[0]==="1"?xf(l_.decode(`z${n}`),"base58btc"):xf(h_.parse(n).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){let e=null;try{e=this.stringTuples().filter(r=>!!Ca(r[0]).path)[0][1],e||(e=null)}catch(r){e=null}return e}equals(e){return y_(this.bytes,e.bytes)}async resolve(){let e=this.protos().find(i=>i.resolvable);if(!e)return[this];let r=Nc.get(e.name);if(!r)throw d_(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this)).map(i=>new Yt(i))}nodeAddress(){let e=this.protoCodes(),r=this.protoNames(),n=this.toString().split("/").slice(1);if(n.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(e[0]!==4&&e[0]!==41&&e[0]!==54&&e[0]!==55)throw new Error(`no protocol with name: "'${r[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(n[2]!=="tcp"&&n[2]!=="udp")throw new Error(`no protocol with name: "'${r[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:e[0]===41||e[0]===55?6:4,address:n[1],port:parseInt(n[3])}}isThinWaistAddress(e){let r=(e||this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}static fromNodeAddress(e,r){if(!e)throw new Error("requires node address object");if(!r)throw new Error("requires transport protocol");let n;switch(e.family){case 4:n="ip4";break;case 6:n="ip6";break;default:throw Error(`Invalid addr family. Got '${e.family}' instead of 4 or 6`)}return new Yt("/"+[n,e.address,r,e.port].join("/"))}static isName(e){return Yt.isMultiaddr(e)?e.protos().some(r=>r.resolvable):!1}static isMultiaddr(e){return e instanceof Yt||Boolean(e&&e[$g])}[p_](){return"<Multiaddr "+xf(this.bytes,"base16")+" - "+Lr.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+xf(this.bytes,"base16")+" - "+Lr.bytesToString(this.bytes)+">"}};Yt.protocols=Ca;Yt.resolvers=Nc;function b_(t){return new Yt(t)}Yg.exports={Multiaddr:Yt,multiaddr:b_,protocols:Ca,resolvers:Nc}});var Jg=T((uP,Qg)=>{"use strict";var ri=Oa(),Ta=ri.Reader,Lc=ri.Writer,ne=ri.util,Je=ri.roots["libp2p-dht-message"]||(ri.roots["libp2p-dht-message"]={});Je.Record=function(){function t(r){if(r)for(var n=Object.keys(r),i=0;i<n.length;++i)r[n[i]]!=null&&(this[n[i]]=r[n[i]])}t.prototype.key=null,t.prototype.value=null,t.prototype.author=null,t.prototype.signature=null,t.prototype.timeReceived=null;var e;return Object.defineProperty(t.prototype,"_key",{get:ne.oneOfGetter(e=["key"]),set:ne.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_value",{get:ne.oneOfGetter(e=["value"]),set:ne.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_author",{get:ne.oneOfGetter(e=["author"]),set:ne.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_signature",{get:ne.oneOfGetter(e=["signature"]),set:ne.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_timeReceived",{get:ne.oneOfGetter(e=["timeReceived"]),set:ne.oneOfSetter(e)}),t.encode=function(n,i){return i||(i=Lc.create()),n.key!=null&&Object.hasOwnProperty.call(n,"key")&&i.uint32(10).bytes(n.key),n.value!=null&&Object.hasOwnProperty.call(n,"value")&&i.uint32(18).bytes(n.value),n.author!=null&&Object.hasOwnProperty.call(n,"author")&&i.uint32(26).bytes(n.author),n.signature!=null&&Object.hasOwnProperty.call(n,"signature")&&i.uint32(34).bytes(n.signature),n.timeReceived!=null&&Object.hasOwnProperty.call(n,"timeReceived")&&i.uint32(42).string(n.timeReceived),i},t.decode=function(n,i){n instanceof Ta||(n=Ta.create(n));for(var a=i===void 0?n.len:n.pos+i,s=new Je.Record;n.pos<a;){var o=n.uint32();switch(o>>>3){case 1:s.key=n.bytes();break;case 2:s.value=n.bytes();break;case 3:s.author=n.bytes();break;case 4:s.signature=n.bytes();break;case 5:s.timeReceived=n.string();break;default:n.skipType(o&7);break}}return s},t.fromObject=function(n){if(n instanceof Je.Record)return n;var i=new Je.Record;return n.key!=null&&(typeof n.key=="string"?ne.base64.decode(n.key,i.key=ne.newBuffer(ne.base64.length(n.key)),0):n.key.length&&(i.key=n.key)),n.value!=null&&(typeof n.value=="string"?ne.base64.decode(n.value,i.value=ne.newBuffer(ne.base64.length(n.value)),0):n.value.length&&(i.value=n.value)),n.author!=null&&(typeof n.author=="string"?ne.base64.decode(n.author,i.author=ne.newBuffer(ne.base64.length(n.author)),0):n.author.length&&(i.author=n.author)),n.signature!=null&&(typeof n.signature=="string"?ne.base64.decode(n.signature,i.signature=ne.newBuffer(ne.base64.length(n.signature)),0):n.signature.length&&(i.signature=n.signature)),n.timeReceived!=null&&(i.timeReceived=String(n.timeReceived)),i},t.toObject=function(n,i){i||(i={});var a={};return n.key!=null&&n.hasOwnProperty("key")&&(a.key=i.bytes===String?ne.base64.encode(n.key,0,n.key.length):i.bytes===Array?Array.prototype.slice.call(n.key):n.key,i.oneofs&&(a._key="key")),n.value!=null&&n.hasOwnProperty("value")&&(a.value=i.bytes===String?ne.base64.encode(n.value,0,n.value.length):i.bytes===Array?Array.prototype.slice.call(n.value):n.value,i.oneofs&&(a._value="value")),n.author!=null&&n.hasOwnProperty("author")&&(a.author=i.bytes===String?ne.base64.encode(n.author,0,n.author.length):i.bytes===Array?Array.prototype.slice.call(n.author):n.author,i.oneofs&&(a._author="author")),n.signature!=null&&n.hasOwnProperty("signature")&&(a.signature=i.bytes===String?ne.base64.encode(n.signature,0,n.signature.length):i.bytes===Array?Array.prototype.slice.call(n.signature):n.signature,i.oneofs&&(a._signature="signature")),n.timeReceived!=null&&n.hasOwnProperty("timeReceived")&&(a.timeReceived=n.timeReceived,i.oneofs&&(a._timeReceived="timeReceived")),a},t.prototype.toJSON=function(){return this.constructor.toObject(this,ri.util.toJSONOptions)},t}();Je.Message=function(){function t(r){if(this.closerPeers=[],this.providerPeers=[],r)for(var n=Object.keys(r),i=0;i<n.length;++i)r[n[i]]!=null&&(this[n[i]]=r[n[i]])}t.prototype.type=null,t.prototype.clusterLevelRaw=null,t.prototype.key=null,t.prototype.record=null,t.prototype.closerPeers=ne.emptyArray,t.prototype.providerPeers=ne.emptyArray;var e;return Object.defineProperty(t.prototype,"_type",{get:ne.oneOfGetter(e=["type"]),set:ne.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_clusterLevelRaw",{get:ne.oneOfGetter(e=["clusterLevelRaw"]),set:ne.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_key",{get:ne.oneOfGetter(e=["key"]),set:ne.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_record",{get:ne.oneOfGetter(e=["record"]),set:ne.oneOfSetter(e)}),t.encode=function(n,i){if(i||(i=Lc.create()),n.type!=null&&Object.hasOwnProperty.call(n,"type")&&i.uint32(8).int32(n.type),n.key!=null&&Object.hasOwnProperty.call(n,"key")&&i.uint32(18).bytes(n.key),n.record!=null&&Object.hasOwnProperty.call(n,"record")&&i.uint32(26).bytes(n.record),n.closerPeers!=null&&n.closerPeers.length)for(var a=0;a<n.closerPeers.length;++a)Je.Message.Peer.encode(n.closerPeers[a],i.uint32(66).fork()).ldelim();if(n.providerPeers!=null&&n.providerPeers.length)for(var a=0;a<n.providerPeers.length;++a)Je.Message.Peer.encode(n.providerPeers[a],i.uint32(74).fork()).ldelim();return n.clusterLevelRaw!=null&&Object.hasOwnProperty.call(n,"clusterLevelRaw")&&i.uint32(80).int32(n.clusterLevelRaw),i},t.decode=function(n,i){n instanceof Ta||(n=Ta.create(n));for(var a=i===void 0?n.len:n.pos+i,s=new Je.Message;n.pos<a;){var o=n.uint32();switch(o>>>3){case 1:s.type=n.int32();break;case 10:s.clusterLevelRaw=n.int32();break;case 2:s.key=n.bytes();break;case 3:s.record=n.bytes();break;case 8:s.closerPeers&&s.closerPeers.length||(s.closerPeers=[]),s.closerPeers.push(Je.Message.Peer.decode(n,n.uint32()));break;case 9:s.providerPeers&&s.providerPeers.length||(s.providerPeers=[]),s.providerPeers.push(Je.Message.Peer.decode(n,n.uint32()));break;default:n.skipType(o&7);break}}return s},t.fromObject=function(n){if(n instanceof Je.Message)return n;var i=new Je.Message;switch(n.type){case"PUT_VALUE":case 0:i.type=0;break;case"GET_VALUE":case 1:i.type=1;break;case"ADD_PROVIDER":case 2:i.type=2;break;case"GET_PROVIDERS":case 3:i.type=3;break;case"FIND_NODE":case 4:i.type=4;break;case"PING":case 5:i.type=5;break}if(n.clusterLevelRaw!=null&&(i.clusterLevelRaw=n.clusterLevelRaw|0),n.key!=null&&(typeof n.key=="string"?ne.base64.decode(n.key,i.key=ne.newBuffer(ne.base64.length(n.key)),0):n.key.length&&(i.key=n.key)),n.record!=null&&(typeof n.record=="string"?ne.base64.decode(n.record,i.record=ne.newBuffer(ne.base64.length(n.record)),0):n.record.length&&(i.record=n.record)),n.closerPeers){if(!Array.isArray(n.closerPeers))throw TypeError(".Message.closerPeers: array expected");i.closerPeers=[];for(var a=0;a<n.closerPeers.length;++a){if(typeof n.closerPeers[a]!="object")throw TypeError(".Message.closerPeers: object expected");i.closerPeers[a]=Je.Message.Peer.fromObject(n.closerPeers[a])}}if(n.providerPeers){if(!Array.isArray(n.providerPeers))throw TypeError(".Message.providerPeers: array expected");i.providerPeers=[];for(var a=0;a<n.providerPeers.length;++a){if(typeof n.providerPeers[a]!="object")throw TypeError(".Message.providerPeers: object expected");i.providerPeers[a]=Je.Message.Peer.fromObject(n.providerPeers[a])}}return i},t.toObject=function(n,i){i||(i={});var a={};if((i.arrays||i.defaults)&&(a.closerPeers=[],a.providerPeers=[]),n.type!=null&&n.hasOwnProperty("type")&&(a.type=i.enums===String?Je.Message.MessageType[n.type]:n.type,i.oneofs&&(a._type="type")),n.key!=null&&n.hasOwnProperty("key")&&(a.key=i.bytes===String?ne.base64.encode(n.key,0,n.key.length):i.bytes===Array?Array.prototype.slice.call(n.key):n.key,i.oneofs&&(a._key="key")),n.record!=null&&n.hasOwnProperty("record")&&(a.record=i.bytes===String?ne.base64.encode(n.record,0,n.record.length):i.bytes===Array?Array.prototype.slice.call(n.record):n.record,i.oneofs&&(a._record="record")),n.closerPeers&&n.closerPeers.length){a.closerPeers=[];for(var s=0;s<n.closerPeers.length;++s)a.closerPeers[s]=Je.Message.Peer.toObject(n.closerPeers[s],i)}if(n.providerPeers&&n.providerPeers.length){a.providerPeers=[];for(var s=0;s<n.providerPeers.length;++s)a.providerPeers[s]=Je.Message.Peer.toObject(n.providerPeers[s],i)}return n.clusterLevelRaw!=null&&n.hasOwnProperty("clusterLevelRaw")&&(a.clusterLevelRaw=n.clusterLevelRaw,i.oneofs&&(a._clusterLevelRaw="clusterLevelRaw")),a},t.prototype.toJSON=function(){return this.constructor.toObject(this,ri.util.toJSONOptions)},t.MessageType=function(){var r={},n=Object.create(r);return n[r[0]="PUT_VALUE"]=0,n[r[1]="GET_VALUE"]=1,n[r[2]="ADD_PROVIDER"]=2,n[r[3]="GET_PROVIDERS"]=3,n[r[4]="FIND_NODE"]=4,n[r[5]="PING"]=5,n}(),t.ConnectionType=function(){var r={},n=Object.create(r);return n[r[0]="NOT_CONNECTED"]=0,n[r[1]="CONNECTED"]=1,n[r[2]="CAN_CONNECT"]=2,n[r[3]="CANNOT_CONNECT"]=3,n}(),t.Peer=function(){function r(i){if(this.addrs=[],i)for(var a=Object.keys(i),s=0;s<a.length;++s)i[a[s]]!=null&&(this[a[s]]=i[a[s]])}r.prototype.id=null,r.prototype.addrs=ne.emptyArray,r.prototype.connection=null;var n;return Object.defineProperty(r.prototype,"_id",{get:ne.oneOfGetter(n=["id"]),set:ne.oneOfSetter(n)}),Object.defineProperty(r.prototype,"_connection",{get:ne.oneOfGetter(n=["connection"]),set:ne.oneOfSetter(n)}),r.encode=function(a,s){if(s||(s=Lc.create()),a.id!=null&&Object.hasOwnProperty.call(a,"id")&&s.uint32(10).bytes(a.id),a.addrs!=null&&a.addrs.length)for(var o=0;o<a.addrs.length;++o)s.uint32(18).bytes(a.addrs[o]);return a.connection!=null&&Object.hasOwnProperty.call(a,"connection")&&s.uint32(24).int32(a.connection),s},r.decode=function(a,s){a instanceof Ta||(a=Ta.create(a));for(var o=s===void 0?a.len:a.pos+s,f=new Je.Message.Peer;a.pos<o;){var u=a.uint32();switch(u>>>3){case 1:f.id=a.bytes();break;case 2:f.addrs&&f.addrs.length||(f.addrs=[]),f.addrs.push(a.bytes());break;case 3:f.connection=a.int32();break;default:a.skipType(u&7);break}}return f},r.fromObject=function(a){if(a instanceof Je.Message.Peer)return a;var s=new Je.Message.Peer;if(a.id!=null&&(typeof a.id=="string"?ne.base64.decode(a.id,s.id=ne.newBuffer(ne.base64.length(a.id)),0):a.id.length&&(s.id=a.id)),a.addrs){if(!Array.isArray(a.addrs))throw TypeError(".Message.Peer.addrs: array expected");s.addrs=[];for(var o=0;o<a.addrs.length;++o)typeof a.addrs[o]=="string"?ne.base64.decode(a.addrs[o],s.addrs[o]=ne.newBuffer(ne.base64.length(a.addrs[o])),0):a.addrs[o].length&&(s.addrs[o]=a.addrs[o])}switch(a.connection){case"NOT_CONNECTED":case 0:s.connection=0;break;case"CONNECTED":case 1:s.connection=1;break;case"CAN_CONNECT":case 2:s.connection=2;break;case"CANNOT_CONNECT":case 3:s.connection=3;break}return s},r.toObject=function(a,s){s||(s={});var o={};if((s.arrays||s.defaults)&&(o.addrs=[]),a.id!=null&&a.hasOwnProperty("id")&&(o.id=s.bytes===String?ne.base64.encode(a.id,0,a.id.length):s.bytes===Array?Array.prototype.slice.call(a.id):a.id,s.oneofs&&(o._id="id")),a.addrs&&a.addrs.length){o.addrs=[];for(var f=0;f<a.addrs.length;++f)o.addrs[f]=s.bytes===String?ne.base64.encode(a.addrs[f],0,a.addrs[f].length):s.bytes===Array?Array.prototype.slice.call(a.addrs[f]):a.addrs[f]}return a.connection!=null&&a.hasOwnProperty("connection")&&(o.connection=s.enums===String?Je.Message.ConnectionType[a.connection]:a.connection,s.oneofs&&(o._connection="connection")),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,ri.util.toJSONOptions)},r}(),t}();Qg.exports=Je});var dn=T((cP,t3)=>{"use strict";var v_=Sa(),{Multiaddr:g_}=Wg(),{Record:m_}=zi(),wf=Jg(),x_=wf.Message.MessageType,Zg=wf.Message.ConnectionType,Pa=class{constructor(e,r,n){if(r&&!(r instanceof Uint8Array))throw new Error("Key must be a Uint8Array");this.type=e,this.key=r,this._clusterLevelRaw=n,this.closerPeers=[],this.providerPeers=[],this.record=void 0}get clusterLevel(){let e=this._clusterLevelRaw-1;return e<0?0:e}set clusterLevel(e){this._clusterLevelRaw=e}serialize(){let e={key:this.key,type:this.type,clusterLevelRaw:this._clusterLevelRaw,closerPeers:this.closerPeers.map(Xg),providerPeers:this.providerPeers.map(Xg),record:void 0};return this.record&&(this.record instanceof Uint8Array?e.record=this.record:e.record=this.record.serialize()),wf.Message.encode(e).finish()}static deserialize(e){let r=wf.Message.decode(e),n=new Pa(r.type||0,r.key||Uint8Array.from([]),r.clusterLevelRaw||0);return n.closerPeers=r.closerPeers.map(e3),n.providerPeers=r.providerPeers.map(e3),r.record&&r.record.length&&(n.record=m_.deserialize(r.record)),n}};Pa.TYPES=x_;Pa.CONNECTION_TYPES=Zg;function Xg(t){return{id:t.id.id,addrs:(t.multiaddrs||[]).map(r=>r.bytes),connection:Zg.CONNECTED}}function e3(t){return{id:new v_(t.id),multiaddrs:(t.addrs||[]).map(e=>new g_(e))}}t3.exports=Pa});var i3=T((hP,n3)=>{"use strict";var{Record:w_}=zi(),E_=ke(),r3=dn(),Dc=rt();n3.exports=t=>{let e=Dc.logger(t.peerId,"rpc:get-value");async function r(n,i){let a=i.key;if(e("key: %b",a),!a||a.length===0)throw E_(new Error("Invalid key"),"ERR_INVALID_KEY");let s=new r3(r3.TYPES.GET_VALUE,a,i.clusterLevel);if(Dc.isPublicKeyKey(a)){e("is public key");let u=Dc.fromPublicKeyKey(a),c;if(t._isSelf(u))c=t.peerId;else{let l=t.peerStore.get(u);c=l&&l.id}if(c&&c.pubKey)return e("returning found public key"),s.record=new w_(a,c.pubKey.bytes),s}let[o,f]=await Promise.all([t._checkLocalDatastore(a),t._betterPeersToQuery(i,n)]);return o&&(e("got record"),s.record=o),f.length>0&&(e("got closer %s",f.length),s.closerPeers=f),s}return r}});var o3=T((lP,s3)=>{"use strict";var a3=rt(),S_=ke();s3.exports=t=>{let e=a3.logger(t.peerId,"rpc:put-value");async function r(n,i){let a=i.key;e("key: %b",a);let s=i.record;if(!s){let f=`Empty record from: ${n.toB58String()}`;throw e.error(f),S_(new Error(f),"ERR_EMPTY_RECORD")}await t._verifyRecordLocally(s),s.timeReceived=new Date;let o=a3.bufferToKey(s.key);return await t.datastore.put(o,s.serialize()),t.onPut(s,n),i}return r}});var u3=T((dP,f3)=>{"use strict";var{equals:__}=(ur(),fr),A_=dn(),B_=rt();f3.exports=t=>{let e=B_.logger(t.peerId,"rpc:find-node");async function r(n,i){e("start");let a;__(i.key,t.peerId.id)?a=[{id:t.peerId,multiaddrs:t.libp2p.multiaddrs}]:a=await t._betterPeersToQuery(i,n);let s=new A_(i.type,new Uint8Array(0),i.clusterLevel);return a.length>0?s.closerPeers=a:e("handle FindNode %s: could not find anything",n.toB58String()),s}return r}});var l3=T((pP,h3)=>{"use strict";var{CID:I_}=(ai(),Ui),c3=ke(),C_=rt();h3.exports=t=>{let e=C_.logger(t.peerId,"rpc:add-provider");async function r(n,i){if(e("start"),!i.key||i.key.length===0)throw c3(new Error("Missing key"),"ERR_MISSING_KEY");let a;try{a=I_.decode(i.key)}catch(s){let o=`Invalid CID: ${s.message}`;throw c3(new Error(o),"ERR_INVALID_CID")}return i.providerPeers.forEach(s=>{if(!s.id.isEqual(n)){e("invalid provider peer %s from %s",s.id.toB58String(),n.toB58String());return}if(s.multiaddrs.length<1){e("no valid addresses for provider %s. Ignore",n.toB58String());return}if(e("received provider %s for %s (addrs %s)",n.toB58String(),a.toString(),s.multiaddrs.map(o=>o.toString())),!t._isSelf(s.id))return t.peerStore.addressBook.add(s.id,s.multiaddrs),t.providers.addProvider(a,s.id)}),t.providers.addProvider(a,n)}return r}});var y3=T((yP,p3)=>{"use strict";var{CID:T_}=(ai(),Ui),P_=ke(),M_=dn(),d3=rt();p3.exports=t=>{let e=d3.logger(t.peerId,"rpc:get-providers");async function r(n,i){let a;try{a=T_.decode(i.key)}catch(x){throw P_(new Error(`Invalid CID: ${x.message}`),"ERR_INVALID_CID")}e("%s",a.toString());let s=d3.bufferToKey(a.bytes),[o,f,u]=await Promise.all([t.datastore.has(s),t.providers.getProviders(a),t._betterPeersToQuery(i,n)]),c=f.map(x=>({id:x,multiaddrs:[]})),l=u.map(x=>({id:x.id,multiaddrs:[]}));o&&c.push({id:t.peerId,multiaddrs:[]});let y=new M_(i.type,i.key,i.clusterLevel);return c.length>0&&(y.providerPeers=c),l.length>0&&(y.closerPeers=l),e("got %s providers %s closerPeers",c.length,l.length),y}return r}});var v3=T((bP,b3)=>{"use strict";var R_=rt();b3.exports=t=>{let e=R_.logger(t.peerId,"rpc:ping");function r(n,i){return e("from %s",n.toB58String()),i}return r}});var m3=T((vP,g3)=>{"use strict";var Ma=dn().TYPES;g3.exports=t=>{let e={[Ma.GET_VALUE]:i3()(t),[Ma.PUT_VALUE]:o3()(t),[Ma.FIND_NODE]:u3()(t),[Ma.ADD_PROVIDER]:l3()(t),[Ma.GET_PROVIDERS]:y3()(t),[Ma.PING]:v3()(t)};function r(n){return e[n]}return r}});var E3=T((gP,w3)=>{"use strict";var{pipe:q_}=bc(),x3=Ac(),k_=dn(),N_=m3(),L_=rt();w3.exports=t=>{let e=L_.logger(t.peerId,"rpc"),r=N_(t);async function n(a,s){let o=r(s.type);try{await t._add(a)}catch(f){e.error("Failed to update the kbucket store",f)}if(!o){e.error(`no handler found for message type: ${s.type}`);return}return o(a,s)}async function i({stream:a,connection:s}){let o=s.remotePeer;try{await t._add(o)}catch(u){e.error(u)}let f=o.toB58String();e("from: %s",f),await q_(a.source,x3.decode(),u=>async function*(){for await(let c of u){let l=k_.deserialize(c.slice()),y=await n(o,l);y&&(yield y.serialize())}}(),x3.encode(),a.sink)}return i}});var B3=T((mP,A3)=>{"use strict";var Ef=ke(),{pipe:S3}=bc(),Oc=Ac(),D_=_a(),{consume:O_}=rg(),K_=ig(),F_=dg(),U_=E3(),z_=Xn(),V_=dn(),H_=rt(),_3=class{constructor(e){this.dht=e,this.readMessageTimeout=z_.READ_MESSAGE_TIMEOUT,this._log=H_.logger(this.dht.peerId,"net"),this._rpc=U_(this.dht),this._onPeerConnected=this._onPeerConnected.bind(this),this._running=!1}start(){if(this._running)return;if(!this.dht.isStarted)throw Ef(new Error("Can not start network"),"ERR_CANNOT_START_NETWORK");this._running=!0,this.dht._clientMode===!1&&this.dht.registrar.handle(this.dht.protocol,this._rpc);let e=new F_({multicodecs:[this.dht.protocol],handlers:{onConnect:this._onPeerConnected,onDisconnect:()=>{}}});this._registrarId=this.dht.registrar.register(e)}stop(){!this.dht.isStarted&&!this.isStarted||(this._running=!1,this._registrarId&&this.dht.registrar.unregister(this._registrarId))}get isStarted(){return this._running}get isConnected(){return this.dht.isStarted&&this.isStarted}async _onPeerConnected(e){await this.dht._add(e),this._log("added to the routing table: %s",e.toB58String())}async sendRequest(e,r){if(!this.isConnected)throw Ef(new Error("Network is offline"),"ERR_NETWORK_OFFLINE");let n=e.toB58String();this._log("sending to: %s",n);let i=this.dht.registrar.connectionManager.get(e);i||(i=await this.dht.dialer.connectToPeer(e));let{stream:a}=await i.newStream(this.dht.protocol);return this._writeReadMessage(a,r.serialize())}async sendMessage(e,r){if(!this.isConnected)throw Ef(new Error("Network is offline"),"ERR_NETWORK_OFFLINE");let n=e.toB58String();this._log("sending to: %s",n);let i=this.dht.registrar.connectionManager.get(e);i||(i=await this.dht.dialer.connectToPeer(e));let{stream:a}=await i.newStream(this.dht.protocol);return this._writeMessage(a,r.serialize())}async _writeReadMessage(e,r){return D_(j_(e,r),this.readMessageTimeout)}_writeMessage(e,r){return S3([r],Oc.encode(),e,O_)}};async function j_(t,e){let r=await S3([e],Oc.encode(),t,Oc.decode(),async n=>{let i=await K_(n);if(i)return i.slice()});if(r.length===0)throw Ef(new Error("No message received"),"ERR_NO_MESSAGE_RECEIVED");return V_.deserialize(r)}A3.exports=_3});var P3=T((xP,T3)=>{"use strict";var Sf=fo(),I3=rt(),G_=uo(),{equals:$_}=(ur(),fr),C3=class{constructor(e,r){this.originDhtKey=e,this.capacity=r,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return this.peerDistances.map(e=>e.peerId)}async add(e){if(this.peerDistances.find(i=>$_(i.peerId.id,e.id)))return;let r=await I3.convertPeerId(e),n={peerId:e,distance:Sf(this.originDhtKey,r)};this.peerDistances.push(n),this.peerDistances.sort((i,a)=>Sf.compare(i.distance,a.distance)),this.peerDistances=this.peerDistances.slice(0,this.capacity)}async anyCloser(e){if(!e.length)return!1;if(!this.length)return!0;let r=await G_(e,i=>I3.convertPeerId(i)),n=this.peerDistances[this.peerDistances.length-1].distance;for(let i of r){let a=Sf(this.originDhtKey,i);if(Sf.compare(a,n)<0)return!0}return!1}};T3.exports=C3});var R3=T((Kc,M3)=>{(function(){var t,e,r,n,i,a,s,o,f,u,c,l,y,x,v;r=Math.floor,u=Math.min,e=function(b,_){return b<_?-1:b>_?1:0},f=function(b,_,A,M,q){var z;if(A==null&&(A=0),q==null&&(q=e),A<0)throw new Error("lo must be non-negative");for(M==null&&(M=b.length);A<M;)z=r((A+M)/2),q(_,b[z])<0?M=z:A=z+1;return[].splice.apply(b,[A,A-A].concat(_)),_},a=function(b,_,A){return A==null&&(A=e),b.push(_),x(b,0,b.length-1,A)},i=function(b,_){var A,M;return _==null&&(_=e),A=b.pop(),b.length?(M=b[0],b[0]=A,v(b,0,_)):M=A,M},o=function(b,_,A){var M;return A==null&&(A=e),M=b[0],b[0]=_,v(b,0,A),M},s=function(b,_,A){var M;return A==null&&(A=e),b.length&&A(b[0],_)<0&&(M=[b[0],_],_=M[0],b[0]=M[1],v(b,0,A)),_},n=function(b,_){var A,M,q,z,O,U,$,H;for(_==null&&(_=e),U=function(){H=[];for(var X=0,B=r(b.length/2);0<=B?X<B:X>B;0<=B?X++:X--)H.push(X);return H}.apply(this).reverse(),$=[],M=0,z=U.length;M<z;M++)A=U[M],$.push(v(b,A,_));return $},y=function(b,_,A){var M;if(A==null&&(A=e),M=b.indexOf(_),M!==-1)return x(b,0,M,A),v(b,M,A)},c=function(b,_,A){var M,q,z,O,U;if(A==null&&(A=e),q=b.slice(0,_),!q.length)return q;for(n(q,A),U=b.slice(_),z=0,O=U.length;z<O;z++)M=U[z],s(q,M,A);return q.sort(A).reverse()},l=function(b,_,A){var M,q,z,O,U,$,H,X,B,h;if(A==null&&(A=e),_*10<=b.length){if(O=b.slice(0,_).sort(A),!O.length)return O;for(z=O[O.length-1],X=b.slice(_),U=0,H=X.length;U<H;U++)M=X[U],A(M,z)<0&&(f(O,M,0,null,A),O.pop(),z=O[O.length-1]);return O}for(n(b,A),h=[],q=$=0,B=u(_,b.length);0<=B?$<B:$>B;q=0<=B?++$:--$)h.push(i(b,A));return h},x=function(b,_,A,M){var q,z,O;for(M==null&&(M=e),q=b[A];A>_;){if(O=A-1>>1,z=b[O],M(q,z)<0){b[A]=z,A=O;continue}break}return b[A]=q},v=function(b,_,A){var M,q,z,O,U;for(A==null&&(A=e),q=b.length,U=_,z=b[_],M=2*_+1;M<q;)O=M+1,O<q&&!(A(b[M],b[O])<0)&&(M=O),b[_]=b[M],_=M,M=2*_+1;return b[_]=z,x(b,U,_,A)},t=function(){b.push=a,b.pop=i,b.replace=o,b.pushpop=s,b.heapify=n,b.updateItem=y,b.nlargest=c,b.nsmallest=l;function b(_){this.cmp=_??e,this.nodes=[]}return b.prototype.push=function(_){return a(this.nodes,_,this.cmp)},b.prototype.pop=function(){return i(this.nodes,this.cmp)},b.prototype.peek=function(){return this.nodes[0]},b.prototype.contains=function(_){return this.nodes.indexOf(_)!==-1},b.prototype.replace=function(_){return o(this.nodes,_,this.cmp)},b.prototype.pushpop=function(_){return s(this.nodes,_,this.cmp)},b.prototype.heapify=function(){return n(this.nodes,this.cmp)},b.prototype.updateItem=function(_){return y(this.nodes,_,this.cmp)},b.prototype.clear=function(){return this.nodes=[]},b.prototype.empty=function(){return this.nodes.length===0},b.prototype.size=function(){return this.nodes.length},b.prototype.clone=function(){var _;return _=new b,_.nodes=this.nodes.slice(0),_},b.prototype.toArray=function(){return this.nodes.slice(0)},b.prototype.insert=b.prototype.push,b.prototype.top=b.prototype.peek,b.prototype.front=b.prototype.peek,b.prototype.has=b.prototype.contains,b.prototype.copy=b.prototype.clone,b}(),function(b,_){return typeof define=="function"&&define.amd?define([],_):typeof Kc=="object"?M3.exports=_():b.Heap=_()}(this,function(){return t})}).call(Kc)});var k3=T((wP,q3)=>{q3.exports=R3()});var L3=T((EP,N3)=>{"use strict";var Y_=k3(),W_=fo(),Q_=W0(),_f=rt(),Fc=Q_("libp2p:dht:peer-queue"),Bs=class{static async fromPeerId(e){let r=await _f.convertPeerId(e);return new Bs(r)}static async fromKey(e){let r=await _f.convertBuffer(e);return new Bs(r)}constructor(e){Fc("create: %b",e),this.from=e,this.heap=new Y_(_f.xorCompare)}async enqueue(e){Fc("enqueue %s",e.toB58String());let r=await _f.convertPeerId(e),n={id:e,distance:W_(this.from,r)};this.heap.push(n)}dequeue(){let e=this.heap.pop();return Fc("dequeue %s",e.id.toB58String()),e.id}get length(){return this.heap.size()}};N3.exports=Bs});var K3=T((SP,O3)=>{"use strict";var J_=L3(),Z_=rt(),X_=3e4,D3=class{constructor(e,r){if(this.run=e,this.queryFunc=Z_.withTimeout(r,X_),!this.queryFunc)throw new Error("Path requires a `queryFn` to be specified");if(typeof this.queryFunc!="function")throw new Error("Path expected `queryFn` to be a function. Got "+typeof this.queryFunc);this.initialPeers=[],this.peersToQuery=null,this.res=null}addInitialPeer(e){this.initialPeers.push(e)}async execute(){let e=await J_.fromKey(this.run.query.key);this.peersToQuery=e,await Promise.all(this.initialPeers.map(r=>this.addPeerToQuery(r))),await this.run.workerQueue(this)}async addPeerToQuery(e){this.run.query.dht._isSelf(e)||this.run.peersSeen.has(e.toB58String())||this.peersToQuery&&await this.peersToQuery.enqueue(e)}};O3.exports=D3});var U3=T((_P,Uc)=>{"use strict";var eA=Object.prototype.hasOwnProperty,Wt="~";function Is(){}Object.create&&(Is.prototype=Object.create(null),new Is().__proto__||(Wt=!1));function tA(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function F3(t,e,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var a=new tA(r,n||t,i),s=Wt?Wt+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],a]:t._events[s].push(a):(t._events[s]=a,t._eventsCount++),t}function Af(t,e){--t._eventsCount==0?t._events=new Is:delete t._events[e]}function Ht(){this._events=new Is,this._eventsCount=0}Ht.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)eA.call(r,n)&&e.push(Wt?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};Ht.prototype.listeners=function(e){var r=Wt?Wt+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,s=new Array(a);i<a;i++)s[i]=n[i].fn;return s};Ht.prototype.listenerCount=function(e){var r=Wt?Wt+e:e,n=this._events[r];return n?n.fn?1:n.length:0};Ht.prototype.emit=function(e,r,n,i,a,s){var o=Wt?Wt+e:e;if(!this._events[o])return!1;var f=this._events[o],u=arguments.length,c,l;if(f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),u){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,r),!0;case 3:return f.fn.call(f.context,r,n),!0;case 4:return f.fn.call(f.context,r,n,i),!0;case 5:return f.fn.call(f.context,r,n,i,a),!0;case 6:return f.fn.call(f.context,r,n,i,a,s),!0}for(l=1,c=new Array(u-1);l<u;l++)c[l-1]=arguments[l];f.fn.apply(f.context,c)}else{var y=f.length,x;for(l=0;l<y;l++)switch(f[l].once&&this.removeListener(e,f[l].fn,void 0,!0),u){case 1:f[l].fn.call(f[l].context);break;case 2:f[l].fn.call(f[l].context,r);break;case 3:f[l].fn.call(f[l].context,r,n);break;case 4:f[l].fn.call(f[l].context,r,n,i);break;default:if(!c)for(x=1,c=new Array(u-1);x<u;x++)c[x-1]=arguments[x];f[l].fn.apply(f[l].context,c)}}return!0};Ht.prototype.on=function(e,r,n){return F3(this,e,r,n,!1)};Ht.prototype.once=function(e,r,n){return F3(this,e,r,n,!0)};Ht.prototype.removeListener=function(e,r,n,i){var a=Wt?Wt+e:e;if(!this._events[a])return this;if(!r)return Af(this,a),this;var s=this._events[a];if(s.fn)s.fn===r&&(!i||s.once)&&(!n||s.context===n)&&Af(this,a);else{for(var o=0,f=[],u=s.length;o<u;o++)(s[o].fn!==r||i&&!s[o].once||n&&s[o].context!==n)&&f.push(s[o]);f.length?this._events[a]=f.length===1?f[0]:f:Af(this,a)}return this};Ht.prototype.removeAllListeners=function(e){var r;return e?(r=Wt?Wt+e:e,this._events[r]&&Af(this,r)):(this._events=new Is,this._eventsCount=0),this};Ht.prototype.off=Ht.prototype.removeListener;Ht.prototype.addListener=Ht.prototype.on;Ht.prefixed=Wt;Ht.EventEmitter=Ht;typeof Uc!="undefined"&&(Uc.exports=Ht)});var V3=T((AP,z3)=>{"use strict";z3.exports=(t,e)=>(e=e||(()=>{}),t.then(r=>new Promise(n=>{n(e())}).then(()=>r),r=>new Promise(n=>{n(e())}).then(()=>{throw r})))});var j3=T((BP,Bf)=>{"use strict";var rA=V3(),zc=class extends Error{constructor(e){super(e);this.name="TimeoutError"}},H3=(t,e,r)=>new Promise((n,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){n(t);return}let a=setTimeout(()=>{if(typeof r=="function"){try{n(r())}catch(f){i(f)}return}let s=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,o=r instanceof Error?r:new zc(s);typeof t.cancel=="function"&&t.cancel(),i(o)},e);rA(t.then(n,i),()=>{clearTimeout(a)})});Bf.exports=H3;Bf.exports.default=H3;Bf.exports.TimeoutError=zc});var G3=T(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});function nA(t,e,r){let n=0,i=t.length;for(;i>0;){let a=i/2|0,s=n+a;r(t[s],e)<=0?(n=++s,i-=a+1):i=a}return n}Vc.default=nA});var Y3=T(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});var iA=G3(),$3=class{constructor(){this._queue=[]}enqueue(e,r){r=Object.assign({priority:0},r);let n={priority:r.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(n);return}let i=iA.default(this._queue,n,(a,s)=>s.priority-a.priority);this._queue.splice(i,0,n)}dequeue(){let e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this._queue.length}};Hc.default=$3});var Gc=T(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});var aA=U3(),W3=j3(),sA=Y3(),If=()=>{},oA=new W3.TimeoutError,Q3=class extends aA{constructor(e){var r,n,i,a;super();if(this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=If,this._resolveIdle=If,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:sA.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(a=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=If,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=If,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(this._intervalId===void 0){let r=this._intervalEnd-e;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let r=this._queue.dequeue();return r?(this.emit("active"),r(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,r={}){return new Promise((n,i)=>{let a=async()=>{this._pendingCount++,this._intervalCount++;try{let s=this._timeout===void 0&&r.timeout===void 0?e():W3.default(Promise.resolve(e()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&i(oA)});n(await s)}catch(s){i(s)}this._next()};this._queue.enqueue(a,r),this._tryToStartAnother(),this.emit("add")})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{let r=this._resolveEmpty;this._resolveEmpty=()=>{r(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{let r=this._resolveIdle;this._resolveIdle=()=>{r(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}};jc.default=Q3});var X3=T((PP,Z3)=>{"use strict";var{default:fA}=Gc(),J3=class{constructor(e,r,n,i){this.dht=e,this.run=r,this.path=n,this.log=i,this.concurrency=this.dht.concurrency,this.queue=this.setupQueue(),this.execution=null,this.queuedPeerIds=new Set}setupQueue(){let e=new fA({concurrency:this.concurrency});return e.on("idle",()=>{this.path.peersToQuery&&!this.path.peersToQuery.length&&(this.log("queue:drain"),this.stop())}),e.on("next",()=>{!this.running||e.pending<this.concurrency&&this.fill()}),e}stop(e){!this.running||(this.running=!1,this.queue.clear(),this.log("worker:stop, %d workers still running",this.run.workers.filter(r=>r.running).length),this.execution&&(e?this.execution.reject(e):this.execution.resolve()))}async execute(){this.running=!0,this.execution=null;let e=new Promise((r,n)=>{this.execution={resolve:r,reject:n}});this.fill(),await e}fill(){if(!!this.path.peersToQuery)for(;this.queue.pending+this.queue.size<this.concurrency&&this.path.peersToQuery.length>0;){let e=this.path.peersToQuery.dequeue();this.queuedPeerIds.add(e),this.queue.add(()=>this.processNext(e).catch(r=>{this.log.error("queue",r),this.stop(r)}).finally(()=>{this.queuedPeerIds.delete(e)}))}}async processNext(e){if(!this.running||this.run.peersSeen.has(e.toB58String()))return;let r,n;try{r=await this.run.continueQuerying(this)}catch(s){n=s}if(!this.running)return;if(n)throw n;if(!r){this.stop();return}if(this.run.peersSeen.has(e.toB58String()))return;this.run.peersSeen.add(e.toB58String()),this.log("queue:work");let i,a;try{i=await this.execQuery(e)}catch(s){a=s}if(!!this.running){if(this.log("queue:work:done",a,i),a)throw a;if(i&&i.queryComplete){this.log("query:complete"),this.run.stop();return}i&&i.pathComplete&&this.stop()}}async execQuery(e){let r,n;try{r=await this.path.queryFunc(e)}catch(i){n=i}if(!!this.running){if(n){this.run.errors.push(n);return}if(this.run.peersQueried&&await this.run.peersQueried.add(e),!!r){if(r.pathComplete||r.queryComplete)return this.path.res=r,{pathComplete:r.pathComplete,queryComplete:r.queryComplete};if(r.closerPeers&&r.closerPeers.length>0){let i=async a=>{this.dht._isSelf(a.id)||(this.dht._peerDiscovered(a.id,a.multiaddrs),await this.path.addPeerToQuery(a.id))};await Promise.all(r.closerPeers.map(i))}}}}};Z3.exports=J3});var r4=T((MP,t4)=>{"use strict";var uA=P3(),cA=Ds(),hA=K3(),lA=X3(),dA=rt(),e4=class extends cA{constructor(e){super();this.query=e,this.running=!1,this.workers=[],this.peersSeen=new Set,this.errors=[],this.peersQueried=null}stop(){if(!!this.running){this.running=!1;for(let e of this.workers)e.stop()}}async execute(e){let r=[],n=Math.min(this.query.dht.disjointPaths,e.length);for(let a=0;a<n;a++)r.push(new hA(this,this.query.makePath(a,n)));e.forEach((a,s)=>{r[s%n].addInitialPeer(a)}),await this.executePaths(r);let i={finalSet:new Set(this.peersQueried&&this.peersQueried.peers),paths:[]};for(let a of r)a.res&&(a.res.pathComplete||a.res.queryComplete)&&(a.res.success=!0,i.paths.push(a.res));return i}async executePaths(e){this.running=!0,this.emit("start");try{await Promise.all(e.map(r=>r.execute()))}finally{this.stop(),this.emit("complete")}if(this.errors.length===this.peersSeen.size)throw this.errors[0]}async workerQueue(e){await this.init(),await this.startWorker(e)}async startWorker(e){let r=new lA(this.query.dht,this,e,this.query._log);this.workers.push(r),await r.execute()}async init(){if(!this.peersQueried){if(this.peersQueriedPromise){await this.peersQueriedPromise;return}this.peersQueriedPromise=(async()=>{let e=await dA.convertBuffer(this.query.key);this.peersQueried=new uA(e,this.query.dht.kBucketSize)})(),await this.peersQueriedPromise,delete this.peersQueriedPromise}}async continueQuerying(e){if(this.peersQueried&&this.peersQueried.length<this.peersQueried.capacity)return!0;let r=Array.from(e.queuedPeerIds);return!!(this.peersQueried&&await this.peersQueried.anyCloser(r))}};t4.exports=e4});var Cf=T((RP,i4)=>{"use strict";var{base58btc:pA}=(zr(),Ur),yA=rt(),bA=r4(),n4=class{constructor(e,r,n){this.dht=e,this.key=r,this.makePath=n,this._log=yA.logger(this.dht.peerId,"query:"+pA.baseEncode(r)),this.running=!1,this._onStart=this._onStart.bind(this),this._onComplete=this._onComplete.bind(this)}async run(e){return this.dht._queryManager.running?e.length===0?(this._log.error("Running query with no peers"),{finalSet:new Set,paths:[]}):(this._run=new bA(this),this._log(`query running with K=${this.dht.kBucketSize}, A=${this.dht.concurrency}, D=${Math.min(this.dht.disjointPaths,e.length)}`),this._run.once("start",this._onStart),this._run.once("complete",this._onComplete),this._run.execute(e)):(this._log.error("Attempt to run query after shutdown"),{finalSet:new Set,paths:[]})}_onStart(){this.running=!0,this._startTime=Date.now(),this._log("query:start"),this.dht._queryManager.queryStarted(this)}_onComplete(){this.stop()}stop(){this._log(`query:done in ${Date.now()-(this._startTime||0)}ms`),this._run&&this._log(`${this._run.errors.length} of ${this._run.peersSeen.size} peers errored (${this._run.errors.length/this._run.peersSeen.size*100}% fail rate)`),!!this.running&&(this.running=!1,this._run&&(this._run.removeListener("start",this._onStart),this._run.removeListener("complete",this._onComplete),this._run.stop()),this.dht._queryManager.queryCompleted(this))}};i4.exports=n4});var f4=T((qP,o4)=>{"use strict";var $c=ke(),vA=_a(),{equals:gA}=(ur(),fr),{toString:a4}=(et(),Xe),s4=zi(),Yc=Xn(),mA=Cf(),Ti=rt(),xA=s4.Record;o4.exports=t=>{let e=async(i,a)=>t.datastore.put(Ti.bufferToKey(i),a),r=async i=>{t._log(`getLocal ${a4(i,"base32")}`);let a=await t.datastore.get(Ti.bufferToKey(i));t._log(`found ${a4(i,"base32")} in local datastore`);let s=xA.deserialize(a);return await t._verifyRecordLocally(s),s},n=async(i,a,s)=>{let o=await Ti.createPutRecord(i,s);return Promise.all(a.map(async f=>{if(!gA(f.val,s)){if(t._isSelf(f.from)){try{await t._putLocal(i,o)}catch(u){t._log.error("Failed error correcting self",u)}return}try{await t._putValueToPeer(i,o,f.from)}catch(u){t._log.error("Failed error correcting entry",u)}}}))};return{async _putLocal(i,a){return e(i,a)},async put(i,a,s={}){t._log("PutValue %b",i);let o=await Ti.createPutRecord(i,a);await e(i,o);let f=0,u=0;await Ti.mapParallel(t.getClosestPeers(i,{shallow:!0}),async l=>{try{f+=1,await t._putValueToPeer(i,o,l),u+=1}catch(y){t._log.error("Failed to put to peer (%b): %s",l.id,y)}});let c=s.minPeers||f;if(c>u){let l=$c(new Error(`Failed to put value to enough peers: ${u}/${c}`),"ERR_NOT_ENOUGH_PUT_PEERS");throw t._log.error(l),l}},async get(i,a={}){a.timeout=a.timeout||Yc.minute,t._log("_get %b",i);let s=await t.getMany(i,Yc.GET_MANY_RECORD_COUNT,a),o=s.map(c=>c.val),f=0;try{f=s4.selection.bestRecord(t.selectors,i,o)}catch(c){if(c.code!=="ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")throw c}let u=o[f];if(t._log("GetValue %b %s",i,u),!u)throw $c(new Error("best value was not found"),"ERR_NOT_FOUND");return await n(i,s,u),u},async getMany(i,a,s={}){s.timeout=s.timeout||Yc.minute,t._log("getMany %b (%s)",i,a);let o=[],f;try{f=await r(i)}catch(v){if(a===0)throw v}if(f&&o.push({val:f.value,from:t.peerId}),o.length>=a)return o;let u=await Ti.convertBuffer(i),c=t.routingTable.closestPeers(u,t.kBucketSize);if(t._log("peers in rt: %d",c.length),c.length===0){let v="Failed to lookup key! No peers from routing table!";if(t._log.error(v),o.length===0)throw $c(new Error(v),"ERR_NO_PEERS_IN_ROUTING_TABLE");return o}let l=o.length;function y(v,b){let _=Ti.pathSize(a-l,b),A=0;async function M(q){let z,O,U;try{let H=await t._getValueOrPeers(q,i);z=H.record,O=H.peers}catch(H){if(H.code!=="ERR_INVALID_RECORD")throw H;U=H}let $={closerPeers:O};return z&&z.value?(o.push({val:z.value,from:q}),A++):U&&(o.push({err:U,from:q}),A++),A>=_&&($.pathComplete=!0),$}return M}let x=new mA(t,i,y);try{await vA(x.run(c),s.timeout)}catch(v){if(o.length===0)throw v}finally{x.stop()}return o}}}});var h4=T((kP,c4)=>{"use strict";var u4=class{constructor(){this.list=[]}push(e){return this.has(e.id)?!1:(this.list.push(e),!0)}has(e){let r=this.list.find(n=>n.id.equals(e));return Boolean(r)}toArray(){return this.list.slice()}pop(){return this.list.pop()}get length(){return this.list.length}};c4.exports=u4});var p4=T((NP,d4)=>{"use strict";var wA=h4(),l4=class extends wA{constructor(e){super();this.limit=e}push(e){return this.length<this.limit?super.push(e):!1}};d4.exports=l4});var x4=T((LP,m4)=>{"use strict";var EA=ke(),y4=_a(),b4=Xn(),v4=p4(),Tf=dn(),SA=Cf(),g4=rt();m4.exports=t=>{let e=async(r,n)=>{let i=new Tf(Tf.TYPES.GET_PROVIDERS,n.bytes,0);return t.network.sendRequest(r,i)};return{async provide(r){t._log(`provide: ${r}`);let n=[];await t.providers.addProvider(r,t.peerId);let i=t.libp2p?t.libp2p.multiaddrs:[],a=new Tf(Tf.TYPES.ADD_PROVIDER,r.bytes,0);a.providerPeers=[{id:t.peerId,multiaddrs:i}];async function s(o){t._log(`putProvider ${r} to ${o.toB58String()}`);try{await t.network.sendMessage(o,a)}catch(f){n.push(f)}}if(await g4.mapParallel(t.getClosestPeers(r.bytes),s),n.length)throw EA(new Error(`Failed to provide to ${n.length} of ${t.kBucketSize} peers`),"ERR_SOME_PROVIDES_FAILED",{errors:n})},async*findProviders(r,n={timeout:6e4,maxNumProviders:5}){let i=n.timeout||b4.minute,a=n.maxNumProviders||b4.K;t._log(`findProviders ${r}`);let s=new v4(a);if((await t.providers.getProviders(r)).forEach(y=>{let x=t.peerStore.get(y);x?s.push({id:x.id,multiaddrs:x.addresses.map(v=>v.multiaddr)}):s.push({id:y,multiaddrs:[]})}),s.length>=a){for(let y of s.toArray())yield y;return}let f=[];function u(y,x){let v=g4.pathSize(a-s.length,x),b=new v4(v);f.push(b);async function _(A){let M=await e(A,r),q=M.providerPeers;return t._log(`Found ${q.length} provider entries for ${r}`),q.forEach(z=>{b.push({...z})}),b.length>=v?{pathComplete:!0}:{closerPeers:M.closerPeers}}return _}let c=new SA(t,r.bytes,u),l=t.routingTable.closestPeers(r.bytes,t.kBucketSize);try{await y4(c.run(l),i)}catch(y){if(y.name!==y4.TimeoutError.name)throw y}finally{c.stop()}f.forEach(y=>{y.toArray().forEach(x=>{s.push(x)})});for(let y of s.toArray())yield y}}}});var S4=T((DP,E4)=>{"use strict";xo();var Pf=Be(),{toString:Ra}=(et(),Xe),{fromString:w4}=(hr(),cr);E4.exports={createCipheriv:(t,e,r)=>{let n=Pf.cipher.createCipher("AES-CTR",Ra(e,"ascii"));return n.start({iv:Ra(r,"ascii")}),{update:i=>(n.update(Pf.util.createBuffer(Ra(i,"ascii"))),w4(n.output.getBytes(),"ascii"))}},createDecipheriv:(t,e,r)=>{let n=Pf.cipher.createDecipher("AES-CTR",Ra(e,"ascii"));return n.start({iv:Ra(r,"ascii")}),{update:i=>(n.update(Pf.util.createBuffer(Ra(i,"ascii"))),w4(n.output.getBytes(),"ascii"))}}}});var B4=T((OP,A4)=>{"use strict";var _A=ke(),_4={16:"aes-128-ctr",32:"aes-256-ctr"};A4.exports=function(t){let e=_4[t.length];if(!e){let r=Object.entries(_4).map(([n,i])=>`${n} (${i})`).join(" / ");throw _A(new Error(`Invalid key length ${t.length} bytes. Must be ${r}`),"ERR_INVALID_KEY_LENGTH")}return e}});var T4=T(C4=>{"use strict";var I4=S4(),AA=B4();C4.create=async function(t,e){let r=AA(t),n=I4.createCipheriv(r,t,e),i=I4.createDecipheriv(r,t,e);return{async encrypt(s){return n.update(s)},async decrypt(s){return i.update(s)}}}});var R4=T((FP,M4)=>{"use strict";var BA=fu(),IA=We(),CA=ke(),P4={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function TA(t,e,r,n,i){let a=P4[i];if(!a){let o=Object.keys(P4).join(" / ");throw CA(new Error(`Hash '${i}' is unknown or not supported. Must be ${o}`),"ERR_UNSUPPORTED_HASH_TYPE")}let s=BA(t,e,r,n,a);return IA.encode64(s)}M4.exports=TA});var Wc=T(qa=>{"use strict";var PA=ic(),MA=T4(),RA=oc();qa.aes=MA;qa.hmac=PA;qa.keys=RA;qa.randomBytes=ko();qa.pbkdf2=R4()});var N4=T((zP,k4)=>{"use strict";var Cs=ke(),qA=_a(),Qc=Sa(),kA=Wc(),{toString:NA}=(et(),Xe),LA=Xn(),Mf=dn(),q4=Cf(),Ts=rt();k4.exports=t=>{let e=async a=>{t._log(`findPeerLocal ${a.toB58String()}`);let s=await t.routingTable.find(a),o=s&&t.peerStore.get(s);if(o)return{id:o.id,multiaddrs:o.addresses.map(f=>f.multiaddr)}},r=async(a,s)=>{let o=new Mf(Mf.TYPES.GET_VALUE,s,0);return t.network.sendRequest(a,o)},n=async(a,s)=>(t._log(`closerPeersSingle ${NA(a,"base32")} from ${s.toB58String()}`),(await t.peerRouting._findPeerSingle(s,new Qc(a))).closerPeers.filter(f=>!t._isSelf(f.id)).map(f=>(t.peerStore.addressBook.add(f.id,f.multiaddrs),f))),i=async a=>{let s=Ts.keyForPublicKey(a),o=await r(a,s);if(!o.record||!o.record.value)throw Cs(new Error(`Node not responding with its public key: ${a.toB58String()}`),"ERR_INVALID_RECORD");let f=await Qc.createFromPubKey(o.record.value);if(!f.equals(a))throw Cs(new Error("public key does not match id"),"ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");return f.pubKey};return{async _findPeerSingle(a,s){t._log("findPeerSingle %s",a.toB58String());let o=new Mf(Mf.TYPES.FIND_NODE,s.id,0);return t.network.sendRequest(a,o)},async findPeer(a,s={timeout:6e4}){s.timeout=s.timeout||LA.minute,t._log("findPeer %s",a.toB58String());let o=await e(a);if(o!=null)return t._log("found local"),o;let f=await Ts.convertPeerId(a),u=t.routingTable.closestPeers(f,t.kBucketSize);if(u.length===0)throw Cs(new Error("Peer lookup failed"),"ERR_LOOKUP_FAILED");if(u.find(b=>b.isEqual(a))){let b=t.peerStore.get(a);if(b)return t._log("found in peerStore"),{id:b.id,multiaddrs:b.addresses.map(_=>_.multiaddr)}}let l=new q4(t,a.id,()=>async _=>{let A=await this._findPeerSingle(_,a),M=A.closerPeers.find(q=>q.id.isEqual(a));return M?{peer:M,queryComplete:!0}:{closerPeers:A.closerPeers}}),y;try{y=await qA(l.run(u),s.timeout)}finally{l.stop()}let x=!1;if(y.paths.forEach(b=>{b.success&&b.peer&&(x=!0,t.peerStore.addressBook.add(b.peer.id,b.peer.multiaddrs))}),t._log("findPeer %s: %s",a.toB58String(),x),!x)throw Cs(new Error("No peer found"),"ERR_NOT_FOUND");let v=t.peerStore.get(a);if(!v)throw Cs(new Error("No peer found in peer store"),"ERR_NOT_FOUND");return{id:v.id,multiaddrs:v.addresses.map(b=>b.multiaddr)}},async*getClosestPeers(a,s={shallow:!1}){t._log("getClosestPeers to %b",a);let o=await Ts.convertBuffer(a),f=t.routingTable.closestPeers(o,t.kBucketSize),c=await new q4(t,a,()=>async y=>({closerPeers:await n(a,y),pathComplete:s.shallow?!0:void 0})).run(f);if(!c||!c.finalSet)return[];let l=await Ts.sortClosestPeers(Array.from(c.finalSet),o);for(let y of l.slice(0,t.kBucketSize))yield y},async getPublicKey(a){t._log("getPublicKey %s",a.toB58String());let s=t.peerStore.get(a);if(s&&s.id.pubKey)return t._log("getPublicKey: found local copy"),s.id.pubKey;let o;try{o=await i(a)}catch(c){let l=Ts.keyForPublicKey(a),y=await t.get(l);o=kA.keys.unmarshalPublicKey(y)}let f=new Qc(a.id,void 0,o),u=(s&&s.addresses||[]).map(c=>c.multiaddr);return t.peerStore.addressBook.add(f,u),t.peerStore.keyBook.set(f,o),o}}}});var D4=T((VP,L4)=>{L4.exports=function(t){if(!t)throw Error("hashlru must have a max value, of type number, greater than 0");var e=0,r=Object.create(null),n=Object.create(null);function i(a,s){r[a]=s,e++,e>=t&&(e=0,n=r,r=Object.create(null))}return{has:function(a){return r[a]!==void 0||n[a]!==void 0},remove:function(a){r[a]!==void 0&&(r[a]=void 0),n[a]!==void 0&&(n[a]=void 0)},get:function(a){var s=r[a];if(s!==void 0)return s;if((s=n[a])!==void 0)return i(a,s),s},set:function(a,s){r[a]!==void 0?r[a]=s:i(a,s)},clear:function(){r=Object.create(null),n=Object.create(null)}}}});var V4=T((HP,z4)=>{"use strict";var DA=D4(),O4=Ii(),OA=Sa(),{Key:KA}=eo(),{default:FA}=Gc(),Ps=Xn(),Ms=rt(),K4=class{constructor(e,r,n){this.datastore=e,this._log=Ms.logger(r,"providers"),this.cleanupInterval=Ps.PROVIDERS_CLEANUP_INTERVAL,this.provideValidity=Ps.PROVIDERS_VALIDITY,this.lruCacheSize=n||Ps.PROVIDERS_LRU_CACHE_SIZE,this.providers=DA(this.lruCacheSize),this.syncQueue=new FA({concurrency:1})}start(){this._cleaner=setInterval(()=>this._cleanup(),this.cleanupInterval)}stop(){this._cleaner&&(clearInterval(this._cleaner),this._cleaner=null)}_cleanup(){return this.syncQueue.add(async()=>{this._log("start cleanup");let e=Date.now(),r=0,n=0,i=new Map,a=this.datastore.batch(),s=this.datastore.query({prefix:Ps.PROVIDERS_KEY_PREFIX});for await(let o of s)try{let{cid:f,peerId:u}=F4(o.key),c=U4(o.value),l=Date.now(),y=l-c,x=y>this.provideValidity;if(this._log("comparing: %d - %d = %d > %d %s",l,c,y,this.provideValidity,x?"(expired)":""),x){n++,a.delete(o.key);let v=i.get(f)||new Set;v.add(u),i.set(f,v)}r++}catch(f){this._log.error(f.message)}this._log("deleting %d / %d entries",n,r),i.size&&await a.commit();for(let[o,f]of i){let u=Rs(o),c=this.providers.get(u);if(c){for(let l of f)c.delete(l);c.size===0?this.providers.remove(u):this.providers.set(u,c)}}this._log("Cleanup successful (%dms)",Date.now()-e)})}async _getProvidersMap(e){let r=Rs(e),n=this.providers.get(r);return n||(n=await zA(this.datastore,e),this.providers.set(r,n)),n}async addProvider(e,r){return this.syncQueue.add(async()=>{this._log("addProvider %s",e.toString());let n=await this._getProvidersMap(e);this._log("loaded %s provs",n.size);let i=new Date;n.set(Ms.encodeBase32(r.id),i);let a=Rs(e);return this.providers.set(a,n),UA(this.datastore,e,r,i)})}async getProviders(e){return this.syncQueue.add(async()=>(this._log("getProviders %s",e.toString()),[...(await this._getProvidersMap(e)).keys()].map(n=>new OA(Ms.decodeBase32(n)))))}};function Rs(t){return t=typeof t=="string"?t:Ms.encodeBase32(t.bytes),Ps.PROVIDERS_KEY_PREFIX+t}async function UA(t,e,r,n){let i=[Rs(e),"/",Ms.encodeBase32(r.id)].join(""),a=new KA(i),s=Uint8Array.from(O4.encode(n.getTime()));return t.put(a,s)}function F4(t){let e=t.toString().split("/");if(e.length!==4)throw new Error("incorrectly formatted provider entry key in datastore: "+t);return{cid:e[2],peerId:e[3]}}async function zA(t,e){let r=new Map,n=t.query({prefix:Rs(e)});for await(let i of n){let{peerId:a}=F4(i.key);r.set(a,U4(i.value))}return r}function U4(t){return O4.decode(t)}z4.exports=K4});var j4=T((jP,Rf)=>{"use strict";var{AbortController:H4,AbortSignal:VA}=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;Rf.exports=H4;Rf.exports.AbortSignal=VA;Rf.exports.default=H4});var $4=T((GP,Jc)=>{"use strict";var HA=uo(),G4=async(t,e,r)=>HA(new Array(t).fill(),(n,i)=>e(i),r);Jc.exports=G4;Jc.exports.default=G4});var Q4=T(($P,W4)=>{"use strict";var jA=Wc(),{sha256:GA}=(yn(),Vr),$A=Sa(),{AbortController:YA}=j4(),WA=ke(),QA=$4(),JA=Xn(),{logger:ZA}=rt(),Y4=class{constructor(e,r){if(!e)throw new Error("Random Walk needs an instance of the Kademlia DHT");this._kadDHT=e,this._options={...JA.defaultRandomWalk,...r},this.log=ZA(e.peerId,"random-walk"),this._timeoutId=void 0}start(){this._running||(this._running=!0,!(this._timeoutId||!this._options.enabled)&&(this._timeoutId=setTimeout(()=>{this._runPeriodically()},this._options.delay)))}stop(){this._running=!1,this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=void 0),this._controller&&this._controller.abort()}async _runPeriodically(){for(;this._timeoutId;){try{await this._walk(this._options.queriesPerPeriod,this._options.timeout)}catch(e){this._kadDHT._log.error("random-walk:error",e)}if(!this._running)return;await new Promise(e=>{this._timeoutId=setTimeout(e,this._options.interval)})}}async _walk(e,r){this.log("start"),this._controller=new YA;try{await QA(e,async n=>{this.log("running query %d",n);try{let i=await this._randomPeerId();if(!this._controller)return;await this._query(i,{timeout:r,signal:this._controller.signal})}catch(i){if(i&&i.code!=="ETIMEDOUT")throw this.log.error("query %d finished with error",n,i),i}this.log("finished query %d",n)})}finally{this._controller=null,this.log("finished queries")}}async _query(e,r){this.log("query:%s",e.toB58String());let n;try{n=await this._kadDHT.findPeer(e,r)}catch(i){if(i&&i.code==="ERR_NOT_FOUND")return;throw i}throw this.log("query:found",n),WA(new Error(`random-walk: ACTUALLY FOUND PEER: ${n}, ${e.toB58String()}`),"ERR_FOUND_RANDOM_PEER")}async _randomPeerId(){let e=await GA.digest(jA.randomBytes(16));return new $A(e.bytes)}};W4.exports=Y4});var X4=T((YP,Z4)=>{"use strict";var J4=class{constructor(){this.queries=new Set,this.running=!1}queryStarted(e){this.queries.add(e)}queryCompleted(e){this.queries.delete(e)}start(){this.running=!0}stop(){this.running=!1;for(let e of this.queries)e.stop();this.queries.clear()}};Z4.exports=J4});var uB=T((WP,eh)=>{"use strict";var{EventEmitter:XA}=Ds(),qf=ke(),qs=zi(),{MemoryDatastore:eB}=eo(),{equals:e6}=(ur(),fr),{toString:Zc}=(et(),Xe),tB=gv(),ka=rt(),ks=Xn(),rB=B3(),nB=f4(),iB=x4(),aB=N4(),kf=dn(),sB=V4(),oB=Q4(),fB=X4(),Xc=qs.Record,t6=class extends XA{constructor({libp2p:e,dialer:r,peerId:n,peerStore:i,registrar:a,protocolPrefix:s="/ipfs",forceProtocolLegacy:o=!1,datastore:f=new eB,kBucketSize:u=ks.K,clientMode:c=!1,concurrency:l=ks.ALPHA,validators:y={},selectors:x={},randomWalk:v={enabled:!1,queriesPerPeriod:1,interval:3e5,timeout:3e4,delay:1e4},onPut:b=()=>{},onRemove:_=()=>{}}){super();if(!r)throw new Error("libp2p-kad-dht requires an instance of Dialer");this.libp2p=e,this.dialer=r,this.peerId=n,this.peerStore=i,this.registrar=a,this.protocol=s+(o?"":ks.PROTOCOL_DHT),this.kBucketSize=u,this._clientMode=c,this.concurrency=l,this.disjointPaths=Math.ceil(this.kBucketSize/2),this.routingTable=new tB(this.peerId,this.kBucketSize),this.datastore=f,this.providers=new sB(this.datastore,this.peerId),this.validators={pk:qs.validator.validators.pk,...y},this.selectors={pk:qs.selection.selectors.pk,...x},this.network=new rB(this),this._log=ka.logger(this.peerId),this.randomWalk=new oB(this,v),this._queryManager=new fB,this._running=!1,this.contentFetching=nB(this),this.contentRouting=iB(this),this.peerRouting=aB(this),this.onPut=b,this.onRemove=_}get isStarted(){return this._running}start(){this._running||(this._running=!0,this.providers.start(),this._queryManager.start(),this.network.start(),this.randomWalk.start())}stop(){this._running=!1,this.randomWalk.stop(),this.network.stop(),this._queryManager.stop(),this.providers.stop()}async put(e,r,n={}){return this.contentFetching.put(e,r,n)}async get(e,r={}){return this.contentFetching.get(e,r)}async getMany(e,r,n={}){return this.contentFetching.getMany(e,r,n)}async removeLocal(e){this._log(`removeLocal: ${Zc(e,"base32")}`);let r=ka.bufferToKey(e);try{await this.datastore.delete(r)}catch(n){if(n.code==="ERR_NOT_FOUND")return;throw n}}async _putLocal(e,r){this._log(`_putLocal: ${Zc(e,"base32")}`);let n=ka.bufferToKey(e);await this.datastore.put(n,r)}async provide(e){return this.contentRouting.provide(e)}async*findProviders(e,r={timeout:6e3,maxNumProviders:5}){for await(let n of this.contentRouting.findProviders(e,r))yield n}async findPeer(e,r={timeout:6e4}){return this.peerRouting.findPeer(e,r)}async*getClosestPeers(e,r={shallow:!1}){yield*this.peerRouting.getClosestPeers(e,r)}getPublicKey(e){return this.peerRouting.getPublicKey(e)}_peerDiscovered(e,r){this.emit("peer",{id:e,multiaddrs:r})}async _nearestPeersToQuery(e){let r=await ka.convertBuffer(e.key);return this.routingTable.closestPeers(r,this.kBucketSize).map(i=>{let a=this.peerStore.get(i);return{id:i,multiaddrs:a?a.addresses.map(s=>s.multiaddr):[]}})}async _betterPeersToQuery(e,r){return this._log("betterPeersToQuery"),(await this._nearestPeersToQuery(e)).filter(i=>this._isSelf(i.id)?(this._log.error("trying to return self as closer"),!1):!i.id.isEqual(r))}async _checkLocalDatastore(e){this._log(`checkLocalDatastore: ${Zc(e)} %b`,e);let r=ka.bufferToKey(e),n;try{n=await this.datastore.get(r)}catch(a){if(a.code==="ERR_NOT_FOUND")return;throw a}let i=Xc.deserialize(n);if(!i)throw qf(new Error("Invalid record"),"ERR_INVALID_RECORD");if(i.timeReceived==null||ka.now()-i.timeReceived.getTime()>ks.MAX_RECORD_AGE){await this.datastore.delete(r),this.onRemove(i);return}return i}async _add(e){await this.routingTable.add(e)}async _verifyRecordLocally(e){this._log("verifyRecordLocally"),await qs.validator.verifyRecord(this.validators,e)}_isSelf(e){return e&&e6(this.peerId.id,e.id)}async _putValueToPeer(e,r,n){let i=new kf(kf.TYPES.PUT_VALUE,e,0);i.record=Xc.deserialize(r);let a=await this.network.sendRequest(n,i);if(a.record&&!e6(a.record.value,Xc.deserialize(r).value))throw qf(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")}async _getValueOrPeers(e,r){let n=await this._getValueSingle(e,r),i=n.closerPeers,a=n.record;if(a){try{await this._verifyRecordOnline(a)}catch(s){let o="invalid record received, discarded";throw this._log(o),qf(new Error(o),"ERR_INVALID_RECORD")}return{record:a,peers:i}}if(i.length>0)return{peers:i};throw qf(new Error("Not found"),"ERR_NOT_FOUND")}async _getValueSingle(e,r){let n=new kf(kf.TYPES.GET_VALUE,r,0);return this.network.sendRequest(e,n)}async _verifyRecordOnline(e){await qs.validator.verifyRecord(this.validators,e)}};eh.exports=t6;eh.exports.multicodec="/ipfs"+ks.PROTOCOL_DHT});return uB();})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
return Libp2pKadDht}));
